===================================================================
--- Build	(revision 460)
+++ Build	(revision 493)

Property changes on: Build
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 Linux-i686
 obj
+Linux-x86_64
Index: Linux/Sources/Plugins/SSL/certmgr.fd
===================================================================
--- Linux/Sources/Plugins/SSL/certmgr.fd	(revision 460)
+++ Linux/Sources/Plugins/SSL/certmgr.fd	(revision 493)
@@ -39,7 +39,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: JXTabs
 shortcut: 
@@ -57,7 +57,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: CScrollbarSet
 shortcut: 
@@ -111,7 +111,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Import...
 shortcut: 
@@ -129,7 +129,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: View...
 shortcut: 
@@ -147,7 +147,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Delete
 shortcut: 
@@ -165,7 +165,7 @@
 colors: FL_COL1 FL_MCOL
 alignment: FL_ALIGN_LEFT|FL_ALIGN_INSIDE
 style: FL_BOLD_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Total:
 shortcut: 
@@ -183,7 +183,7 @@
 colors: FL_COL1 FL_MCOL
 alignment: FL_ALIGN_LEFT|FL_ALIGN_INSIDE
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: 
 shortcut: 
@@ -201,7 +201,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: 
 shortcut: 
@@ -237,7 +237,7 @@
 colors: FL_COL1 FL_MCOL
 alignment: FL_ALIGN_LEFT|FL_ALIGN_INSIDE
 style: FL_BOLD_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Subject:
 shortcut: 
@@ -255,7 +255,7 @@
 colors: FL_COL1 FL_MCOL
 alignment: FL_ALIGN_LEFT|FL_ALIGN_INSIDE
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: 
 shortcut: 
@@ -273,7 +273,7 @@
 colors: FL_COL1 FL_MCOL
 alignment: FL_ALIGN_LEFT|FL_ALIGN_INSIDE
 style: FL_BOLD_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Issuer:
 shortcut: 
@@ -291,7 +291,7 @@
 colors: FL_COL1 FL_MCOL
 alignment: FL_ALIGN_LEFT|FL_ALIGN_INSIDE
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: 
 shortcut: 
@@ -309,7 +309,7 @@
 colors: FL_COL1 FL_MCOL
 alignment: FL_ALIGN_LEFT|FL_ALIGN_INSIDE
 style: FL_BOLD_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Not Before:
 shortcut: 
@@ -327,7 +327,7 @@
 colors: FL_COL1 FL_MCOL
 alignment: FL_ALIGN_LEFT|FL_ALIGN_INSIDE
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: 
 shortcut: 
@@ -345,7 +345,7 @@
 colors: FL_COL1 FL_MCOL
 alignment: FL_ALIGN_LEFT|FL_ALIGN_INSIDE
 style: FL_BOLD_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Not After:
 shortcut: 
@@ -363,7 +363,7 @@
 colors: FL_COL1 FL_MCOL
 alignment: FL_ALIGN_LEFT|FL_ALIGN_INSIDE
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: 
 shortcut: 
@@ -381,7 +381,7 @@
 colors: FL_COL1 FL_MCOL
 alignment: FL_ALIGN_LEFT|FL_ALIGN_INSIDE
 style: FL_BOLD_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Fingerprint:
 shortcut: 
@@ -399,7 +399,7 @@
 colors: FL_COL1 FL_MCOL
 alignment: FL_ALIGN_LEFT|FL_ALIGN_INSIDE
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: 
 shortcut: 
@@ -417,7 +417,7 @@
 colors: FL_COL1 FL_MCOL
 alignment: FL_ALIGN_LEFT|FL_ALIGN_INSIDE
 style: FL_BOLD_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Location:
 shortcut: 
@@ -435,7 +435,7 @@
 colors: FL_COL1 FL_MCOL
 alignment: FL_ALIGN_LEFT|FL_ALIGN_INSIDE
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: 
 shortcut: 
Index: Linux/Sources/Plugins/SSL/CCertManagerDialog.cp
===================================================================
--- Linux/Sources/Plugins/SSL/CCertManagerDialog.cp	(revision 460)
+++ Linux/Sources/Plugins/SSL/CCertManagerDialog.cp	(revision 493)
@@ -94,25 +94,21 @@
         new JXTextButton("Import...", mTabs,
                     JXWidget::kFixedRight, JXWidget::kFixedBottom, 10,125, 70,25);
     assert( mImportBtn != NULL );
-    mImportBtn->SetFontSize(10);
 
     mViewBtn =
         new JXTextButton("View...", mTabs,
                     JXWidget::kFixedRight, JXWidget::kFixedBottom, 85,125, 70,25);
     assert( mViewBtn != NULL );
-    mViewBtn->SetFontSize(10);
 
     mDeleteBtn =
         new JXTextButton("Delete", mTabs,
                     JXWidget::kFixedRight, JXWidget::kFixedBottom, 160,125, 70,25);
     assert( mDeleteBtn != NULL );
-    mDeleteBtn->SetFontSize(10);
 
     JXStaticText* obj2 =
         new JXStaticText("Total:", mTabs,
                     JXWidget::kHElastic, JXWidget::kVElastic, 370,125, 40,20);
     assert( obj2 != NULL );
-    obj2->SetFontSize(10);
     const JFontStyle obj2_style(kTrue, kFalse, 0, kFalse, (GetColormap())->GetBlackColor());
     obj2->SetFontStyle(obj2_style);
 
@@ -120,7 +116,6 @@
         new CStaticText("", mTabs,
                     JXWidget::kHElastic, JXWidget::kVElastic, 415,125, 55,20);
     assert( mTotal != NULL );
-    mTotal->SetFontSize(10);
 
     JXDownRect* obj3 =
         new JXDownRect(mTabs,
@@ -136,7 +131,6 @@
         new JXStaticText("Subject:", obj3,
                     JXWidget::kHElastic, JXWidget::kVElastic, 5,15, 80,20);
     assert( obj5 != NULL );
-    obj5->SetFontSize(10);
     const JFontStyle obj5_style(kTrue, kFalse, 0, kFalse, (GetColormap())->GetBlackColor());
     obj5->SetFontStyle(obj5_style);
 
@@ -144,13 +138,11 @@
         new CStaticText("", obj3,
                     JXWidget::kHElastic, JXWidget::kVElastic, 85,15, 375,45);
     assert( mSubject != NULL );
-    mSubject->SetFontSize(10);
 
     JXStaticText* obj6 =
         new JXStaticText("Issuer:", obj3,
                     JXWidget::kHElastic, JXWidget::kVElastic, 5,65, 80,20);
     assert( obj6 != NULL );
-    obj6->SetFontSize(10);
     const JFontStyle obj6_style(kTrue, kFalse, 0, kFalse, (GetColormap())->GetBlackColor());
     obj6->SetFontStyle(obj6_style);
 
@@ -158,13 +150,11 @@
         new CStaticText("", obj3,
                     JXWidget::kHElastic, JXWidget::kVElastic, 85,65, 375,45);
     assert( mIssuer != NULL );
-    mIssuer->SetFontSize(10);
 
     JXStaticText* obj7 =
         new JXStaticText("Not Before:", obj3,
                     JXWidget::kHElastic, JXWidget::kVElastic, 5,115, 80,20);
     assert( obj7 != NULL );
-    obj7->SetFontSize(10);
     const JFontStyle obj7_style(kTrue, kFalse, 0, kFalse, (GetColormap())->GetBlackColor());
     obj7->SetFontStyle(obj7_style);
 
@@ -172,13 +162,11 @@
         new CStaticText("", obj3,
                     JXWidget::kHElastic, JXWidget::kVElastic, 85,115, 145,20);
     assert( mNotBefore != NULL );
-    mNotBefore->SetFontSize(10);
 
     JXStaticText* obj8 =
         new JXStaticText("Not After:", obj3,
                     JXWidget::kHElastic, JXWidget::kVElastic, 245,115, 70,20);
     assert( obj8 != NULL );
-    obj8->SetFontSize(10);
     const JFontStyle obj8_style(kTrue, kFalse, 0, kFalse, (GetColormap())->GetBlackColor());
     obj8->SetFontStyle(obj8_style);
 
@@ -186,13 +174,11 @@
         new CStaticText("", obj3,
                     JXWidget::kHElastic, JXWidget::kVElastic, 315,115, 145,20);
     assert( mNotAfter != NULL );
-    mNotAfter->SetFontSize(10);
 
     JXStaticText* obj9 =
         new JXStaticText("Fingerprint:", obj3,
                     JXWidget::kHElastic, JXWidget::kVElastic, 5,140, 80,20);
     assert( obj9 != NULL );
-    obj9->SetFontSize(10);
     const JFontStyle obj9_style(kTrue, kFalse, 0, kFalse, (GetColormap())->GetBlackColor());
     obj9->SetFontStyle(obj9_style);
 
@@ -200,13 +186,11 @@
         new CStaticText("", obj3,
                     JXWidget::kHElastic, JXWidget::kVElastic, 85,140, 375,20);
     assert( mFingerprint != NULL );
-    mFingerprint->SetFontSize(10);
 
     JXStaticText* obj10 =
         new JXStaticText("Location:", obj3,
                     JXWidget::kHElastic, JXWidget::kVElastic, 5,165, 80,20);
     assert( obj10 != NULL );
-    obj10->SetFontSize(10);
     const JFontStyle obj10_style(kTrue, kFalse, 0, kFalse, (GetColormap())->GetBlackColor());
     obj10->SetFontStyle(obj10_style);
 
@@ -214,7 +198,6 @@
         new CStaticText("", obj3,
                     JXWidget::kHElastic, JXWidget::kVElastic, 85,165, 375,30);
     assert( mLocation != NULL );
-    mLocation->SetFontSize(10);
 
 // end JXLayout
 
Index: Linux/Sources/PP_Sources/Hierarchy_List/CNodeVectorTree.cp
===================================================================
--- Linux/Sources/PP_Sources/Hierarchy_List/CNodeVectorTree.cp	(revision 460)
+++ Linux/Sources/PP_Sources/Hierarchy_List/CNodeVectorTree.cp	(revision 493)
@@ -23,6 +23,7 @@
 
 #include "CNodeVectorTree.h"
 
+#include <stddef.h>
 
 // ---------------------------------------------------------------------------
 //		 CNodeVectorTree
Index: Linux/Sources/Application/Preferences_Dialog/prefsidentity.fd
===================================================================
--- Linux/Sources/Application/Preferences_Dialog/prefsidentity.fd	(revision 460)
+++ Linux/Sources/Application/Preferences_Dialog/prefsidentity.fd	(revision 493)
@@ -111,7 +111,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Add...
 shortcut: 
@@ -129,7 +129,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Change...
 shortcut: 
@@ -147,7 +147,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Duplicate
 shortcut: 
@@ -165,7 +165,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Delete
 shortcut: 
Index: Linux/Sources/Application/Preferences_Dialog/CPrefsIdentities.cp
===================================================================
--- Linux/Sources/Application/Preferences_Dialog/CPrefsIdentities.cp	(revision 460)
+++ Linux/Sources/Application/Preferences_Dialog/CPrefsIdentities.cp	(revision 493)
@@ -79,25 +79,21 @@
         new JXTextButton("Add...", this,
                     JXWidget::kHElastic, JXWidget::kVElastic, 40,180, 70,20);
     assert( mAddBtn != NULL );
-    mAddBtn->SetFontSize(10);
 
     mChangeBtn =
         new JXTextButton("Change...", this,
                     JXWidget::kHElastic, JXWidget::kVElastic, 120,180, 70,20);
     assert( mChangeBtn != NULL );
-    mChangeBtn->SetFontSize(10);
 
     mDuplicateBtn =
         new JXTextButton("Duplicate", this,
                     JXWidget::kHElastic, JXWidget::kVElastic, 200,180, 70,20);
     assert( mDuplicateBtn != NULL );
-    mDuplicateBtn->SetFontSize(10);
 
     mDeleteBtn =
         new JXTextButton("Delete", this,
                     JXWidget::kHElastic, JXWidget::kVElastic, 280,180, 70,20);
     assert( mDeleteBtn != NULL );
-    mDeleteBtn->SetFontSize(10);
 
     mContextTied =
         new JXTextCheckbox("Use Tied Identities with New Drafts", this,
Index: Linux/Sources/Application/Preferences_Dialog/Extras/CPrefsEditMappings.cp
===================================================================
--- Linux/Sources/Application/Preferences_Dialog/Extras/CPrefsEditMappings.cp	(revision 460)
+++ Linux/Sources/Application/Preferences_Dialog/Extras/CPrefsEditMappings.cp	(revision 493)
@@ -88,19 +88,16 @@
         new JXTextButton("Add...", obj1,
                     JXWidget::kHElastic, JXWidget::kVElastic, 15,165, 60,20);
     assert( mAddBtn != NULL );
-    mAddBtn->SetFontSize(10);
 
     mChangeBtn =
         new JXTextButton("Change...", obj1,
                     JXWidget::kHElastic, JXWidget::kVElastic, 85,165, 60,20);
     assert( mChangeBtn != NULL );
-    mChangeBtn->SetFontSize(10);
 
     mDeleteBtn =
         new JXTextButton("Delete", obj1,
                     JXWidget::kHElastic, JXWidget::kVElastic, 155,165, 60,20);
     assert( mDeleteBtn != NULL );
-    mDeleteBtn->SetFontSize(10);
 
 // end JXLayout
 
Index: Linux/Sources/Application/Preferences_Dialog/Extras/editcaption.fd
===================================================================
--- Linux/Sources/Application/Preferences_Dialog/Extras/editcaption.fd	(revision 460)
+++ Linux/Sources/Application/Preferences_Dialog/Extras/editcaption.fd	(revision 493)
@@ -39,7 +39,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: My Name
 shortcut: 
@@ -57,7 +57,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: My Email
 shortcut: 
@@ -75,7 +75,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: My Full
 shortcut: 
@@ -93,7 +93,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: My First
 shortcut: 
@@ -111,7 +111,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Smart Name
 shortcut: 
@@ -129,7 +129,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Smart Email
 shortcut: 
@@ -147,7 +147,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Smart Full
 shortcut: 
@@ -165,7 +165,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Smart First
 shortcut: 
@@ -183,7 +183,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: From Name
 shortcut: 
@@ -201,7 +201,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: From Email
 shortcut: 
@@ -219,7 +219,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: From Full
 shortcut: 
@@ -237,7 +237,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: From First
 shortcut: 
@@ -255,7 +255,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: To Name
 shortcut: 
@@ -273,7 +273,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: To Email
 shortcut: 
@@ -291,7 +291,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: To Full
 shortcut: 
@@ -309,7 +309,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: To First
 shortcut: 
@@ -327,7 +327,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: CC Name
 shortcut: 
@@ -345,7 +345,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: CC Email
 shortcut: 
@@ -363,7 +363,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: CC Full
 shortcut: 
@@ -381,7 +381,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: CC First
 shortcut: 
@@ -399,7 +399,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Subject
 shortcut: 
@@ -417,7 +417,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Date Short
 shortcut: 
@@ -435,7 +435,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Date Long
 shortcut: 
@@ -453,7 +453,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Date Now
 shortcut: 
@@ -471,7 +471,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Page Number
 shortcut: 
@@ -489,7 +489,7 @@
 colors: FL_COL1 FL_YELLOW
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Print Summary Headers
 shortcut: 
@@ -561,7 +561,7 @@
 colors: FL_COL1 FL_MCOL
 alignment: FL_ALIGN_LEFT|FL_ALIGN_INSIDE
 style: FL_BOLD_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Header
 shortcut: 
@@ -597,7 +597,7 @@
 colors: FL_COL1 FL_YELLOW
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Message
 shortcut: 
@@ -615,7 +615,7 @@
 colors: FL_COL1 FL_YELLOW
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Draft
 shortcut: 
@@ -633,7 +633,7 @@
 colors: FL_COL1 FL_YELLOW
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Cursor at Top
 shortcut: 
@@ -651,7 +651,7 @@
 colors: FL_COL1 FL_YELLOW
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Draw Box
 shortcut: 
@@ -687,7 +687,7 @@
 colors: FL_COL1 FL_MCOL
 alignment: FL_ALIGN_LEFT|FL_ALIGN_INSIDE
 style: FL_BOLD_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Footer
 shortcut: 
@@ -723,7 +723,7 @@
 colors: FL_COL1 FL_YELLOW
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Message
 shortcut: 
@@ -741,7 +741,7 @@
 colors: FL_COL1 FL_YELLOW
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Draft
 shortcut: 
@@ -759,7 +759,7 @@
 colors: FL_COL1 FL_YELLOW
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Draw Box
 shortcut: 
Index: Linux/Sources/Application/Preferences_Dialog/Extras/CPrefsEditCaption.cp
===================================================================
--- Linux/Sources/Application/Preferences_Dialog/Extras/CPrefsEditCaption.cp	(revision 460)
+++ Linux/Sources/Application/Preferences_Dialog/Extras/CPrefsEditCaption.cp	(revision 493)
@@ -56,157 +56,131 @@
         new JXTextButton("My Name", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 0,0, 80,20);
     assert( mBtn1 != NULL );
-    mBtn1->SetFontSize(10);
 
     mBtn2 =
         new JXTextButton("My Email", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 0,20, 80,20);
     assert( mBtn2 != NULL );
-    mBtn2->SetFontSize(10);
 
     mBtn3 =
         new JXTextButton("My Full", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 0,40, 80,20);
     assert( mBtn3 != NULL );
-    mBtn3->SetFontSize(10);
 
     mBtn4 =
         new JXTextButton("My First", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 0,60, 80,20);
     assert( mBtn4 != NULL );
-    mBtn4->SetFontSize(10);
 
     mBtn5 =
         new JXTextButton("Smart Name", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 80,0, 80,20);
     assert( mBtn5 != NULL );
-    mBtn5->SetFontSize(10);
 
     mBtn6 =
         new JXTextButton("Smart Email", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 80,20, 80,20);
     assert( mBtn6 != NULL );
-    mBtn6->SetFontSize(10);
 
     mBtn7 =
         new JXTextButton("Smart Full", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 80,40, 80,20);
     assert( mBtn7 != NULL );
-    mBtn7->SetFontSize(10);
 
     mBtn8 =
         new JXTextButton("Smart First", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 80,60, 80,20);
     assert( mBtn8 != NULL );
-    mBtn8->SetFontSize(10);
 
     mBtn9 =
         new JXTextButton("From Name", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 160,0, 80,20);
     assert( mBtn9 != NULL );
-    mBtn9->SetFontSize(10);
 
     mBtn10 =
         new JXTextButton("From Email", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 160,20, 80,20);
     assert( mBtn10 != NULL );
-    mBtn10->SetFontSize(10);
 
     mBtn11 =
         new JXTextButton("From Full", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 160,40, 80,20);
     assert( mBtn11 != NULL );
-    mBtn11->SetFontSize(10);
 
     mBtn12 =
         new JXTextButton("From First", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 160,60, 80,20);
     assert( mBtn12 != NULL );
-    mBtn12->SetFontSize(10);
 
     mBtn13 =
         new JXTextButton("To Name", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 240,0, 80,20);
     assert( mBtn13 != NULL );
-    mBtn13->SetFontSize(10);
 
     mBtn14 =
         new JXTextButton("To Email", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 240,20, 80,20);
     assert( mBtn14 != NULL );
-    mBtn14->SetFontSize(10);
 
     mBtn15 =
         new JXTextButton("To Full", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 240,40, 80,20);
     assert( mBtn15 != NULL );
-    mBtn15->SetFontSize(10);
 
     mBtn16 =
         new JXTextButton("To First", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 240,60, 80,20);
     assert( mBtn16 != NULL );
-    mBtn16->SetFontSize(10);
 
     mBtn17 =
         new JXTextButton("CC Name", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 320,0, 80,20);
     assert( mBtn17 != NULL );
-    mBtn17->SetFontSize(10);
 
     mBtn18 =
         new JXTextButton("CC Email", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 320,20, 80,20);
     assert( mBtn18 != NULL );
-    mBtn18->SetFontSize(10);
 
     mBtn19 =
         new JXTextButton("CC Full", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 320,40, 80,20);
     assert( mBtn19 != NULL );
-    mBtn19->SetFontSize(10);
 
     mBtn20 =
         new JXTextButton("CC First", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 320,60, 80,20);
     assert( mBtn20 != NULL );
-    mBtn20->SetFontSize(10);
 
     mBtn21 =
         new JXTextButton("Subject", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 400,0, 80,20);
     assert( mBtn21 != NULL );
-    mBtn21->SetFontSize(10);
 
     mBtn22 =
         new JXTextButton("Date Short", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 400,20, 80,20);
     assert( mBtn22 != NULL );
-    mBtn22->SetFontSize(10);
 
     mBtn23 =
         new JXTextButton("Date Long", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 400,40, 80,20);
     assert( mBtn23 != NULL );
-    mBtn23->SetFontSize(10);
 
     mBtn24 =
         new JXTextButton("Date Now", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 400,60, 80,20);
     assert( mBtn24 != NULL );
-    mBtn24->SetFontSize(10);
 
     mBtn25 =
         new JXTextButton("Page Number", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 480,0, 80,20);
     assert( mBtn25 != NULL );
-    mBtn25->SetFontSize(10);
 
     mSummary =
         new JXTextCheckbox("Print Summary Headers", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 400,80, 150,20);
     assert( mSummary != NULL );
-    mSummary->SetFontSize(10);
 
     mOkBtn =
         new JXTextButton("OK", window,
@@ -229,7 +203,6 @@
         new JXStaticText("Header", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 0,85, 65,20);
     assert( obj1 != NULL );
-    obj1->SetFontSize(10);
     const JFontStyle obj1_style(kTrue, kFalse, 0, kFalse, (GetColormap())->GetBlackColor());
     obj1->SetFontStyle(obj1_style);
 
@@ -243,25 +216,21 @@
         new JXTextRadioButton(1, "Message", mMessageDraft1,
                     JXWidget::kHElastic, JXWidget::kVElastic, 0,0, 80,20);
     assert( obj2 != NULL );
-    obj2->SetFontSize(10);
 
     JXTextRadioButton* obj3 =
         new JXTextRadioButton(2, "Draft", mMessageDraft1,
                     JXWidget::kHElastic, JXWidget::kVElastic, 90,0, 70,20);
     assert( obj3 != NULL );
-    obj3->SetFontSize(10);
 
     mCursorTop =
         new JXTextCheckbox("Cursor at Top", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 80,80, 170,20);
     assert( mCursorTop != NULL );
-    mCursorTop->SetFontSize(10);
 
     mUseBox1 =
         new JXTextCheckbox("Draw Box", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 320,80, 80,20);
     assert( mUseBox1 != NULL );
-    mUseBox1->SetFontSize(10);
 
     mEditHeader =
         new CTextInputDisplay(window,
@@ -272,7 +241,6 @@
         new JXStaticText("Footer", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 0,195, 65,20);
     assert( obj4 != NULL );
-    obj4->SetFontSize(10);
     const JFontStyle obj4_style(kTrue, kFalse, 0, kFalse, (GetColormap())->GetBlackColor());
     obj4->SetFontStyle(obj4_style);
 
@@ -286,19 +254,16 @@
         new JXTextRadioButton(1, "Message", mMessageDraft2,
                     JXWidget::kHElastic, JXWidget::kVElastic, 0,0, 80,20);
     assert( obj5 != NULL );
-    obj5->SetFontSize(10);
 
     JXTextRadioButton* obj6 =
         new JXTextRadioButton(2, "Draft", mMessageDraft2,
                     JXWidget::kHElastic, JXWidget::kVElastic, 90,0, 70,20);
     assert( obj6 != NULL );
-    obj6->SetFontSize(10);
 
     mUseBox2 =
         new JXTextCheckbox("Draw Box", window,
                     JXWidget::kHElastic, JXWidget::kVElastic, 320,190, 80,20);
     assert( mUseBox2 != NULL );
-    mUseBox2->SetFontSize(10);
 
     mEditFooter =
         new CTextInputDisplay(window,
Index: Linux/Sources/Application/Preferences_Dialog/Extras/editmappings.fd
===================================================================
--- Linux/Sources/Application/Preferences_Dialog/Extras/editmappings.fd	(revision 460)
+++ Linux/Sources/Application/Preferences_Dialog/Extras/editmappings.fd	(revision 493)
@@ -93,7 +93,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Add...
 shortcut: 
@@ -111,7 +111,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Change...
 shortcut: 
@@ -129,7 +129,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Delete
 shortcut: 
Index: Linux/Sources/Application/Preferences_Dialog/Sub-panels/Display_Panels/label.fd
===================================================================
--- Linux/Sources/Application/Preferences_Dialog/Sub-panels/Display_Panels/label.fd	(revision 460)
+++ Linux/Sources/Application/Preferences_Dialog/Sub-panels/Display_Panels/label.fd	(revision 493)
@@ -1485,7 +1485,7 @@
 colors: FL_COL1 FL_COL1
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_STYLE
 lcol: FL_BLACK
 label: Set IMAP Label Names
 shortcut: 
Index: Linux/Sources/Application/Preferences_Dialog/Sub-panels/Display_Panels/CPrefsDisplayLabel.cp
===================================================================
--- Linux/Sources/Application/Preferences_Dialog/Sub-panels/Display_Panels/CPrefsDisplayLabel.cp	(revision 460)
+++ Linux/Sources/Application/Preferences_Dialog/Sub-panels/Display_Panels/CPrefsDisplayLabel.cp	(revision 493)
@@ -454,7 +454,6 @@
         new JXTextButton("Set IMAP Label Names", this,
                     JXWidget::kHElastic, JXWidget::kVElastic, 20,275, 155,25);
     assert( mIMAPLabelsBtn != NULL );
-    mIMAPLabelsBtn->SetFontSize(10);
 
 // end JXLayout2
 
Index: Linux/Sources/Application/Preferences_Dialog/Sub-panels/Account_Panels/Authentication_Panels/CPrefsAccountAuth.cp
===================================================================
--- Linux/Sources/Application/Preferences_Dialog/Sub-panels/Account_Panels/Authentication_Panels/CPrefsAccountAuth.cp	(revision 460)
+++ Linux/Sources/Application/Preferences_Dialog/Sub-panels/Account_Panels/Authentication_Panels/CPrefsAccountAuth.cp	(revision 493)
@@ -87,7 +87,6 @@
         new JXTextCheckbox("Use Client Certificate", obj1,
                     JXWidget::kFixedLeft, JXWidget::kFixedTop, 5,17, 145,20);
     assert( mUseTLSClientCert != NULL );
-    mUseTLSClientCert->SetFontSize(10);
 
     mTLSClientCert =
         new HPopupMenu("",obj1,
Index: Linux/Sources/Application/Preferences_Dialog/Sub-panels/Account_Panels/Authentication_Panels/auth.fd
===================================================================
--- Linux/Sources/Application/Preferences_Dialog/Sub-panels/Account_Panels/Authentication_Panels/auth.fd	(revision 460)
+++ Linux/Sources/Application/Preferences_Dialog/Sub-panels/Account_Panels/Authentication_Panels/auth.fd	(revision 493)
@@ -165,7 +165,7 @@
 colors: FL_COL1 FL_YELLOW
 alignment: FL_ALIGN_CENTER
 style: FL_NORMAL_STYLE
-size: FL_DEFAULT_SIZE
+size: FL_NORMAL_SIZE
 lcol: FL_BLACK
 label: Use Client Certificate
 shortcut: 
Index: Linux/Sources/Application/Preferences_Dialog/CPrefsFormatting.cp
===================================================================
--- Linux/Sources/Application/Preferences_Dialog/CPrefsFormatting.cp	(revision 460)
+++ Linux/Sources/Application/Preferences_Dialog/CPrefsFormatting.cp	(revision 493)
@@ -172,32 +172,32 @@
 
 // end JXLayout1
 
-    mListFont->OnCreate();
+    mListFont->OnCreate(true);
     mListFont->CFontNameMenu::SetToPopupChoice();
     mListSize->OnCreate(mListFont);
     mListSize->CFontSizeMenu::SetToPopupChoice();
 
-    mDisplayFont->OnCreate();
+    mDisplayFont->OnCreate(true);
     mDisplayFont->CFontNameMenu::SetToPopupChoice();
     mDisplaySize->OnCreate(mDisplayFont);
     mDisplaySize->CFontSizeMenu::SetToPopupChoice();
 
-    mPrinterFont->OnCreate();
+    mPrinterFont->OnCreate(false);
     mPrinterFont->CFontNameMenu::SetToPopupChoice();
     mPrinterSize->OnCreate(mPrinterFont);
     mPrinterSize->CFontSizeMenu::SetToPopupChoice();
 
-    mCaptionFont->OnCreate();
+    mCaptionFont->OnCreate(true);
     mCaptionFont->CFontNameMenu::SetToPopupChoice();
     mCaptionSize->OnCreate(mCaptionFont);
     mCaptionSize->CFontSizeMenu::SetToPopupChoice();
 
-    mFixedFont->OnCreate();
+    mFixedFont->OnCreate(true, true);
     mFixedFont->CFontNameMenu::SetToPopupChoice();
     mFixedSize->OnCreate(mFixedFont);
     mFixedSize->CFontSizeMenu::SetToPopupChoice();
 
-    mHTMLFont->OnCreate();
+    mHTMLFont->OnCreate(true);
     mHTMLFont->CFontNameMenu::SetToPopupChoice();
     mHTMLSize->OnCreate(mHTMLFont);
     mHTMLSize->CFontSizeMenu::SetToPopupChoice();
Index: Linux/Sources/Application/Calendar/Calendar_View/Day_Week_View/CDayWeekTable.cp
===================================================================
--- Linux/Sources/Application/Calendar/Calendar_View/Day_Week_View/CDayWeekTable.cp	(revision 460)
+++ Linux/Sources/Application/Calendar/Calendar_View/Day_Week_View/CDayWeekTable.cp	(revision 493)
@@ -769,11 +769,11 @@
 		column_usage.push_back(NULL);
 
 		// Add each start/end position
-		uint32_t col = 0;
+		uint32_t col2 = 0;
 		for(CDayEventList::const_iterator iter = list.begin(); iter != list.end(); iter++)
 		{
-			data.push_back(SEventInfo(*iter, true, col++, (*iter)->GetInstancePeriod().GetStart().GetPosixTime()));
-			data.push_back(SEventInfo(*iter, false, col++, (*iter)->GetInstancePeriod().GetEnd().GetPosixTime()));
+			data.push_back(SEventInfo(*iter, true, col2++, (*iter)->GetInstancePeriod().GetStart().GetPosixTime()));
+			data.push_back(SEventInfo(*iter, false, col2++, (*iter)->GetInstancePeriod().GetEnd().GetPosixTime()));
 		}
 		
 		// Sort by posix time
Index: Linux/Sources/Support/CFontNameMenu.h
===================================================================
--- Linux/Sources/Support/CFontNameMenu.h	(revision 460)
+++ Linux/Sources/Support/CFontNameMenu.h	(revision 493)
@@ -71,9 +71,6 @@
 	JString	GetFontName(const JIndex index) const;
 	void	SetFontName1(const JIndex index);
 
-	void	CacheScreenMenu(bool do_mono);
-	void	GetXFontNames(JPtrArray<JString>* fontNames);
-
 	// not allowed
 
 	CFontNameMenu(const CFontNameMenu& source);
Index: Linux/Sources/Support/TPopupMenu.cp
===================================================================
--- Linux/Sources/Support/TPopupMenu.cp	(revision 460)
+++ Linux/Sources/Support/TPopupMenu.cp	(revision 493)
@@ -50,7 +50,7 @@
 	this->SetUpdateAction(JXMenu::kDisableNone);
 
 	// Always listen to ourselves
-	ListenTo(this);
+	TPopupMenu<T>::ListenTo(this);
 }
 
 template <class T> void TPopupMenu<T>::SetValue(JIndex value)
Index: Linux/Sources/Support/Text/CStaticText.cp
===================================================================
--- Linux/Sources/Support/Text/CStaticText.cp	(revision 460)
+++ Linux/Sources/Support/Text/CStaticText.cp	(revision 493)
@@ -122,7 +122,7 @@
 // Set all text from utf8
 void CStaticText::SetText(const char* txt, size_t size)
 {
-	if ((txt != NULL) && (size == 0xFFFFFFFF))
+	if ((txt != NULL) && (size == -1))
 		size = ::strlen(txt);
 
 	cdustring utf16all(txt, size);
Index: Linux/Sources/Support/Text/CStaticText.h
===================================================================
--- Linux/Sources/Support/Text/CStaticText.h	(revision 460)
+++ Linux/Sources/Support/Text/CStaticText.h	(revision 493)
@@ -53,7 +53,7 @@
 		{ mTransparent = transparent; }
 
 			void	SetText(const cdstring& txt);				// UTF8 in
-			void	SetText(const char* txt, size_t size = 0xFFFFFFFF);	// UTF8 in
+			void	SetText(const char* txt, size_t size = -1);	// UTF8 in
 			void	SetText(const cdustring& txt);				// UTF16 in
 			void	SetNumber(long num);						// Number in
 
Index: Linux/Sources/Support/Text/CTextBase.h
===================================================================
--- Linux/Sources/Support/Text/CTextBase.h	(revision 460)
+++ Linux/Sources/Support/Text/CTextBase.h	(revision 493)
@@ -91,9 +91,9 @@
 			void	SetText(const cdustring& all);						// UTF16 in
 
 			void	InsertUTF8(const cdstring& txt);							// Insert unstyled utf8 at selection
-			void	InsertUTF8(const char* txt, size_t len = 0xFFFFFFFF);		// Insert unstyled utf8 at selection
+			void	InsertUTF8(const char* txt, size_t len = -1);				// Insert unstyled utf8 at selection
 			void	InsertText(const cdustring& txt);							// Insert unstyled utf16 at selection
-			void	InsertText(const unichar_t* utxt, size_t len = 0xFFFFFFFF);	// Insert unstyled utf16 at selection
+			void	InsertText(const unichar_t* utxt, size_t len = -1);			// Insert unstyled utf16 at selection
 
 			void	GetText(cdstring& all) const;						// UTF8 out
 		cdstring	GetText() const;									// UTF8 out
Index: Linux/Sources/Support/CInputField.h
===================================================================
--- Linux/Sources/Support/CInputField.h	(revision 460)
+++ Linux/Sources/Support/CInputField.h	(revision 493)
@@ -38,7 +38,7 @@
 												 const JCoordinate w, const JCoordinate h)
   :T(enclosure, hSizing, vSizing, x, y, w, h)
 {
-  SetBackColor(this->GetColormap()->GetWhiteColor());
+  this->SetBackColor(this->GetColormap()->GetWhiteColor());
   this->ShouldAllowDragAndDrop(kTrue);
 }
 
@@ -58,7 +58,7 @@
 												 const JCoordinate w, const JCoordinate h)
   :T(kFalse, kTrue, enclosure, hSizing, vSizing, x, y, w, h)
 {
-  SetBackColor(this->GetColormap()->GetWhiteColor());
+  this->SetBackColor(this->GetColormap()->GetWhiteColor());
   this->ShouldAllowDragAndDrop(kTrue);
 }
 
Index: Linux/Sources/Support/CFontNameMenu.cp
===================================================================
--- Linux/Sources/Support/CFontNameMenu.cp	(revision 460)
+++ Linux/Sources/Support/CFontNameMenu.cp	(revision 493)
@@ -199,19 +199,7 @@
 		(GetFontManager())->GetFontNames(&fontNames);
 	else if (mForScreen)
 	{
-		fontNames.SetCompareFunction(JCompareStringsCaseInsensitive);
-		fontNames.SetSortOrder(JOrderedSetT::kSortAscending);
-
-		// Look for cache
-		JPtrArray<JString>*& fontcache = (mMonoSpaced ? itsXMonoFontNames : itsXFontNames);
-		if (fontcache)
-			fontNames.CopyObjects(*fontcache, fontNames.GetCleanUpAction(), kJFalse);
-		else
-		{
-			// Cache screen items
-			CacheScreenMenu(mMonoSpaced || !quick);
-			fontNames.CopyObjects(*fontcache, fontNames.GetCleanUpAction(), kJFalse);
-		}
+		(GetFontManager())->GetFontNames(&fontNames);
 	}
 	else if (mMonoSpaced)
 		(GetFontManager())->GetMonospaceFontNames(&fontNames);
@@ -243,141 +231,6 @@
 	ListenTo(this);
 }
 
-void CFontNameMenu::GetXFontNames(JPtrArray<JString>* fontNames)
-{
-	fontNames->DeleteAll();
-
-	int nameCount;
-	char** nameList = ::XListFonts(*GetDisplay(), "*", INT_MAX, &nameCount);
-	if (nameList == NULL)
-	{
-		return;
-	}
-
-	for (int i=0; i<nameCount; i++)
-	{
-		if (::strcmp(nameList[i], "nil") != 0)
-		{
-			JString name = nameList[i];
-			fontNames->Append(name);
-		}
-	}
-
-	::XFreeFontNames(nameList);
-}
-
-void CFontNameMenu::CacheScreenMenu(bool do_mono)
-{
-	// Set up arrays for holding all fonts and mono fonts
-	JPtrArray<JString> allfontNames(JPtrArrayT::kDeleteAll);
-	allfontNames.SetCompareFunction(JCompareStringsCaseInsensitive);
-	allfontNames.SetSortOrder(JOrderedSetT::kSortAscending);
-
-	JPtrArray<JString> monofontNames(JPtrArrayT::kDeleteAll);
-	monofontNames.SetCompareFunction(JCompareStringsCaseInsensitive);
-	monofontNames.SetSortOrder(JOrderedSetT::kSortAscending);
-
-	// Get all font names - never mind regex matching
-	JPtrArray<JString> xfontNames(JPtrArrayT::kDeleteAll);
-	xfontNames.SetCompareFunction(JCompareStringsCaseInsensitive);
-	xfontNames.SetSortOrder(JOrderedSetT::kSortAscending);
-	GetXFontNames(&xfontNames);
-	
-	// Now parse each name removing duplicates
-	const JSize xcount = xfontNames.GetElementCount();
-	JString last_name;
-	for (JIndex i = 1; i <= xcount; i++)
-	{
-		// Get copy and tokenize
-		JString name;
-		JString charset;
-		cdstring xfontName(*xfontNames.NthElement(i));
-
-		// Must start with '-'
-		if (xfontName[0UL] != '-')
-			continue;
-
-		// Foundary - skip
-		char* p = ::strtok(xfontName.c_str_mod(), "-");
-
-		// Type face
-		p = ::strtok(NULL, "-");
-		if (p)
-			name = p;
-
-		if (name.IsEmpty() || name == "nil")
-			continue;
-
-		// ConvertToPSFontName
-		const JSize length = name.GetLength();
-		for (JIndex j=1; j<=length; j++)
-		{
-			if (j == 1 || name.GetCharacter(j-1) == ' ')
-				name.SetCharacter(j, toupper(name.GetCharacter(j)));
-		}
-
-		// Do quick duplicate test - assumes font family variants are all returned
-		// consequetively
-		if (name != last_name)
-		{
-			JBoolean isDuplicate;
-			const JIndex index = allfontNames.GetInsertionSortIndex(&name, &isDuplicate);
-			if (!isDuplicate)
-			{
-				// Add to checked list
-				JString* n = new JString(name);
-				assert( n != NULL );
-				allfontNames.InsertAtIndex(index, n);
-
-				// Now check for mono-space if required
-				if (do_mono)
-				{
-					bool do_insert = false;
-					XFontStruct* xfont = ::XLoadQueryFont(*GetDisplay(), *xfontNames.NthElement(i));
-					if (xfont != NULL)
-					{
-						do_insert = (xfont->min_bounds.width == xfont->max_bounds.width);
-						::XFreeFont(*GetDisplay(), xfont);
-					}
-
-					// Add to mono list if required
-					if (do_insert)
-					{
-						const JIndex mindex = monofontNames.GetInsertionSortIndex(&name, &isDuplicate);
-						n = new JString(name);
-						assert( n != NULL );
-						monofontNames.InsertAtIndex(mindex, n);
-					}
-				}
-			}
-
-			// Cache name for fast duplicate compare
-			last_name = name;
-		}
-	}
-
-	xfontNames.DeleteAll();
-
-	// Cache names for next time
-	if (itsXFontNames == NULL)
-	{
-		itsXFontNames = new JPtrArray<JString>(JPtrArrayT::kDeleteAll, allfontNames.GetElementCount());
-		assert( itsXFontNames != NULL );
-		itsXFontNames->CopyObjects(allfontNames, itsXFontNames->GetCleanUpAction(), kJFalse);
-	}
-
-	if (itsXMonoFontNames == NULL)
-	{
-		itsXMonoFontNames = new JPtrArray<JString>(JPtrArrayT::kDeleteAll, monofontNames.GetElementCount());
-		assert( itsXMonoFontNames != NULL );
-		itsXMonoFontNames->CopyObjects(monofontNames, itsXMonoFontNames->GetCleanUpAction(), kJFalse);
-	}
-
-	// Clean up
-	allfontNames.DeleteAll();
-	monofontNames.DeleteAll();
-}
-
 /******************************************************************************
  Receive (protected)
 
Index: Linux/Sources/Support/md5.h
===================================================================
--- Linux/Sources/Support/md5.h	(revision 460)
+++ Linux/Sources/Support/md5.h	(revision 493)
@@ -21,6 +21,8 @@
 documentation and/or software.
  */
 
+#include <stdint.h>
+
 #ifndef MD5_H
 #define MD5_H 1
 
@@ -30,12 +32,8 @@
 
 /* UINT4 defines a four byte word */
 #ifndef UINT4
-#ifdef __alpha
-#define UINT4 unsigned int
-#else
-#define UINT4 unsigned long int
+#define UINT4 uint32_t
 #endif
-#endif
 
 /* MD5 context. */
 typedef struct {
Index: Linux/Make.header
===================================================================
--- Linux/Make.header	(revision 460)
+++ Linux/Make.header	(revision 493)
@@ -64,7 +64,7 @@
 LINK_STATIC = -Wl,-Bstatic
 LINK_DYNAMIC = -Wl,-Bdynamic
 endif
-EXTRA_LINKS = -lpthread -ldl
+EXTRA_LINKS = -lpthread -ldl -lfontconfig
 ifeq ($(shell if [ -f /usr/lib/librt.so ]; then echo 1; else echo 0; fi),1)
 	EXTRA_LINKS := ${EXTRA_LINKS} -lrt
 endif
Index: Linux/Make.files
===================================================================
--- Linux/Make.files	(revision 460)
+++ Linux/Make.files	(revision 493)
@@ -925,6 +925,7 @@
 -prefix ../Sources_Common/Preferences_Store/Clients/
 .cpp CWebDAVPrefsClient
 -prefix ../Libraries/CICalendar/Source/
+.cpp CICalendarInit
 .cpp CITIPDefinitions
 .cpp CITIPProcessor
 .cpp CITIPScheduleResults
Index: MacOS/MulberryXcode.xcodeproj/project.pbxproj
===================================================================
--- MacOS/MulberryXcode.xcodeproj/project.pbxproj	(revision 460)
+++ MacOS/MulberryXcode.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -79,6 +79,9 @@
 		AF3754720AE2D15900C56E20 /* Mulberry.icns in Resources */ = {isa = PBXBuildFile; fileRef = AF37546B0AE2D15900C56E20 /* Mulberry.icns */; };
 		AF3754730AE2D15900C56E20 /* Pref.icns in Resources */ = {isa = PBXBuildFile; fileRef = AF37546C0AE2D15900C56E20 /* Pref.icns */; };
 		AF3754740AE2D15900C56E20 /* shlb.icns in Resources */ = {isa = PBXBuildFile; fileRef = AF37546D0AE2D15900C56E20 /* shlb.icns */; };
+		AF3D685314783A5700598FB3 /* CAddressFieldMultiLine.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF3D685114783A5700598FB3 /* CAddressFieldMultiLine.cp */; };
+		AF3D68561478749700598FB3 /* CAddressFieldSubContainer.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF3D68541478749600598FB3 /* CAddressFieldSubContainer.cp */; };
+		AF4F945B1462F0A30078DC56 /* CAddressFieldBase.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF4F94591462F0A30078DC56 /* CAddressFieldBase.cp */; };
 		AF52ED890AE2F8F600A75C72 /* LTableSelState.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF52ED870AE2F8F600A75C72 /* LTableSelState.cp */; };
 		AF52EDD60AE322FA00A75C72 /* FSpCompat.c in Sources */ = {isa = PBXBuildFile; fileRef = AF52EDD50AE322FA00A75C72 /* FSpCompat.c */; };
 		AF52F1D80AE3367D00A75C72 /* 0bb21872.0 in CopyFiles */ = {isa = PBXBuildFile; fileRef = AF52EF1D0AE32EB200A75C72 /* 0bb21872.0 */; };
@@ -147,6 +150,7 @@
 		AF52F2170AE3367D00A75C72 /* f4996e82.0 in CopyFiles */ = {isa = PBXBuildFile; fileRef = AF52EF5C0AE32EB300A75C72 /* f4996e82.0 */; };
 		AF52F2180AE3367D00A75C72 /* f73e89fd.0 in CopyFiles */ = {isa = PBXBuildFile; fileRef = AF52EF5D0AE32EB300A75C72 /* f73e89fd.0 */; };
 		AF6573A3136CACDD0088690F /* LDAP.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = AF6573A2136CACDC0088690F /* LDAP.framework */; };
+		AF6AA590146044EA00035D50 /* CAddressPreviewAdvanced.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF6AA58E146044EA00035D50 /* CAddressPreviewAdvanced.cp */; };
 		AF8093D10D425EEF002A2E39 /* CVCardSearch.cpp in Sources */ = {isa = PBXBuildFile; fileRef = AF8093D00D425EEF002A2E39 /* CVCardSearch.cpp */; };
 		AF8269410C1B2C9300B18EED /* CStreamBuffer.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF82692E0C1B2C9200B18EED /* CStreamBuffer.cp */; };
 		AF8269440C1B2C9300B18EED /* XMLDocument.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF8269310C1B2C9200B18EED /* XMLDocument.cp */; };
@@ -157,8 +161,10 @@
 		AF8269500C1B2C9300B18EED /* XMLParserSAX.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF82693D0C1B2C9300B18EED /* XMLParserSAX.cp */; };
 		AF8269520C1B2C9300B18EED /* XMLSAXSimple.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF82693F0C1B2C9300B18EED /* XMLSAXSimple.cp */; };
 		AF84FE71129AC70500CB7C63 /* CWebDAVErrorResponseParser.cpp in Sources */ = {isa = PBXBuildFile; fileRef = AF84FE6F129AC70500CB7C63 /* CWebDAVErrorResponseParser.cpp */; };
+		AF85A6C414642833009C526E /* CAddressFieldContainer.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF85A6C214642833009C526E /* CAddressFieldContainer.cp */; };
 		AF899FE2111F3A51002548C0 /* CWebDAVSyncReport.cpp in Sources */ = {isa = PBXBuildFile; fileRef = AF899FE1111F3A51002548C0 /* CWebDAVSyncReport.cpp */; };
 		AF89A008111F50B9002548C0 /* CWebDAVSyncReportParser.cpp in Sources */ = {isa = PBXBuildFile; fileRef = AF89A007111F50B9002548C0 /* CWebDAVSyncReportParser.cpp */; };
+		AF905F5B147834E20096CDFC /* CAddressFieldText.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF905F59147834E20096CDFC /* CAddressFieldText.cp */; };
 		AF97490F136F10BF0073E7F2 /* CCalendarCheckThread.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF97490D136F10BF0073E7F2 /* CCalendarCheckThread.cp */; };
 		AF9BC8EE13D5D46700240750 /* CocoaSpeller.bundle in CopyFiles */ = {isa = PBXBuildFile; fileRef = AF9BC8ED13D5D46600240750 /* CocoaSpeller.bundle */; };
 		AF9BC90813D5D7F000240750 /* CommunicatorAdbkIO.bundle in CopyFiles */ = {isa = PBXBuildFile; fileRef = AF9BC90713D5D7EF00240750 /* CommunicatorAdbkIO.bundle */; };
@@ -181,6 +187,7 @@
 		AFBC9BC7136C899100593A2C /* libssl.dylib in Frameworks */ = {isa = PBXBuildFile; fileRef = AFBC9BC6136C899100593A2C /* libssl.dylib */; };
 		AFBE2AB70D2F30DB002132BE /* CWebDAVPrefsClient.cpp in Sources */ = {isa = PBXBuildFile; fileRef = AFBE2AB60D2F30DB002132BE /* CWebDAVPrefsClient.cpp */; };
 		AFBE2ABA0D2F34A4002132BE /* COptionsAccount.cp in Sources */ = {isa = PBXBuildFile; fileRef = AFBE2AB80D2F34A4002132BE /* COptionsAccount.cp */; };
+		AFC64A2A147C34A6001777F1 /* CEditAddressAdvancedDialog.cp in Sources */ = {isa = PBXBuildFile; fileRef = AFC64A28147C34A4001777F1 /* CEditAddressAdvancedDialog.cp */; };
 		AFC7981B0CCADCAF00E62F0F /* CPasswordManager.cp in Sources */ = {isa = PBXBuildFile; fileRef = AFC7981A0CCADCAF00E62F0F /* CPasswordManager.cp */; };
 		AFC798200CCAE69000E62F0F /* Security.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = AFC7981F0CCAE69000E62F0F /* Security.framework */; };
 		AFCDD2D30AE1647A00E30447 /* os_dep.cp in Sources */ = {isa = PBXBuildFile; fileRef = AFCDD2D20AE1647A00E30447 /* os_dep.cp */; };
@@ -1910,6 +1917,13 @@
 			remoteGlobalIDString = AF419C850AEA6B9E00E19592;
 			remoteInfo = "SSL MachO";
 		};
+		AF7C331414A3C2CC00C70C9D /* PBXContainerItemProxy */ = {
+			isa = PBXContainerItemProxy;
+			containerPortal = AF419E9F0AEA750800E19592 /* PluginLibrary.xcodeproj */;
+			proxyType = 2;
+			remoteGlobalIDString = AF41CB68136BB4B7004178E5;
+			remoteInfo = "PluginLibrary MachO";
+		};
 		AFC79A500CCBEB4C00E62F0F /* PBXContainerItemProxy */ = {
 			isa = PBXContainerItemProxy;
 			containerPortal = AFC79A4C0CCBEB4C00E62F0F /* CocoaSpeller.xcodeproj */;
@@ -1934,15 +1948,6 @@
 /* End PBXContainerItemProxy section */
 
 /* Begin PBXCopyFilesBuildPhase section */
-		AF17A4D4136CE01E00ED3921 /* CopyFiles */ = {
-			isa = PBXCopyFilesBuildPhase;
-			buildActionMask = 2147483647;
-			dstPath = "";
-			dstSubfolderSpec = 13;
-			files = (
-			);
-			runOnlyForDeploymentPostprocessing = 0;
-		};
 		AF52EE1A0AE328B700A75C72 /* CopyFiles */ = {
 			isa = PBXCopyFilesBuildPhase;
 			buildActionMask = 2147483647;
@@ -2689,6 +2694,10 @@
 		AF37546B0AE2D15900C56E20 /* Mulberry.icns */ = {isa = PBXFileReference; lastKnownFileType = image.icns; name = Mulberry.icns; path = Resources/Mulberry.icns; sourceTree = SOURCE_ROOT; };
 		AF37546C0AE2D15900C56E20 /* Pref.icns */ = {isa = PBXFileReference; lastKnownFileType = image.icns; name = Pref.icns; path = Resources/Pref.icns; sourceTree = SOURCE_ROOT; };
 		AF37546D0AE2D15900C56E20 /* shlb.icns */ = {isa = PBXFileReference; lastKnownFileType = image.icns; name = shlb.icns; path = Resources/shlb.icns; sourceTree = SOURCE_ROOT; };
+		AF3D685114783A5700598FB3 /* CAddressFieldMultiLine.cp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = CAddressFieldMultiLine.cp; path = Sources/Application/Address_Book/CAddressFieldMultiLine.cp; sourceTree = "<group>"; };
+		AF3D685214783A5700598FB3 /* CAddressFieldMultiLine.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = CAddressFieldMultiLine.h; path = Sources/Application/Address_Book/CAddressFieldMultiLine.h; sourceTree = "<group>"; };
+		AF3D68541478749600598FB3 /* CAddressFieldSubContainer.cp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = CAddressFieldSubContainer.cp; path = Sources/Application/Address_Book/CAddressFieldSubContainer.cp; sourceTree = "<group>"; };
+		AF3D68551478749600598FB3 /* CAddressFieldSubContainer.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = CAddressFieldSubContainer.h; path = Sources/Application/Address_Book/CAddressFieldSubContainer.h; sourceTree = "<group>"; };
 		AF419E460AEA72AE00E19592 /* CommunicatorAdbkIO.xcodeproj */ = {isa = PBXFileReference; lastKnownFileType = "wrapper.pb-project"; name = CommunicatorAdbkIO.xcodeproj; path = "../Plug-ins/CommunicatorAdbkIO/CommunicatorAdbkIO.xcodeproj"; sourceTree = SOURCE_ROOT; };
 		AF419E4F0AEA72BB00E19592 /* Eudora4AdbkIO.xcodeproj */ = {isa = PBXFileReference; lastKnownFileType = "wrapper.pb-project"; name = Eudora4AdbkIO.xcodeproj; path = "../Plug-ins/Eudora4AdbkIO/Eudora4AdbkIO.xcodeproj"; sourceTree = SOURCE_ROOT; };
 		AF419E580AEA72C900E19592 /* EudoraAdbkIO.xcodeproj */ = {isa = PBXFileReference; lastKnownFileType = "wrapper.pb-project"; name = EudoraAdbkIO.xcodeproj; path = "../Plug-ins/EudoraAdbkIO/EudoraAdbkIO.xcodeproj"; sourceTree = SOURCE_ROOT; };
@@ -2703,6 +2712,8 @@
 		AF419EC00AEA753B00E19592 /* SMIME.xcodeproj */ = {isa = PBXFileReference; lastKnownFileType = "wrapper.pb-project"; name = SMIME.xcodeproj; path = "../Plug-ins/SMIME/SMIME.xcodeproj"; sourceTree = SOURCE_ROOT; };
 		AF419EC60AEA753B00E19592 /* SSL.xcodeproj */ = {isa = PBXFileReference; lastKnownFileType = "wrapper.pb-project"; name = SSL.xcodeproj; path = "../Plug-ins/SSL/SSL.xcodeproj"; sourceTree = SOURCE_ROOT; };
 		AF419EC90AEA753B00E19592 /* vCardAdbkIO.xcodeproj */ = {isa = PBXFileReference; lastKnownFileType = "wrapper.pb-project"; name = vCardAdbkIO.xcodeproj; path = "../Plug-ins/vCardAdbkIO/vCardAdbkIO.xcodeproj"; sourceTree = SOURCE_ROOT; };
+		AF4F94591462F0A30078DC56 /* CAddressFieldBase.cp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = CAddressFieldBase.cp; path = Sources/Application/Address_Book/CAddressFieldBase.cp; sourceTree = "<group>"; };
+		AF4F945A1462F0A30078DC56 /* CAddressFieldBase.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = CAddressFieldBase.h; path = Sources/Application/Address_Book/CAddressFieldBase.h; sourceTree = "<group>"; };
 		AF52ED870AE2F8F600A75C72 /* LTableSelState.cp */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.cpp.cpp; path = LTableSelState.cp; sourceTree = "<group>"; };
 		AF52ED880AE2F8F600A75C72 /* LTableSelState.h */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.c.h; path = LTableSelState.h; sourceTree = "<group>"; };
 		AF52EDD50AE322FA00A75C72 /* FSpCompat.c */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.c.c; path = FSpCompat.c; sourceTree = "<group>"; };
@@ -2772,6 +2783,8 @@
 		AF52EF5C0AE32EB300A75C72 /* f4996e82.0 */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = text; path = f4996e82.0; sourceTree = "<group>"; };
 		AF52EF5D0AE32EB300A75C72 /* f73e89fd.0 */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = text; path = f73e89fd.0; sourceTree = "<group>"; };
 		AF6573A2136CACDC0088690F /* LDAP.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = LDAP.framework; path = System/Library/Frameworks/LDAP.framework; sourceTree = SDKROOT; };
+		AF6AA58E146044EA00035D50 /* CAddressPreviewAdvanced.cp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = CAddressPreviewAdvanced.cp; path = Sources/Application/Address_Book/CAddressPreviewAdvanced.cp; sourceTree = "<group>"; };
+		AF6AA58F146044EA00035D50 /* CAddressPreviewAdvanced.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = CAddressPreviewAdvanced.h; path = Sources/Application/Address_Book/CAddressPreviewAdvanced.h; sourceTree = "<group>"; };
 		AF8093CF0D425EEF002A2E39 /* CVCardSearch.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = CVCardSearch.h; sourceTree = "<group>"; };
 		AF8093D00D425EEF002A2E39 /* CVCardSearch.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; path = CVCardSearch.cpp; sourceTree = "<group>"; };
 		AF82692E0C1B2C9200B18EED /* CStreamBuffer.cp */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.cpp.cpp; name = CStreamBuffer.cp; path = ../../Libraries/XMLLib/Source/CStreamBuffer.cp; sourceTree = "<group>"; };
@@ -2795,10 +2808,14 @@
 		AF8269400C1B2C9300B18EED /* XMLSAXSimple.h */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.c.h; name = XMLSAXSimple.h; path = ../../Libraries/XMLLib/Source/XMLSAXSimple.h; sourceTree = "<group>"; };
 		AF84FE6F129AC70500CB7C63 /* CWebDAVErrorResponseParser.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = CWebDAVErrorResponseParser.cpp; path = ../Sources_Common/HTTP/WebDAVClient/CWebDAVErrorResponseParser.cpp; sourceTree = SOURCE_ROOT; };
 		AF84FE70129AC70500CB7C63 /* CWebDAVErrorResponseParser.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = CWebDAVErrorResponseParser.h; path = ../Sources_Common/HTTP/WebDAVClient/CWebDAVErrorResponseParser.h; sourceTree = SOURCE_ROOT; };
+		AF85A6C214642833009C526E /* CAddressFieldContainer.cp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = CAddressFieldContainer.cp; path = Sources/Application/Address_Book/CAddressFieldContainer.cp; sourceTree = "<group>"; };
+		AF85A6C314642833009C526E /* CAddressFieldContainer.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = CAddressFieldContainer.h; path = Sources/Application/Address_Book/CAddressFieldContainer.h; sourceTree = "<group>"; };
 		AF899FE0111F3A51002548C0 /* CWebDAVSyncReport.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = CWebDAVSyncReport.h; path = ../Sources_Common/HTTP/WebDAVClient/CWebDAVSyncReport.h; sourceTree = "<group>"; };
 		AF899FE1111F3A51002548C0 /* CWebDAVSyncReport.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = CWebDAVSyncReport.cpp; path = ../Sources_Common/HTTP/WebDAVClient/CWebDAVSyncReport.cpp; sourceTree = "<group>"; };
 		AF89A006111F50B9002548C0 /* CWebDAVSyncReportParser.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = CWebDAVSyncReportParser.h; path = ../Sources_Common/HTTP/WebDAVClient/CWebDAVSyncReportParser.h; sourceTree = "<group>"; };
 		AF89A007111F50B9002548C0 /* CWebDAVSyncReportParser.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = CWebDAVSyncReportParser.cpp; path = ../Sources_Common/HTTP/WebDAVClient/CWebDAVSyncReportParser.cpp; sourceTree = "<group>"; };
+		AF905F59147834E20096CDFC /* CAddressFieldText.cp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = CAddressFieldText.cp; path = Sources/Application/Address_Book/CAddressFieldText.cp; sourceTree = "<group>"; };
+		AF905F5A147834E20096CDFC /* CAddressFieldText.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = CAddressFieldText.h; path = Sources/Application/Address_Book/CAddressFieldText.h; sourceTree = "<group>"; };
 		AF97490D136F10BF0073E7F2 /* CCalendarCheckThread.cp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = CCalendarCheckThread.cp; path = ../Sources_Common/Mail/Control/CCalendarCheckThread.cp; sourceTree = "<group>"; };
 		AF97490E136F10BF0073E7F2 /* CCalendarCheckThread.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = CCalendarCheckThread.h; path = ../Sources_Common/Mail/Control/CCalendarCheckThread.h; sourceTree = "<group>"; };
 		AF9BC8ED13D5D46600240750 /* CocoaSpeller.bundle */ = {isa = PBXFileReference; explicitFileType = wrapper.cfbundle; name = CocoaSpeller.bundle; path = "../Plug-ins/CocoaSpeller/build/Debug/CocoaSpeller.bundle"; sourceTree = SOURCE_ROOT; };
@@ -2825,6 +2842,8 @@
 		AFBE2AB60D2F30DB002132BE /* CWebDAVPrefsClient.cpp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; path = CWebDAVPrefsClient.cpp; sourceTree = "<group>"; };
 		AFBE2AB80D2F34A4002132BE /* COptionsAccount.cp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = COptionsAccount.cp; path = ../Sources_Common/Application/Preferences/COptionsAccount.cp; sourceTree = SOURCE_ROOT; };
 		AFBE2AB90D2F34A4002132BE /* COptionsAccount.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = COptionsAccount.h; path = ../Sources_Common/Application/Preferences/COptionsAccount.h; sourceTree = SOURCE_ROOT; };
+		AFC64A28147C34A4001777F1 /* CEditAddressAdvancedDialog.cp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = CEditAddressAdvancedDialog.cp; path = Sources/Application/Address_Book/CEditAddressAdvancedDialog.cp; sourceTree = "<group>"; };
+		AFC64A29147C34A5001777F1 /* CEditAddressAdvancedDialog.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = CEditAddressAdvancedDialog.h; path = Sources/Application/Address_Book/CEditAddressAdvancedDialog.h; sourceTree = "<group>"; };
 		AFC798190CCADCAF00E62F0F /* CPasswordManager.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = CPasswordManager.h; path = ../Sources_Common/Mail/Control/CPasswordManager.h; sourceTree = SOURCE_ROOT; };
 		AFC7981A0CCADCAF00E62F0F /* CPasswordManager.cp */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.cpp.cpp; name = CPasswordManager.cp; path = ../Sources_Common/Mail/Control/CPasswordManager.cp; sourceTree = SOURCE_ROOT; };
 		AFC7981F0CCAE69000E62F0F /* Security.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = Security.framework; path = System/Library/Frameworks/Security.framework; sourceTree = SDKROOT; };
@@ -5953,6 +5972,14 @@
 			path = Timezones;
 			sourceTree = "<group>";
 		};
+		AF7C331114A3C2CC00C70C9D /* Products */ = {
+			isa = PBXGroup;
+			children = (
+				AF7C331514A3C2CC00C70C9D /* libPluginLibrary.a */,
+			);
+			name = Products;
+			sourceTree = "<group>";
+		};
 		AF82692D0C1B2C3500B18EED /* XMLLib */ = {
 			isa = PBXGroup;
 			children = (
@@ -8366,6 +8393,8 @@
 				AFCDDE9A0AE176DD00E30447 /* CAddressTableAction.cp */,
 				AFCDDE9B0AE176DD00E30447 /* CEditAddressDialog.h */,
 				AFCDDE9C0AE176DD00E30447 /* CEditAddressDialog.cp */,
+				AFC64A29147C34A5001777F1 /* CEditAddressAdvancedDialog.h */,
+				AFC64A28147C34A4001777F1 /* CEditAddressAdvancedDialog.cp */,
 				AFCDDE9D0AE176DD00E30447 /* CGroupTable.h */,
 				AFCDDE9E0AE176DD00E30447 /* CGroupTable.cp */,
 				AFCDDE9F0AE176DD00E30447 /* CGroupTableAction.h */,
@@ -8375,6 +8404,18 @@
 				AFCDDEA30AE176DD00E30447 /* CAddressView.h */,
 				AFCDDEA40AE176DD00E30447 /* CAddressView.cp */,
 				AFCDDEA50AE176DD00E30447 /* CAddressPreviewBase.h */,
+				AF6AA58F146044EA00035D50 /* CAddressPreviewAdvanced.h */,
+				AF6AA58E146044EA00035D50 /* CAddressPreviewAdvanced.cp */,
+				AF85A6C314642833009C526E /* CAddressFieldContainer.h */,
+				AF85A6C214642833009C526E /* CAddressFieldContainer.cp */,
+				AF3D68551478749600598FB3 /* CAddressFieldSubContainer.h */,
+				AF3D68541478749600598FB3 /* CAddressFieldSubContainer.cp */,
+				AF4F945A1462F0A30078DC56 /* CAddressFieldBase.h */,
+				AF4F94591462F0A30078DC56 /* CAddressFieldBase.cp */,
+				AF905F5A147834E20096CDFC /* CAddressFieldText.h */,
+				AF905F59147834E20096CDFC /* CAddressFieldText.cp */,
+				AF3D685214783A5700598FB3 /* CAddressFieldMultiLine.h */,
+				AF3D685114783A5700598FB3 /* CAddressFieldMultiLine.cp */,
 				AFCDDEA60AE176DD00E30447 /* CAddressPreview.h */,
 				AFCDDEA70AE176DD00E30447 /* CAddressPreview.cp */,
 				AFCDDEA80AE176DD00E30447 /* CAddressPanelBase.h */,
@@ -10137,7 +10178,6 @@
 				AF52EE1A0AE328B700A75C72 /* CopyFiles */,
 				AF52F0A50AE3323E00A75C72 /* CopyFiles */,
 				AF52F0F60AE3330600A75C72 /* CopyFiles */,
-				AF17A4D4136CE01E00ED3921 /* CopyFiles */,
 			);
 			buildRules = (
 			);
@@ -10170,8 +10210,11 @@
 /* Begin PBXProject section */
 		20286C28FDCF999611CA2CEA /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = C0E91AC908A95435008D54AB /* Build configuration list for PBXProject "MulberryXcode" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 1;
 			knownRegions = (
@@ -10228,6 +10271,10 @@
 					ProjectRef = AF419E9C0AEA750800E19592 /* PineAdbkIO.xcodeproj */;
 				},
 				{
+					ProductGroup = AF7C331114A3C2CC00C70C9D /* Products */;
+					ProjectRef = AF419E9F0AEA750800E19592 /* PluginLibrary.xcodeproj */;
+				},
+				{
 					ProductGroup = AF419EA30AEA750800E19592 /* Products */;
 					ProjectRef = AF419EA20AEA750800E19592 /* QuickmailAdbkIO.xcodeproj */;
 				},
@@ -10347,6 +10394,13 @@
 			remoteRef = AF419EE20AEA753C00E19592 /* PBXContainerItemProxy */;
 			sourceTree = BUILT_PRODUCTS_DIR;
 		};
+		AF7C331514A3C2CC00C70C9D /* libPluginLibrary.a */ = {
+			isa = PBXReferenceProxy;
+			fileType = archive.ar;
+			path = libPluginLibrary.a;
+			remoteRef = AF7C331414A3C2CC00C70C9D /* PBXContainerItemProxy */;
+			sourceTree = BUILT_PRODUCTS_DIR;
+		};
 		AFC79A510CCBEB4C00E62F0F /* CocoaSpeller.bundle */ = {
 			isa = PBXReferenceProxy;
 			fileType = wrapper.cfbundle;
@@ -11498,6 +11552,13 @@
 				AF89A008111F50B9002548C0 /* CWebDAVSyncReportParser.cpp in Sources */,
 				AF84FE71129AC70500CB7C63 /* CWebDAVErrorResponseParser.cpp in Sources */,
 				AF97490F136F10BF0073E7F2 /* CCalendarCheckThread.cp in Sources */,
+				AF6AA590146044EA00035D50 /* CAddressPreviewAdvanced.cp in Sources */,
+				AF4F945B1462F0A30078DC56 /* CAddressFieldBase.cp in Sources */,
+				AF85A6C414642833009C526E /* CAddressFieldContainer.cp in Sources */,
+				AF905F5B147834E20096CDFC /* CAddressFieldText.cp in Sources */,
+				AF3D685314783A5700598FB3 /* CAddressFieldMultiLine.cp in Sources */,
+				AF3D68561478749700598FB3 /* CAddressFieldSubContainer.cp in Sources */,
+				AFC64A2A147C34A6001777F1 /* CEditAddressAdvancedDialog.cp in Sources */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
@@ -11605,6 +11666,7 @@
 				DEAD_CODE_STRIPPING = YES;
 				EXECUTABLE_EXTENSION = app;
 				INFOPLIST_FILE = Packaging/Info.plist;
+				INSTALL_PATH = "$(HOME)/Applications";
 				PRESERVE_DEAD_CODE_INITS_AND_TERMS = YES;
 				PRIVATE_HEADERS_FOLDER_PATH = "";
 				PRODUCT_NAME = Mulberry;
@@ -11615,26 +11677,28 @@
 		AF93880A0B116AA0000C5A54 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
-				DEBUG_INFORMATION_FORMAT = dwarf;
-				GCC_ENABLE_FIX_AND_CONTINUE = YES;
-				GCC_OPTIMIZATION_LEVEL = 0;
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
+				CLANG_WARN_BOOL_CONVERSION = YES;
+				CLANG_WARN_CONSTANT_CONVERSION = YES;
+				CLANG_WARN_ENUM_CONVERSION = YES;
+				CLANG_WARN_INT_CONVERSION = YES;
+				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
+				GCC_OPTIMIZATION_LEVEL = s;
 				GCC_PRECOMPILE_PREFIX_HEADER = YES;
 				GCC_PREFIX_HEADER = Sources/MulberryXcode_Prefix.pch;
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
 				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
 				GCC_WARN_ABOUT_DEPRECATED_FUNCTIONS = NO;
-				GCC_WARN_ABOUT_INVALID_OFFSETOF_MACRO = NO;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
 				GCC_WARN_ABOUT_POINTER_SIGNEDNESS = NO;
 				GCC_WARN_ABOUT_RETURN_TYPE = YES;
 				GCC_WARN_INITIALIZER_NOT_FULLY_BRACKETED = YES;
 				GCC_WARN_NON_VIRTUAL_DESTRUCTOR = YES;
 				GCC_WARN_SHADOW = YES;
+				GCC_WARN_UNINITIALIZED_AUTOS = YES;
+				GCC_WARN_UNUSED_FUNCTION = YES;
 				HEADER_SEARCH_PATHS = /Developer/Headers/FlatCarbon;
 				OTHER_CPLUSPLUSFLAGS = "-fpermissive";
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				SDKROOT = macosx10.6;
+				SEPARATE_STRIP = NO;
 				VALID_ARCHS = i386;
 			};
 			name = Debug;
@@ -11656,25 +11720,28 @@
 		C0E91ACB08A95435008D54AB /* Release */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
+				CLANG_WARN_BOOL_CONVERSION = YES;
+				CLANG_WARN_CONSTANT_CONVERSION = YES;
+				CLANG_WARN_ENUM_CONVERSION = YES;
+				CLANG_WARN_INT_CONVERSION = YES;
 				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
+				GCC_OPTIMIZATION_LEVEL = s;
 				GCC_PRECOMPILE_PREFIX_HEADER = YES;
 				GCC_PREFIX_HEADER = Sources/MulberryXcode_Prefix.pch;
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
 				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
 				GCC_WARN_ABOUT_DEPRECATED_FUNCTIONS = NO;
-				GCC_WARN_ABOUT_INVALID_OFFSETOF_MACRO = NO;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
 				GCC_WARN_ABOUT_POINTER_SIGNEDNESS = NO;
 				GCC_WARN_ABOUT_RETURN_TYPE = YES;
 				GCC_WARN_INITIALIZER_NOT_FULLY_BRACKETED = YES;
 				GCC_WARN_NON_VIRTUAL_DESTRUCTOR = YES;
 				GCC_WARN_SHADOW = YES;
+				GCC_WARN_UNINITIALIZED_AUTOS = YES;
+				GCC_WARN_UNUSED_FUNCTION = YES;
 				HEADER_SEARCH_PATHS = /Developer/Headers/FlatCarbon;
 				OTHER_CPLUSPLUSFLAGS = "-fpermissive";
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
-				SEPARATE_STRIP = YES;
+				SDKROOT = macosx10.6;
+				SEPARATE_STRIP = NO;
 				VALID_ARCHS = i386;
 			};
 			name = Release;
Index: MacOS/Sources/Application/Preferences_Dialog/CPrefsCalendar.h
===================================================================
--- MacOS/Sources/Application/Preferences_Dialog/CPrefsCalendar.h	(revision 460)
+++ MacOS/Sources/Application/Preferences_Dialog/CPrefsCalendar.h	(revision 493)
@@ -52,6 +52,7 @@
 const	PaneIDT		paneid_CalendarHandleICS = 'HICS';
 const	PaneIDT		paneid_AutomaticIMIP = 'IMIP';
 const	PaneIDT		paneid_AutomaticEDST = 'EDST';
+const	PaneIDT		paneid_ShowUID = 'UID ';
 
 // Mesages
 
@@ -76,6 +77,7 @@
 	LCheckBox*			mHandleICS;
 	LCheckBox*			mAutomaticIMIP;
 	LCheckBox*			mAutomaticEDST;
+	LCheckBox*			mShowUID;
 
 public:
 	enum { class_ID = 'Pcal' };
Index: MacOS/Sources/Application/Preferences_Dialog/CPrefsCalendar.cp
===================================================================
--- MacOS/Sources/Application/Preferences_Dialog/CPrefsCalendar.cp	(revision 460)
+++ MacOS/Sources/Application/Preferences_Dialog/CPrefsCalendar.cp	(revision 493)
@@ -70,6 +70,7 @@
 	mHandleICS = (LCheckBox*) FindPaneByID(paneid_CalendarHandleICS);
 	mAutomaticIMIP = (LCheckBox*) FindPaneByID(paneid_AutomaticIMIP);
 	mAutomaticEDST = (LCheckBox*) FindPaneByID(paneid_AutomaticEDST);
+	mShowUID = (LCheckBox*) FindPaneByID(paneid_ShowUID);
 
 	// Find super commander in view chain
 	LView* cparent = GetSuperView();
@@ -107,6 +108,7 @@
 	mHandleICS->SetValue(copyPrefs->mHandleICS.GetValue());
 	mAutomaticIMIP->SetValue(copyPrefs->mAutomaticIMIP.GetValue());
 	mAutomaticEDST->SetValue(copyPrefs->mAutomaticEDST.GetValue());
+	mShowUID->SetValue(copyPrefs->mShowUID.GetValue());
 }
 
 // Force update of prefs
@@ -143,6 +145,7 @@
 	mCopyPrefs->mHandleICS.SetValue(mHandleICS->GetValue());
 	mCopyPrefs->mAutomaticIMIP.SetValue(mAutomaticIMIP->GetValue());
 	mCopyPrefs->mAutomaticEDST.SetValue(mAutomaticEDST->GetValue());
+	mCopyPrefs->mShowUID.SetValue(mShowUID->GetValue());
 }
 
 void CPrefsCalendar::SetHours(LClock* ctrl, uint32_t hours)
Index: MacOS/Sources/Application/Rules/Dialog/CRulesActionSIEVE.h
===================================================================
--- MacOS/Sources/Application/Rules/Dialog/CRulesActionSIEVE.h	(revision 460)
+++ MacOS/Sources/Application/Rules/Dialog/CRulesActionSIEVE.h	(revision 493)
@@ -27,6 +27,7 @@
 // Panes
 const	PaneIDT		paneid_RulesActionS = 1212;
 const	PaneIDT		paneid_RulesActionSPopup1 = 'POP1';
+const	PaneIDT		paneid_RulesActionSPopup2 = 'POP2';
 const	PaneIDT		paneid_RulesActionSText = 'TXT1';
 const	PaneIDT		paneid_RulesActionSMailboxPopup = 'MPOP';
 const	PaneIDT		paneid_RulesActionSTextBtn = 'TBTN';
@@ -33,6 +34,7 @@
 
 // Mesages
 const	MessageT	msg_RulesActionSPopup1 = 'POP1';
+const	MessageT	msg_RulesActionSPopup2 = 'POP2';
 const	MessageT	msg_RulesActionSMailboxPopup = 'MPOP';
 const	MessageT	msg_RulesActionSTextBtn = 'TBTN';
 
@@ -49,6 +51,7 @@
 {
 private:
 	LPopupButton*		mPopup1;
+	LPopupButton*		mPopup2;
 	CTextFieldX*		mText;
 	CMailboxPopup*		mMailboxPopup;
 	LPushButton*		mOptionsBtn;
@@ -71,6 +74,8 @@
 
 protected:
 	virtual void	FinishCreateSelf(void);					// Do odds & ends
+    
+	void	InitLabelNames();
 
 	void	OnSetAction(long item);
 	void	OnSetOptions();
Index: MacOS/Sources/Application/Rules/Dialog/CRulesActionSIEVE.cp
===================================================================
--- MacOS/Sources/Application/Rules/Dialog/CRulesActionSIEVE.cp	(revision 460)
+++ MacOS/Sources/Application/Rules/Dialog/CRulesActionSIEVE.cp	(revision 493)
@@ -38,10 +38,30 @@
 	ePopup_Reject,
 	ePopup_Redirect,
 	ePopup_FileInto,
+	ePopup_SetFlag,
 	ePopup_Separator1,
 	ePopup_Vacation
 };
 
+enum
+{
+	eFlagMenu_Seen = 1,
+	eFlagMenu_Flagged,
+	eFlagMenu_Answered,
+	eFlagMenu_Deleted,
+	eFlagMenu_Draft,
+	eFlagMenu_Separator1,
+	eFlagMenu_Label1,
+	eFlagMenu_Label2,
+	eFlagMenu_Label3,
+	eFlagMenu_Label4,
+	eFlagMenu_Label5,
+	eFlagMenu_Label6,
+	eFlagMenu_Label7,
+	eFlagMenu_Label8
+};
+
+
 // Default constructor
 CRulesActionSIEVE::CRulesActionSIEVE()
 {
@@ -68,15 +88,28 @@
 
 	// Get controls
 	mPopup1 = (LPopupButton*) FindPaneByID(paneid_RulesActionSPopup1);
+	mPopup2 = (LPopupButton*) FindPaneByID(paneid_RulesActionSPopup2);
 	mText = (CTextFieldX*) FindPaneByID(paneid_RulesActionSText);
 	mMailboxPopup = (CMailboxPopup*) FindPaneByID(paneid_RulesActionSMailboxPopup);
 	mMailboxPopup->SetCopyTo(true);
 	mOptionsBtn = (LPushButton*) FindPaneByID(paneid_RulesActionSTextBtn);
+    
+	InitLabelNames();
 
 	// Link controls to this window
 	UReanimator::LinkListenerToBroadcasters(this,this,RidL_CRulesActionSIEVEBtns);
 }
 
+void CRulesActionSIEVE::InitLabelNames()
+{
+	// Change name of labels
+	for(short i = eFlagMenu_Label1; i < eFlagMenu_Label1 + NMessage::eMaxLabels; i++)
+	{
+		::SetMenuItemTextUTF8(mPopup2->GetMacMenuH(), i, CPreferences::sPrefs->mLabels.GetValue()[i - eFlagMenu_Label1]->name);
+	}
+    
+}
+
 // Handle buttons
 void CRulesActionSIEVE::ListenToMessage(
 	MessageT	inMessage,
@@ -144,29 +177,39 @@
 	// Set popup menu for method and show/hide text field as approriate
 	switch(item1)
 	{
-	case ePopup_Keep:
-	case ePopup_Discard:
-	default:
-		mText->Hide();
-		mMailboxPopup->Hide();
-		mOptionsBtn->Hide();
-		break;
-	case ePopup_Reject:
-	case ePopup_Redirect:
-		mText->Show();
-		mMailboxPopup->Hide();
-		mOptionsBtn->Hide();
-		break;
-	case ePopup_FileInto:
-		mText->Show();
-		mMailboxPopup->Show();
-		mOptionsBtn->Hide();
-		break;
-	case ePopup_Vacation:
-		mText->Hide();
-		mMailboxPopup->Hide();
-		mOptionsBtn->Show();
-		break;
+        case ePopup_Keep:
+        case ePopup_Discard:
+        default:
+            mPopup2->Hide();
+            mText->Hide();
+            mMailboxPopup->Hide();
+            mOptionsBtn->Hide();
+            break;
+        case ePopup_Reject:
+        case ePopup_Redirect:
+            mPopup2->Hide();
+            mText->Show();
+            mMailboxPopup->Hide();
+            mOptionsBtn->Hide();
+            break;
+        case ePopup_FileInto:
+            mPopup2->Hide();
+            mText->Show();
+            mMailboxPopup->Show();
+            mOptionsBtn->Hide();
+            break;
+        case ePopup_SetFlag:
+            mPopup2->Show();
+            mText->Hide();
+            mMailboxPopup->Hide();
+            mOptionsBtn->Hide();
+            break;
+        case ePopup_Vacation:
+            mPopup2->Hide();
+            mText->Hide();
+            mMailboxPopup->Hide();
+            mOptionsBtn->Show();
+            break;
 	}
 }
 
@@ -182,80 +225,151 @@
 	}
 }
 
+NMessage::EFlags cMenuToSetFlagMap[] = {NMessage::eNone,
+    NMessage::eSeen,
+    NMessage::eFlagged,
+    NMessage::eAnswered,
+    NMessage::eDeleted,
+    NMessage::eDraft,
+    NMessage::eNone,
+    NMessage::eLabel1,
+    NMessage::eLabel2,
+    NMessage::eLabel3,
+    NMessage::eLabel4,
+    NMessage::eLabel5,
+    NMessage::eLabel6,
+    NMessage::eLabel7,
+    NMessage::eLabel8
+};
+
 CActionItem* CRulesActionSIEVE::GetActionItem() const
 {
 	switch(mPopup1->GetValue())
 	{
-	case ePopup_Keep:
-		return new CActionItem(CActionItem::eKeep);
-	case ePopup_Discard:
-		return new CActionItem(CActionItem::eDiscard);
-	case ePopup_Reject:
-	case ePopup_Redirect:
-	case ePopup_FileInto:
-	{
-		CActionItem::EActionItem type;
-		switch(mPopup1->GetValue())
-		{
-		case ePopup_Reject:
-			type = CActionItem::eReject;
-			break;
-		case ePopup_Redirect:
-			type = CActionItem::eRedirect;
-			break;
-		case ePopup_FileInto:
-			type = CActionItem::eFileInto;
-			break;
-		}
-		return new CActionItem(type, mText->GetText());
+        case ePopup_Keep:
+            return new CActionItem(CActionItem::eKeep);
+        case ePopup_Discard:
+            return new CActionItem(CActionItem::eDiscard);
+        case ePopup_Reject:
+        case ePopup_Redirect:
+        case ePopup_FileInto:
+        {
+            CActionItem::EActionItem type;
+            switch(mPopup1->GetValue())
+            {
+                case ePopup_Reject:
+                    type = CActionItem::eReject;
+                    break;
+                case ePopup_Redirect:
+                    type = CActionItem::eRedirect;
+                    break;
+                case ePopup_FileInto:
+                    type = CActionItem::eFileInto;
+                    break;
+            }
+            return new CActionItem(type, mText->GetText());
+        }
+        case ePopup_SetFlag:
+        {
+            NMessage::EFlags flag = cMenuToSetFlagMap[mPopup2->GetValue()];
+            return new CActionItem(CActionItem::eSetFlag, flag, true);
+        }
+        case ePopup_Vacation:
+            return new CActionItem(CActionItem::eVacation, mActionVacation);
+        default:
+            return NULL;
 	}
-	case ePopup_Vacation:
-		return new CActionItem(CActionItem::eVacation, mActionVacation);
-	default:
-		return NULL;
-	}
 }
 
 void CRulesActionSIEVE::SetActionItem(const CActionItem* spec)
 {
 	long popup1 = 1;
+	long popup2 = 1;
 	cdstring text;
-
+    
 	if (spec)
 	{
 		switch(spec->GetActionItem())
 		{
-		case CActionItem::eKeep:
-		default:;
-			popup1 = ePopup_Keep;
-			break;
-
-		case CActionItem::eDiscard:
-			popup1 = ePopup_Discard;
-			break;
-
-		case CActionItem::eReject:
-			popup1 = ePopup_Reject;
-			text = spec->GetStringData()->GetData();
-			break;
-
-		case CActionItem::eRedirect:
-			popup1 = ePopup_Redirect;
-			text = spec->GetStringData()->GetData();
-			break;
-
-		case CActionItem::eFileInto:
-			popup1 = ePopup_FileInto;
-			text = spec->GetStringData()->GetData();
-			break;
-
-		case CActionItem::eVacation:
-			popup1 = ePopup_Vacation;
-			mActionVacation = spec->GetVacationData()->GetData();
-			break;
+            case CActionItem::eKeep:
+            default:;
+                popup1 = ePopup_Keep;
+                break;
+                
+            case CActionItem::eDiscard:
+                popup1 = ePopup_Discard;
+                break;
+                
+            case CActionItem::eReject:
+                popup1 = ePopup_Reject;
+                text = spec->GetStringData()->GetData();
+                break;
+                
+            case CActionItem::eRedirect:
+                popup1 = ePopup_Redirect;
+                text = spec->GetStringData()->GetData();
+                break;
+                
+            case CActionItem::eFileInto:
+                popup1 = ePopup_FileInto;
+                text = spec->GetStringData()->GetData();
+                break;
+                
+            case CActionItem::eSetFlag:
+                popup1 = ePopup_SetFlag ;
+                popup2 = 1;
+                switch(spec->GetFlagData()->GetData().GetFlags())
+                {
+                    case NMessage::eSeen:
+                        popup2 = eFlagMenu_Seen;
+                        break;
+                    case NMessage::eFlagged:
+                        popup2 = eFlagMenu_Flagged;
+                        break;
+                    case NMessage::eAnswered:
+                        popup2 = eFlagMenu_Answered;
+                        break;
+                    case NMessage::eDeleted:
+                        popup2 = eFlagMenu_Deleted;
+                        break;
+                    case NMessage::eDraft:
+                        popup2 = eFlagMenu_Draft;
+                        break;
+                    case NMessage::eLabel1:
+                        popup2 = eFlagMenu_Label1;
+                        break;
+                    case NMessage::eLabel2:
+                        popup2 = eFlagMenu_Label2;
+                        break;
+                    case NMessage::eLabel3:
+                        popup2 = eFlagMenu_Label3;
+                        break;
+                    case NMessage::eLabel4:
+                        popup2 = eFlagMenu_Label4;
+                        break;
+                    case NMessage::eLabel5:
+                        popup2 = eFlagMenu_Label5;
+                        break;
+                    case NMessage::eLabel6:
+                        popup2 = eFlagMenu_Label6;
+                        break;
+                    case NMessage::eLabel7:
+                        popup2 = eFlagMenu_Label7;
+                        break;
+                    case NMessage::eLabel8:
+                        popup2 = eFlagMenu_Label8;
+                        break;
+                    default:;
+                }
+                break;
+            case CActionItem::eVacation:
+                popup1 = ePopup_Vacation;
+                mActionVacation = spec->GetVacationData()->GetData();
+                break;
 		}
 	}
-
+    
 	mPopup1->SetValue(popup1);
+	mPopup2->SetValue(popup2);
 	mText->SetText(text);
 }
Index: MacOS/Sources/Application/Rules/CRulesWindow.cp
===================================================================
--- MacOS/Sources/Application/Rules/CRulesWindow.cp	(revision 460)
+++ MacOS/Sources/Application/Rules/CRulesWindow.cp	(revision 493)
@@ -161,6 +161,10 @@
 	// Get text traits resource
 	ResetTextTraits(CPreferences::sPrefs->mListTextTraits.GetValue().traits);
 
+    // Set type based on whether rules exist or not
+    mType = (CPreferences::sPrefs->GetFilterManager()->GetFilters(CFilterItem::eLocal).size() != 0) ? CFilterItem::eLocal : CFilterItem::eSIEVE;
+    OnTabs(mType + 1);
+
 	// Set status
 	SetOpen();
 
Index: MacOS/Sources/Application/Calendar/Component_Editing/CNewComponentDetails.cp
===================================================================
--- MacOS/Sources/Application/Calendar/Component_Editing/CNewComponentDetails.cp	(revision 460)
+++ MacOS/Sources/Application/Calendar/Component_Editing/CNewComponentDetails.cp	(revision 493)
@@ -19,6 +19,7 @@
 //#include "CDateTimeZoneSelect.h"
 #include "CNewEventTiming.h"
 #include "CNewToDoTiming.h"
+#include "CPreferences.h"
 
 //#include "CICalendarDuration.h"
 //#include "CICalendar.h"
@@ -56,7 +57,15 @@
 	mTimingView = dynamic_cast<LView*>(FindPaneByID(eTimingView_ID));
 	
 	mLocation = dynamic_cast<CTextFieldX*>(FindPaneByID(eLocation_ID));
+	mDescriptionFocus = FindPaneByID(eDescriptionFocus_ID);
 	mDescription = dynamic_cast<CTextDisplay*>(FindPaneByID(eDescription_ID));
+	mUID = dynamic_cast<CTextFieldX*>(FindPaneByID(eUID_ID));
+    if (CPreferences::sPrefs->mShowUID.Value())
+    {
+        mUID->SetVisible(true);
+        mUID->SetReadOnly(true);
+        mDescriptionFocus->ResizeFrameBy(0, -30, false);
+    }
 }
 
 void CNewComponentDetails::SetEvent(const iCal::CICalendarVEvent& vevent, const iCal::CICalendarComponentExpanded* expanded)
@@ -85,9 +94,10 @@
 	// Do timing panel
 	mTimingPanel->SetEvent(vevent, expanded);
 	
-	// Set recurrence
+	// Set details
 	mLocation->SetText(vevent.GetLocation());
 	mDescription->SetText(vevent.GetDescription());
+    mUID->SetText(vevent.GetUID());
 }
 
 void CNewComponentDetails::SetToDo(const iCal::CICalendarVToDo& vtodo, const iCal::CICalendarComponentExpanded* expanded)
@@ -119,6 +129,7 @@
 	// Set recurrence
 	mLocation->SetText(vtodo.GetLocation());
 	mDescription->SetText(vtodo.GetDescription());
+    mUID->SetText(vtodo.GetUID());
 }
 
 void CNewComponentDetails::GetEvent(iCal::CICalendarVEvent& vevent)
Index: MacOS/Sources/Application/Calendar/Component_Editing/CNewEventDialog.cp
===================================================================
--- MacOS/Sources/Application/Calendar/Component_Editing/CNewEventDialog.cp	(revision 460)
+++ MacOS/Sources/Application/Calendar/Component_Editing/CNewEventDialog.cp	(revision 493)
@@ -201,7 +201,7 @@
 		
 		// Cancel
 		if (result == CErrorDialog::eBtn4)
-			return;
+			return false;
 		
 		// All Events
 		if (result == CErrorDialog::eBtn1)
Index: MacOS/Sources/Application/Calendar/Component_Editing/CNewComponentDetails.h
===================================================================
--- MacOS/Sources/Application/Calendar/Component_Editing/CNewComponentDetails.h	(revision 460)
+++ MacOS/Sources/Application/Calendar/Component_Editing/CNewComponentDetails.h	(revision 493)
@@ -55,7 +55,9 @@
 		eTimingView_ID = 'TVIE',
 		
 		eLocation_ID = 'LOCA',
-		eDescription_ID = 'DESC'
+		eDescriptionFocus_ID = 'DESF',
+		eDescription_ID = 'DESC',
+		eUID_ID = 'UID '
 		
 	};
 	
@@ -64,7 +66,9 @@
 	CNewTimingPanel*		mTimingPanel;
 	
 	CTextFieldX*		mLocation;
+	LPane*              mDescriptionFocus;
 	CTextDisplay*		mDescription;
+	CTextFieldX*		mUID;
 	
 	virtual void		FinishCreateSelf();
 };
Index: MacOS/Packaging/Info.plist
===================================================================
--- MacOS/Packaging/Info.plist	(revision 460)
+++ MacOS/Packaging/Info.plist	(revision 493)
@@ -23,6 +23,8 @@
 			</array>
 			<key>CFBundleTypeRole</key>
 			<string>Editor</string>
+			<key>LSTypeIsPackage</key>
+			<integer>0</integer>
 		</dict>
 		<dict>
 			<key>CFBundleIconFile</key>
@@ -41,6 +43,8 @@
 			</array>
 			<key>CFBundleTypeRole</key>
 			<string>Editor</string>
+			<key>LSTypeIsPackage</key>
+			<integer>0</integer>
 		</dict>
 		<dict>
 			<key>CFBundleIconFile</key>
@@ -59,6 +63,8 @@
 			</array>
 			<key>CFBundleTypeRole</key>
 			<string>Editor</string>
+			<key>LSTypeIsPackage</key>
+			<integer>0</integer>
 		</dict>
 		<dict>
 			<key>CFBundleTypeIconFile</key>
@@ -71,6 +77,8 @@
 			</array>
 			<key>CFBundleTypeRole</key>
 			<string>Editor</string>
+			<key>LSTypeIsPackage</key>
+			<integer>0</integer>
 		</dict>
 		<dict>
 			<key>CFBundleIconFile</key>
@@ -89,6 +97,8 @@
 			</array>
 			<key>CFBundleTypeRole</key>
 			<string>Editor</string>
+			<key>LSTypeIsPackage</key>
+			<integer>0</integer>
 		</dict>
 		<dict>
 			<key>CFBundleIconFile</key>
@@ -107,6 +117,8 @@
 			</array>
 			<key>CFBundleTypeRole</key>
 			<string>Editor</string>
+			<key>LSTypeIsPackage</key>
+			<integer>0</integer>
 		</dict>
 		<dict>
 			<key>CFBundleIconFile</key>
@@ -125,6 +137,8 @@
 			</array>
 			<key>CFBundleTypeRole</key>
 			<string>Editor</string>
+			<key>LSTypeIsPackage</key>
+			<integer>0</integer>
 		</dict>
 		<dict>
 			<key>CFBundleIconFile</key>
@@ -143,12 +157,14 @@
 			</array>
 			<key>CFBundleTypeRole</key>
 			<string>Editor</string>
+			<key>LSTypeIsPackage</key>
+			<integer>0</integer>
 		</dict>
 	</array>
 	<key>CFBundleExecutable</key>
 	<string>${EXECUTABLE_NAME}</string>
 	<key>CFBundleGetInfoString</key>
-	<string>Mulberry v4.1a3, Copyright  Cyrus Daboo, 2006-2011.  All rights reserved.</string>
+	<string>Mulberry v4.1b1, Copyright  Cyrus Daboo, 2006-2014.  All rights reserved.</string>
 	<key>CFBundleHelpBookFolder</key>
 	<string>Mulberry Help</string>
 	<key>CFBundleHelpBookName</key>
@@ -164,7 +180,7 @@
 	<key>CFBundlePackageType</key>
 	<string>APPL</string>
 	<key>CFBundleShortVersionString</key>
-	<string>Mulberry v4.1a3</string>
+	<string>Mulberry v4.1b1</string>
 	<key>CFBundleSignature</key>
 	<string>Mlby</string>
 	<key>CFBundleURLTypes</key>
@@ -195,14 +211,10 @@
 		</dict>
 	</array>
 	<key>CFBundleVersion</key>
-	<string>4.1a3</string>
+	<string>4.1b1</string>
+	<key>LSApplicationCategoryType</key>
+	<string>public.app-category.productivity</string>
 	<key>LSRequiresCarbon</key>
 	<true/>
-	<key>NSServices</key>
-	<array/>
-	<key>UTExportedTypeDeclarations</key>
-	<array/>
-	<key>UTImportedTypeDeclarations</key>
-	<array/>
 </dict>
 </plist>
Index: MacOS/Resources/MulberryVers.r
===================================================================
--- MacOS/Resources/MulberryVers.r	(revision 460)
+++ MacOS/Resources/MulberryVers.r	(revision 493)
@@ -19,19 +19,19 @@
 resource 'vers' (1) {
 	0x4,
 	0x10,
-	alpha,
-	0x3,
+	beta,
+	0x1,
 	0,
-	"v4.1a3",
-	"Mulberry v4.1a3,  Cyrus Daboo, 2006-2012."
+	"v4.1b1",
+	"Mulberry v4.1b1,  Cyrus Daboo, 2006-2014."
 };
 
 resource 'vers' (2) {
 	0x4,
 	0x10,
-	alpha,
+	beta,
 	0x1,
 	0,
-	"v4.1a3",
-	"Mulberry v4.1a3"
+	"v4.1b1",
+	"Mulberry v4.1b1"
 };
Index: Sources_Common/i18n/Charsets/Converters/Unicode/CUCS4.cp
===================================================================
--- Sources_Common/i18n/Charsets/Converters/Unicode/CUCS4.cp	(revision 460)
+++ Sources_Common/i18n/Charsets/Converters/Unicode/CUCS4.cp	(revision 493)
@@ -30,7 +30,7 @@
 	unsigned char c4 = *c++;
 	
 	// Only handle 16-bit chars
-	if (mBigEndian && ((c1 != 0) || (c2 != 0)) || !mBigEndian && ((c3 != 0) || (c4 != 0)))
+	if ((mBigEndian && ((c1 != 0) || (c2 != 0))) || (!mBigEndian && ((c3 != 0) || (c4 != 0))))
 		return undefined_wcharmap;
 	
 	wchar_t	wc = mBigEndian ? ((c3 << 8) | c4) : ((c2 << 8) | c1);
Index: MacOS/MulberryXcode.xcodeproj
===================================================================
--- MacOS/MulberryXcode.xcodeproj	(revision 460)
+++ MacOS/MulberryXcode.xcodeproj	(revision 493)

Property changes on: MacOS/MulberryXcode.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,4 ##
 *.mode*
 *.pbxuser
+xcuserdata
+project.xcworkspace
Index: MacOS
===================================================================
--- MacOS	(revision 460)
+++ MacOS	(revision 493)

Property changes on: MacOS
___________________________________________________________________
Modified: svn:ignore
## -1 +1,2 ##
 build
+DerivedData
Index: Plug-ins/PGP/PGP.xcodeproj
===================================================================
--- Plug-ins/PGP/PGP.xcodeproj	(revision 460)
+++ Plug-ins/PGP/PGP.xcodeproj	(revision 493)

Property changes on: Plug-ins/PGP/PGP.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 *.mode*
 *.pbxuser
+xcuserdata
Index: Sources_Common/i18n/Charsets/Converters/Unicode/CUTF16.cp
===================================================================
--- Sources_Common/i18n/Charsets/Converters/Unicode/CUTF16.cp	(revision 460)
+++ Sources_Common/i18n/Charsets/Converters/Unicode/CUTF16.cp	(revision 493)
@@ -43,8 +43,8 @@
 		// Have lead word - we do not handle these as they are more than 16-bits
 
 		// Ignore second word
-		unsigned char c3 = *c++;
-		unsigned char c4 = *c++;
+		c++;
+		c++;
 
 		return undefined_wcharmap;
 	}
Index: Sources_Common/Plugins/SSL/CCertificateManager.cp
===================================================================
--- Sources_Common/Plugins/SSL/CCertificateManager.cp	(revision 460)
+++ Sources_Common/Plugins/SSL/CCertificateManager.cp	(revision 493)
@@ -57,6 +57,7 @@
 #include "diriterator.h"
 #include "cdfstream.h"
 
+#include <openssl/asn1.h>
 #include <openssl/evp.h>
 #include <openssl/pkcs12.h>
 #include <openssl/x509v3.h>
@@ -575,7 +576,7 @@
 			NSSL::StSSLObject<PKCS12> p12(::d2i_PKCS12_bio(cert.get(), NULL));
 			NSSL::StSSLObject<X509> cert;
 			NSSL::StSSLObject<EVP_PKEY> pkey;
-			NSSL::StSSLObject<STACK_OF(X509), X509> ca(::sk_X509_new_null());
+			NSSL::StSSLObject<STACK_OF(X509), X509> ca(sk_X509_new_null());
 
 			// If importing to personal certs, then get the pkey passphrase
 			bool personal = (type == ePersonalCertificates);
@@ -608,6 +609,7 @@
 			xcert.reset(::d2i_X509_bio(cert.get(), NULL));
 		}
 
+#ifdef ASN1_HEADER
 		else if (format == FORMAT_NETSCAPE)
 		{
 			// Need crlf converter for text file
@@ -667,6 +669,7 @@
 			xcert.reset((X509 *)ah->data);
 			ah->data = NULL;
 		}
+#endif
 
 		// Do actual certificate import if one is left
 		if (xcert.get() != NULL)
@@ -1107,7 +1110,7 @@
 		return NULL;
 	}
 
-	STACK_OF(EVP_PKEY)* result = sk_X509_new_null();
+	STACK_OF(X509)* result = sk_X509_new_null();
 	
 	// Add each matching pkey to the stack
 	for(CCertificateStoreList::const_iterator iter1 = store->begin(); iter1 != store->end(); iter1++)
Index: Sources_Common/Plugins/SSL/CSSLUtils.cp
===================================================================
--- Sources_Common/Plugins/SSL/CSSLUtils.cp	(revision 460)
+++ Sources_Common/Plugins/SSL/CSSLUtils.cp	(revision 493)
@@ -38,10 +38,12 @@
 {
 
 // ASN1_HEADER
+#ifdef ASN1_HEADER
 template<> void StSSLObject<ASN1_HEADER>::delete_obj()
 {
 	::ASN1_HEADER_free(mObj);
 }
+#endif
 
 // BIO
 template<> void StSSLObject<BIO>::delete_obj()
Index: Sources_Common/Plugins/General/CPlugin.h
===================================================================
--- Sources_Common/Plugins/General/CPlugin.h	(revision 460)
+++ Sources_Common/Plugins/General/CPlugin.h	(revision 493)
@@ -145,7 +145,7 @@
 	struct SPluginInfo
 	{
 		const char* mName;						// Name of plug-in
-		NumVersion	mVersion;					// Version number of plugin (as per Mac OS 'vers' rsrc)
+		long		mVersion;					// Version number of plugin (as per Mac OS 'vers' rsrc)
 		EPluginType	mType;						// Plug-in type
 		const char* mManufacturer;				// Manufacturer
 		const char* mDescription;				// Textual description
@@ -169,7 +169,7 @@
 		CPluginInfo& operator=(const SPluginInfo& copy);
 
 		cdstring 	mName;						// Name of plug-in
-		NumVersion 	mVersion;					// Version number of plugin (as per Mac OS 'vers' rsrc)
+		long	 	mVersion;					// Version number of plugin (as per Mac OS 'vers' rsrc)
 		EPluginType	mType;						// Plug-in type
 		cdstring	mManufacturer;				// Manufacturer
 		cdstring	mDescription;				// Textual description
@@ -202,7 +202,7 @@
 	// Get information
 	virtual const cdstring& GetName() const			// Returns the name of the plug-in
 		{ return mInfo.mName; }
-	virtual NumVersion GetVersion() const			// Returns the version number of the plug-in
+	virtual long GetVersion() const					// Returns the version number of the plug-in
 		{ return mInfo.mVersion; }
 	virtual EPluginType GetType() const				// Returns the type of the plug-in
 		{ return mInfo.mType; }
Index: Sources_Common/Mail/INET_Clients/SIEVE/SIEVE/CSIEVECommon.cp
===================================================================
--- Sources_Common/Mail/INET_Clients/SIEVE/SIEVE/CSIEVECommon.cp	(revision 460)
+++ Sources_Common/Mail/INET_Clients/SIEVE/SIEVE/CSIEVECommon.cp	(revision 493)
@@ -33,6 +33,7 @@
 const char* cFILEINTO =					"FILEINTO";
 const char* cVACATION =					"VACATION";
 const char* cRELATIONAL =				"RELATIONAL";
+const char* cIMAP4FLAGS =				"IMAP4FLAGS";
 
 // Capabilities
 const char* cSIEVE_IMPLEMENTATION =		"IMPLEMENTATION";
Index: Sources_Common/Mail/INET_Clients/SIEVE/SIEVE/CSIEVEClient.cp
===================================================================
--- Sources_Common/Mail/INET_Clients/SIEVE/SIEVE/CSIEVEClient.cp	(revision 460)
+++ Sources_Common/Mail/INET_Clients/SIEVE/SIEVE/CSIEVEClient.cp	(revision 493)
@@ -268,6 +268,8 @@
 					mExtensions = static_cast<CFilterProtocol::EExtension>(mExtensions | CFilterProtocol::eVacation);
 				else if (::strcmpnocase(q, cRELATIONAL) == 0)
 					mExtensions = static_cast<CFilterProtocol::EExtension>(mExtensions | CFilterProtocol::eRelational);
+				else if (::strcmpnocase(q, cIMAP4FLAGS) == 0)
+					mExtensions = static_cast<CFilterProtocol::EExtension>(mExtensions | CFilterProtocol::eIMAP4Flags);
 			}
 		}
 	}
Index: Sources_Common/Mail/INET_Clients/SMTP/CSMTPSender.cp
===================================================================
--- Sources_Common/Mail/INET_Clients/SMTP/CSMTPSender.cp	(revision 460)
+++ Sources_Common/Mail/INET_Clients/SMTP/CSMTPSender.cp	(revision 493)
@@ -79,7 +79,7 @@
 	mAllowLog = true;
 	mESMTP = false;
 	mSize = false;
-	mSizeLimit = 0xFFFFFFFF;
+	mSizeLimit = -1;
 	mSTARTTLS = false;
 	mAUTH = false;
 	mDSN = false;
@@ -1139,7 +1139,7 @@
 	mDSN = false;
 	mSTARTTLS = false;
 	mSize = false;
-	mSizeLimit = 0xFFFFFFFF;
+	mSizeLimit = -1;
 }
 
 // Receive capability data - handle continuations
@@ -1198,7 +1198,7 @@
 						
 						// SIZE 0 implies no limit so set to max_ulong
 						if ((errno == ERANGE) || (mSizeLimit == 0))
-							mSizeLimit = 0xFFFFFFFF;
+							mSizeLimit = -1;
 					}
 				}
 			}
Index: Sources_Common/Mail/Control/CMailAccountManager.h
===================================================================
--- Sources_Common/Mail/Control/CMailAccountManager.h	(revision 460)
+++ Sources_Common/Mail/Control/CMailAccountManager.h	(revision 493)
@@ -182,7 +182,7 @@
 	bool IsRemoveableItemFavouriteType(const CMboxRefList* list) const;
 	bool IsWildcardFavouriteType(const CMboxRefList* list) const;
 
-	bool AddFavourite(const cdstring& name, unsigned long index = 0xFFFFFFFF, bool update_prefs = true);
+	bool AddFavourite(const cdstring& name, unsigned long index = -1, bool update_prefs = true);
 	void RenameFavourite(CMboxRefList* list, const cdstring& name, bool update_prefs = true);
 	void RemoveFavourite(CMboxRefList* list, bool update_prefs = true);
 
Index: Sources_Common/Mail/Control/CMailAccountManager.cp
===================================================================
--- Sources_Common/Mail/Control/CMailAccountManager.cp	(revision 460)
+++ Sources_Common/Mail/Control/CMailAccountManager.cp	(revision 493)
@@ -1530,7 +1530,7 @@
 	cdstrpairvect dummy;
 	new_list->SyncList(dummy);
 
-	if (index == 0xFFFFFFFF)
+	if (index == -1)
 		mFavourites.push_back(new_list);
 	else
 		mFavourites.insert(mFavourites.begin() + index, new_list);
@@ -1543,7 +1543,7 @@
 	{
 		CFavouriteItemList& list = CPreferences::sPrefs->mFavourites.Value();
 		CFavouriteItem item(name);
-		if (index == 0xFFFFFFFF)
+		if (index == -1)
 			list.push_back(item);
 		else
 			list.insert(list.begin() + index, item);
Index: Sources_Common/Mail/Filtering/CActionItem.h
===================================================================
--- Sources_Common/Mail/Filtering/CActionItem.h	(revision 460)
+++ Sources_Common/Mail/Filtering/CActionItem.h	(revision 493)
@@ -63,6 +63,7 @@
 		eReject,					// cdstring
 		eRedirect,					// cdstring
 		eFileInto,					// cdstring
+        eSetFlag,                   // CActionFlags
 		eVacation,					// CActionVacation
 
 		eActionLast
Index: Sources_Common/Mail/Filtering/CFilterScript.cp
===================================================================
--- Sources_Common/Mail/Filtering/CFilterScript.cp	(revision 460)
+++ Sources_Common/Mail/Filtering/CFilterScript.cp	(revision 493)
@@ -132,6 +132,13 @@
 			out << "\"relational\"";
 			done_one = true;
 		}
+		if (ext & CFilterProtocol::eIMAP4Flags)
+		{
+			if (done_one)
+				out << ", ";
+			out << "\"imap4flags\"";
+			done_one = true;
+		}
 		out << "];" << get_endl(line_end) << get_endl(line_end);
 	}
 
Index: Sources_Common/Mail/Filtering/CActionItem.cp
===================================================================
--- Sources_Common/Mail/Filtering/CActionItem.cp	(revision 460)
+++ Sources_Common/Mail/Filtering/CActionItem.cp	(revision 493)
@@ -64,7 +64,8 @@
 	 "Discard",
 	 "Reject",
 	 "Redirect",
-	 "FileInto",
+     "FileInto",
+     "SetFlag",
 	 "Vacation",
 	 NULL};
 
@@ -88,6 +89,7 @@
 	 "Reject_SIEVE",
 	 "Redirect",
 	 "FileInto",
+     "SetFlag",
 	 "Vacation",
 	 NULL};
 
@@ -136,6 +138,9 @@
 	case eSound:
 		mData = new CDataItem<COSStringMap>(*copy.GetOSStringMapData());
 		break;
+    case eSetFlag:
+        mData = new CDataItem<CActionFlags>(*copy.GetFlagData());
+        break;
 	case eVacation:
 		mData = new CDataItem<CActionVacation>(*copy.GetVacationData());
 		break;
@@ -215,7 +220,8 @@
 			CPreferences::sPrefs->GetFilterManager()->Log(what);
 		}
 		return;
-	case eFlagMessage:
+    case eFlagMessage:
+    case eSetFlag:
 		{
 			cdstring what("    Action: ");
 			what += cActionDescriptors[mType];
@@ -730,23 +736,28 @@
 {
 	switch(mType)
 	{
-	case eReject:
-	{
-		ext = static_cast<CFilterProtocol::EExtension>(ext | CFilterProtocol::eReject);
-		break;
+        case eReject:
+        {
+            ext = static_cast<CFilterProtocol::EExtension>(ext | CFilterProtocol::eReject);
+            break;
+        }
+        case eFileInto:
+        {
+            ext = static_cast<CFilterProtocol::EExtension>(ext | CFilterProtocol::eFileInto);
+            break;
+        }
+        case eSetFlag:
+        {
+            ext = static_cast<CFilterProtocol::EExtension>(ext | CFilterProtocol::eIMAP4Flags);
+            break;
+        }
+        case eVacation:
+        {
+            ext = static_cast<CFilterProtocol::EExtension>(ext | CFilterProtocol::eVacation);
+            break;
+        }
+        default:;
 	}
-	case eFileInto:
-	{
-		ext = static_cast<CFilterProtocol::EExtension>(ext | CFilterProtocol::eFileInto);
-		break;
-	}
-	case eVacation:
-	{
-		ext = static_cast<CFilterProtocol::EExtension>(ext | CFilterProtocol::eVacation);
-		break;
-	}
-	default:;
-	}
 }
 
 void CActionItem::GenerateSIEVEScript(std::ostream& out) const
@@ -775,14 +786,59 @@
 		out << temp << ";";
 		break;
 	}
-	case eFileInto:
-	{
-		out << "fileinto ";
-		cdstring temp = GetStringData()->GetData();
-		temp.quote(true);
-		out << temp << ";";
-		break;
-	}
+    case eFileInto:
+    {
+        out << "fileinto ";
+        cdstring temp = GetStringData()->GetData();
+        temp.quote(true);
+        out << temp << ";";
+        break;
+    }
+    case eSetFlag:
+    {
+        out << "setflag ";
+        NMessage::EFlags flags = GetFlagData()->GetData().GetFlags();
+        cdstring temp;
+        if (flags & NMessage::eAnswered)
+        {
+            temp = "\\Answered";
+        }
+        else if (flags & NMessage::eFlagged)
+        {
+            temp = "\\Flagged";
+        }
+        else if (flags & NMessage::eDeleted)
+        {
+            temp = "\\Deleted";
+        }
+        else if (flags & NMessage::eSeen)
+        {
+            temp = "\\Seen";
+        }
+        else if (flags & NMessage::eDraft)
+        {
+            temp =  "\\Draft";
+        }
+        else if (flags & NMessage::eMDNSent)
+        {
+            temp =  "$MDNSent";
+        }
+        else if (flags & NMessage::eLabels)
+        {
+            // Scan over all labels and add each
+            for(int i = 0; i < NMessage::eMaxLabels; i++)
+            {
+                if (flags & (NMessage::eLabel1 << i))
+                {
+                    temp = CPreferences::sPrefs->mIMAPLabels.GetValue()[i];
+                    break;
+                }
+            }
+        }
+        temp.quote(true);
+        out << temp << ";";
+        break;
+    }
 	case eVacation:
 	{
 		out << "vacation";
@@ -838,54 +894,55 @@
 {
 	char* p = txt.get();
 	mType = static_cast<EActionItem>(::strindexfind(p, cPrefsDescriptors, eNone));
-
+    
 	switch(mType)
 	{
-	case eNone:
-	case eExpunge:
-	case ePrint:
-	case eKeep:
-	case eDiscard:
-	default:
-		mData = NULL;
-		break;
-	case eFlagMessage:
-		mData = new CDataItem<CActionFlags>;
-		break;
-	case eCopyMessage:
-	case eMoveMessage:
-	case eAlert:
-	case eSpeak:
-	case eReject:
-	case eRedirect:
-	case eFileInto:
-		mData = new CDataItem<cdstring>;
-		break;
-	case eReplyMessage:
-		mData = new CDataItem<CActionReply>;
-		break;
-	case eForwardMessage:
-		mData = new CDataItem<CActionForward>;
-		break;
-	case eBounceMessage:
-		mData = new CDataItem<CActionBounce>;
-		break;
-	case eRejectMessage:
-		mData = new CDataItem<CActionReject>;
-		break;
-	case eSave:
-		mData = new CDataItem<bool>;
-		break;
-	case eSound:
-		mData = new CDataItem<COSStringMap>;
-		break;
-	case eVacation:
-		mData = new CDataItem<CActionVacation>;
-		break;
+        case eNone:
+        case eExpunge:
+        case ePrint:
+        case eKeep:
+        case eDiscard:
+        default:
+            mData = NULL;
+            break;
+        case eFlagMessage:
+        case eSetFlag:
+            mData = new CDataItem<CActionFlags>;
+            break;
+        case eCopyMessage:
+        case eMoveMessage:
+        case eAlert:
+        case eSpeak:
+        case eReject:
+        case eRedirect:
+        case eFileInto:
+            mData = new CDataItem<cdstring>;
+            break;
+        case eReplyMessage:
+            mData = new CDataItem<CActionReply>;
+            break;
+        case eForwardMessage:
+            mData = new CDataItem<CActionForward>;
+            break;
+        case eBounceMessage:
+            mData = new CDataItem<CActionBounce>;
+            break;
+        case eRejectMessage:
+            mData = new CDataItem<CActionReject>;
+            break;
+        case eSave:
+            mData = new CDataItem<bool>;
+            break;
+        case eSound:
+            mData = new CDataItem<COSStringMap>;
+            break;
+        case eVacation:
+            mData = new CDataItem<CActionVacation>;
+            break;
 	}
-
+    
 	if (mData)
 		mData->SetInfo(txt, vers_prefs);
-
+    
 	return true;
 }
Index: Sources_Common/Mail/Filtering/CFilterManager.cp
===================================================================
--- Sources_Common/Mail/Filtering/CFilterManager.cp	(revision 460)
+++ Sources_Common/Mail/Filtering/CFilterManager.cp	(revision 493)
@@ -373,7 +373,7 @@
 		}
 	}
 	
-	return 0xFFFFFFFF;
+	return -1;
 }
 
 unsigned long CFilterManager::GetManualUID(unsigned long index) const
@@ -389,7 +389,7 @@
 		}
 	}
 	
-	return 0xFFFFFFFF;
+	return -1;
 }
 
 const CFilterItem* CFilterManager::GetManualFilter(unsigned long uid) const
Index: Sources_Common/Mail/Message/CEnvelope.cp
===================================================================
--- Sources_Common/Mail/Message/CEnvelope.cp	(revision 460)
+++ Sources_Common/Mail/Message/CEnvelope.cp	(revision 493)
@@ -397,7 +397,7 @@
 	mSubjectNorm = NormaliseSubject(false);
 	mSubjectHash = mSubjectNorm.hash();
 	if (!mSubjectHash)
-		mSubjectHash = 0xFFFFFFFF;
+		mSubjectHash = -1;
 }
 
 // Get normalised subject data
Index: Sources_Common/Mail/Protocols/CMboxProtocol.cp
===================================================================
--- Sources_Common/Mail/Protocols/CMboxProtocol.cp	(revision 460)
+++ Sources_Common/Mail/Protocols/CMboxProtocol.cp	(revision 493)
@@ -1886,7 +1886,7 @@
 		for(CHierarchies::iterator iter = mHierarchies.begin(); (index < 0) && (iter != mHierarchies.end()); iter++)
 			index = (*iter)->FetchIndexOf(mbox);
 	}
-	bool new_mbox = (index == 0xFFFFFFFF);
+	bool new_mbox = (index == -1);
 
 	// Disconnected touch
 	if (IsDisconnected())
Index: Sources_Common/Mail/Protocols/CFilterProtocol.h
===================================================================
--- Sources_Common/Mail/Protocols/CFilterProtocol.h	(revision 460)
+++ Sources_Common/Mail/Protocols/CFilterProtocol.h	(revision 493)
@@ -36,7 +36,8 @@
 		eReject		= 1L << 0,
 		eFileInto	= 1L << 1,
 		eVacation	= 1L << 2,
-		eRelational = 1L << 3
+		eRelational = 1L << 3,
+        eIMAP4Flags = 1L << 4
 	};
 
 			CFilterProtocol(CINETAccount* account);
Index: Sources_Common/Mail/Network/CTLSSocket.h
===================================================================
--- Sources_Common/Mail/Network/CTLSSocket.h	(revision 460)
+++ Sources_Common/Mail/Network/CTLSSocket.h	(revision 493)
@@ -22,11 +22,19 @@
 
 #include "CTCPSocket.h"
 
+#if __dest_os == __mac_os_x
+#define _OS_X_SECURITY
+#endif
+
+#ifdef _OS_X_SECURITY
+#include <Security/Security.h>
+#else
 //#include "openssl_.h"
 struct ssl_ctx_st;
 struct ssl_st;
 struct x509_st;
 struct evp_pkey_st;
+#endif
 
 class CTLSSocket : public CTCPSocket
 {
@@ -54,6 +62,9 @@
 	virtual void TCPStartConnection();						// Active connect
 			void TLSStartConnection();						// Start TLS session
 
+    virtual void TCPCloseConnection();						// Close connect
+            void TLSCloseConnection();						// Close TLS session
+
 	// Receiving data
 	virtual void TCPReceiveData(char* buf, long* len);			// Receive some data
 
@@ -71,18 +82,28 @@
 protected:
 	bool			mTLSOn;
 	int				mTLSType;
+#ifdef _OS_X_SECURITY
+    SSLContextRef   m_ctx;
+#else
 	ssl_ctx_st*		m_ctx;
 	ssl_st*			m_tls;
-	std::vector<int>		mCertErrors;
-	cdstring		mCertText;
-	cdstring		mCertSubject;
-	cdstring		mCertIssuer;
-	cdstring		mCipher;
 	x509_st*		mClientCert;
 	evp_pkey_st*	mClientPrivate;
-	
+#endif
+	std::vector<int>	mCertErrors;
+	cdstring            mCertText;
+	cdstring            mCertSubject;
+	cdstring            mCertIssuer;
+	cdstring            mCipher;
+
 	virtual void TLSReceiveData(char* buf, long* len);			// Receive some data
 	virtual void TLSSendData(char* buf, long len);				// Send data
+    
+private:
+#ifdef _OS_X_SECURITY
+	static OSStatus TLSReadFunc(SSLConnectionRef ref, void* data, size_t* len);
+	static OSStatus TLSWriteFunc(SSLConnectionRef ref, const void* data, size_t* len);
+#endif
 };
 
 #endif
Index: Sources_Common/Calendar_Store/Protocols/CCalendarProtocol.cpp
===================================================================
--- Sources_Common/Calendar_Store/Protocols/CCalendarProtocol.cpp	(revision 460)
+++ Sources_Common/Calendar_Store/Protocols/CCalendarProtocol.cpp	(revision 493)
@@ -1314,8 +1314,18 @@
 				rurls.push_back((*iter).first);
 			}
 
-			if (rurls.size() != 0)
-				mClient->_ReadComponents(node, cal, rurls);
+            while(rurls.size() != 0)
+            {
+                // Limit to at most 50 resources
+                cdstrvect rurls_batched;
+                while(rurls.size() != 0 and rurls_batched.size() < 50)
+                {
+                    rurls_batched.push_back(rurls.back());
+                    rurls.pop_back();
+                }
+            
+				mClient->_ReadComponents(node, cal, rurls_batched);
+            }
 		}
 		
 		// Clear out cache recording
@@ -1575,8 +1585,18 @@
 			}
 
 			// Read components from server into local cache as its a new one on the server
-			if (rurls.size() != 0)
-				mClient->_ReadComponents(node, cal, rurls);
+            while(rurls.size() != 0)
+            {
+                // Limit to at most 50 resources
+                cdstrvect rurls_batched;
+                while(rurls.size() != 0 and rurls_batched.size() < 50)
+                {
+                    rurls_batched.push_back(rurls.back());
+                    rurls.pop_back();
+                }
+                
+                mClient->_ReadComponents(node, cal, rurls_batched);
+            }
 		}
 
 		// Clear out cache recording
Index: Sources_Common/Application/Preferences/CPreferencesBits.cp
===================================================================
--- Sources_Common/Application/Preferences/CPreferencesBits.cp	(revision 460)
+++ Sources_Common/Application/Preferences/CPreferencesBits.cp	(revision 493)
@@ -362,6 +362,7 @@
 	COPY(mHandleICS)
 	COPY(mAutomaticIMIP)
 	COPY(mAutomaticEDST)
+	COPY(mShowUID)
 	COPY(mDefaultCalendar)
 
 //--------------------Attachment Prefs
@@ -949,6 +950,7 @@
 	NOTEQUAL(mHandleICS)
 	NOTEQUAL(mAutomaticIMIP)
 	NOTEQUAL(mAutomaticEDST)
+	NOTEQUAL(mShowUID)
 	NOTEQUAL(mDefaultCalendar)
 
 	// Attachment Prefs
@@ -1446,6 +1448,7 @@
 	SETDIRTY(mHandleICS)
 	SETDIRTY(mAutomaticIMIP)
 	SETDIRTY(mAutomaticEDST)
+	SETDIRTY(mShowUID)
 	SETDIRTY(mDefaultCalendar)
 
 	// Attachment Prefs
Index: Sources_Common/Application/Preferences/CPreferencesXtra.cp
===================================================================
--- Sources_Common/Application/Preferences/CPreferencesXtra.cp	(revision 460)
+++ Sources_Common/Application/Preferences/CPreferencesXtra.cp	(revision 493)
@@ -733,6 +733,7 @@
 	mHandleICS.mValue = true;
 	mAutomaticIMIP.mValue = false;
 	mAutomaticEDST.mValue = true;
+    mShowUID.mValue = false;
 }
 
 void CPreferences::InitAttachmentPrefs()
Index: Sources_Common/Application/Mailbox_Info/CMailboxInfoTableCommon.cp
===================================================================
--- Sources_Common/Application/Mailbox_Info/CMailboxInfoTableCommon.cp	(revision 460)
+++ Sources_Common/Application/Mailbox_Info/CMailboxInfoTableCommon.cp	(revision 493)
@@ -685,7 +685,7 @@
 	{
 		unsigned long index = CPreferences::sPrefs->GetFilterManager()->GetManualIndex(uid);
 		
-		if (index != 0xFFFFFFFF)
+		if (index != -1)
 			DoApplyRuleMailbox(index);
 	}
 }
Index: Sources_Common/Utilities/diriterator.cp
===================================================================
--- Sources_Common/Utilities/diriterator.cp	(revision 460)
+++ Sources_Common/Utilities/diriterator.cp	(revision 493)
@@ -223,7 +223,7 @@
 
 		// Ignore hidden files if not required
 		if (!mReturnHiddenFiles &&
-			(mCurrentDir && (((FinderInfo*)&finfo.finderInfo)->folder.finderFlags & kIsInvisible) ||
+			((mCurrentDir && (((FinderInfo*)&finfo.finderInfo)->folder.finderFlags & kIsInvisible)) ||
 			 (((FinderInfo*)&finfo.finderInfo)->file.finderFlags & kIsInvisible)))
 			continue;
 
Index: Sources_Common/Utilities/CBroadcaster.h
===================================================================
--- Sources_Common/Utilities/CBroadcaster.h	(revision 460)
+++ Sources_Common/Utilities/CBroadcaster.h	(revision 493)
@@ -21,6 +21,7 @@
 #define __CBROADCASTER__MULBERRY__
 
 #include <vector>
+#include <stddef.h>
 
 class CListener;
 typedef std::vector<CListener*> CListenerList;
Index: Sources_Common/Utilities/ptrvector.h
===================================================================
--- Sources_Common/Utilities/ptrvector.h	(revision 460)
+++ Sources_Common/Utilities/ptrvector.h	(revision 493)
@@ -21,6 +21,7 @@
 #define __PTRVECTOR__MULBERRY__
 
 #include <vector>
+#include <stddef.h>
 
 // Classes
 
Index: Plug-ins/include/stl.mak
===================================================================
--- Plug-ins/include/stl.mak	(revision 460)
+++ Plug-ins/include/stl.mak	(revision 493)
@@ -38,7 +38,7 @@
 
 CFLAGS = ${STL_INC} -Wall -Wno-multichar -Wno-unused -Wno-unknown-pragmas \
 	-g \
-	-include ../Common/Plugin_Prefix_Linux.h -D_REENTRANT ${CINCS}
+	-include ../Common/Plugin_Prefix_Linux.h -fPIC -D_REENTRANT ${CINCS}
 
 LINK_STATIC := -Wl,-Bstatic
 LINK_DYNAMIC := -Wl,-Bdynamic
Index: Plug-ins/Common/os_dep.h
===================================================================
--- Plug-ins/Common/os_dep.h	(revision 460)
+++ Plug-ins/Common/os_dep.h	(revision 493)
@@ -50,6 +50,8 @@
 #   define big_endian
 #  elif defined(__i386__)
 #   undef big_endian
+#  elif defined(__x86_64__)
+#   undef big_endian
 #  else
 #   error unknown endian
 #  endif
Index: Sources_Common/Mail/Network/CTCPSocket.cp
===================================================================
--- Sources_Common/Mail/Network/CTCPSocket.cp	(revision 460)
+++ Sources_Common/Mail/Network/CTCPSocket.cp	(revision 493)
@@ -1772,7 +1772,19 @@
 
 	// Yield before to get any user abort
 	TCPYield();
+    
+    while (!_ReceiveData(buf, len)) {
+        // Select yield while waiting to unblock
+        TCPSelectYield(true);
+    }
+    
+	// Reset tickle timer
+	TimerReset();
+}
 
+// Receive data
+bool CTCPSocket::_ReceiveData(char* buf, long* len)
+{
 	// Get any data present at the moment
 	int result;
 	while((result = ::recv(mSocket, buf, *len, 0)) == SOCKET_ERROR)
@@ -1781,10 +1793,7 @@
 
 		// Check for failure
 		if (err == EWOULDBLOCK)
-
-			// Select yield while waiting to unblock
-			TCPSelectYield(true);
-
+            return false;
 		else
 		{
 			TCPAbort(true);
@@ -1810,9 +1819,7 @@
 	}
 
 	*len = result;
-
-	// Reset tickle timer
-	TimerReset();
+    return true;
 }
 
 // S E N D I N G  D A T A  _____________________________________________________________________________________
@@ -1827,7 +1834,23 @@
 
 	// Yield before to get any user abort
 	TCPYield();
+    
+    long result = 0;
+    while ((result = _SendData(buf, len)) != 0) {
+        // Select yield while waiting to unblock
+        TCPSelectYield(false);
+        
+        buf += result;
+        len += result;
+    }
+    
+	// Reset tickle timer
+	TimerReset();
+}
 
+// Send data
+long CTCPSocket::_SendData(char* buf, long len)
+{
 	// Send data in blocks of buffer size
 	char* p = buf;
 	while(len)
@@ -1843,7 +1866,7 @@
 			if (err == EWOULDBLOCK)
 
 				// Select yield while waiting to unblock
-				TCPSelectYield(false);
+				return len;
 
 			else
 			{
@@ -1863,7 +1886,6 @@
 			p += result;
 		}
 	}
-
-	// Reset tickle timer
-	TimerReset();
+    
+    return 0;
 }
Index: Sources_Common/Mail/Attachments/CAttachment.cp
===================================================================
--- Sources_Common/Mail/Attachments/CAttachment.cp	(revision 460)
+++ Sources_Common/Mail/Attachments/CAttachment.cp	(revision 493)
@@ -555,6 +555,10 @@
 						if (part_subtype > eContentSubHTML)
 							part_subtype = (CPreferences::sPrefs->showStyled.GetValue() ? eNoContentSubType : eContentSubXtoken);
 
+                        // Skip text with no content
+                        if ((*iter)->mContent.GetContentSize() <= 4)
+                            break;
+
 						// Get higher type if showing styled or style test is turned off
 						if ((no_style_test || CPreferences::sPrefs->showStyled.GetValue()) && (part_subtype > subtype) ||
 							// Get lower type if not showing styled
Index: Sources_Common/Application/Preferences/CPreferencesRW.cp
===================================================================
--- Sources_Common/Application/Preferences/CPreferencesRW.cp	(revision 460)
+++ Sources_Common/Application/Preferences/CPreferencesRW.cp	(revision 493)
@@ -524,7 +524,7 @@
 			WRITETOMAP(mExpandedCalendars, cExpandedCalendarsKey)			// >= v4.0d1
 			WRITETOMAP(mCalendarColours, cCalendarColoursKey)				// >= v4.0d1
 			WRITETOMAP(mTimezone, cTimezoneKey)								// >= v4.0d1
-			WRITETOMAP(mFavouriteTimezones, cFavouriteTimezonesKey)			// >= v4.1.a1
+			WRITETOMAP(mFavouriteTimezones, cFavouriteTimezonesKey)			// >= v4.1a1
 			WRITETOMAP(mWeekStartDay, cWeekStartDayKey)						// >= v4.0d1
 			WRITETOMAP(mWorkDayMask, cWorkDayMaskKey)						// >= v4.0d1
 			WRITETOMAP(mDayWeekTimeRanges, cDayWeekTimeRangesKey)			// >= v4.0d1
@@ -533,6 +533,7 @@
 			WRITETOMAP(mHandleICS, cHandleICSKey)							// >= v4.0d1
 			WRITETOMAP(mAutomaticIMIP, cAutomaticIMIPKey)					// >= v4.0a5
 			WRITETOMAP(mAutomaticEDST, cAutomaticEDSTKey)					// >= v4.0.8
+			WRITETOMAP(mShowUID, cShowUIDKey)                               // >= v4.1a3
 			WRITETOMAP(mDefaultCalendar, cDefaultCalendarKey)				// >= v4.0d1
 		}
 	}
@@ -1722,6 +1723,7 @@
 		READFROMMAP(mHandleICS, cHandleICSKey)
 		READFROMMAP(mAutomaticIMIP, cAutomaticIMIPKey)
 		READFROMMAP(mAutomaticEDST, cAutomaticEDSTKey)
+		READFROMMAP(mShowUID, cShowUIDKey)
 		READFROMMAP(mDefaultCalendar, cDefaultCalendarKey)
 	}
 
Index: Sources_Common/Application/Preferences/CPreferences.h
===================================================================
--- Sources_Common/Application/Preferences/CPreferences.h	(revision 460)
+++ Sources_Common/Application/Preferences/CPreferences.h	(revision 493)
@@ -416,6 +416,7 @@
 	CPreferenceValueMap<bool>								mHandleICS;				// Handle text/calendar internally
 	CPreferenceValueMap<bool>								mAutomaticIMIP;			// Send iMIPs automatically
 	CPreferenceValueMap<bool>								mAutomaticEDST;			// Upgrade timezones automatically
+	CPreferenceValueMap<bool>								mShowUID;               // Show UID property
 	CPreferenceValueMap<cdstring>							mDefaultCalendar;		// Default calendar to add new events to
 
 	// Attachment Prefs
Index: Sources_Common/Application/Preferences/CPreferenceKeys.h
===================================================================
--- Sources_Common/Application/Preferences/CPreferenceKeys.h	(revision 460)
+++ Sources_Common/Application/Preferences/CPreferenceKeys.h	(revision 493)
@@ -471,7 +471,8 @@
 		extern const char* c24HourTimeKey;				// New as of 4.0d1
 		extern const char* cHandleICSKey;				// New as of 4.0d1
 		extern const char* cAutomaticIMIPKey;			// New as of 4.0a5
-		extern const char* cAutomaticEDSTKey;			// New as of 4.0.8
+        extern const char* cAutomaticEDSTKey;			// New as of 4.0.8
+        extern const char* cShowUIDKey;                 // New as of 4.1a3
 		extern const char* cDefaultCalendarKey;			// New as of 4.0d1
 
 	extern const char* cAttachmentsSection;
Index: Sources_Common/Utilities/CUtils.h
===================================================================
--- Sources_Common/Utilities/CUtils.h	(revision 460)
+++ Sources_Common/Utilities/CUtils.h	(revision 493)
@@ -25,7 +25,9 @@
 #include "cdstring.h"
 
 cdstring GetVersionText(NumVersion vers);				// Get version as string
+cdstring GetVersionText(long vers);						// Get version as string
 short VersionTest(NumVersion vers1, long vers2);		// Check version number against long
+short VersionTest(long vers1, long vers2);				// Check version number against long
 
 unsigned long CRCCalculate(const char* text, unsigned long key);	// Calculate CRC code from text
 
Index: Sources_Common/Utilities/CUStringUtils.cp
===================================================================
--- Sources_Common/Utilities/CUStringUtils.cp	(revision 460)
+++ Sources_Common/Utilities/CUStringUtils.cp	(revision 493)
@@ -744,11 +744,17 @@
 
 	if (s1)
 		while(*s1)
-			*s1++ = unitolower(*s1);
+        {
+            unichar_t u = *s1;
+			*s1++ = unitolower(u);
+        }
 #else
 	if (s1--)
 		while(*++s1)
-			*s1 = unitolower(*s1);
+        {
+            unichar_t u = *s1;
+			*s1 = unitolower(u);
+        }
 #endif
 }
 
@@ -759,11 +765,17 @@
 
 	if (s1)
 		while(*s1)
-			*s1++ = unitoupper(*s1);
+        {
+            unichar_t u = *s1;
+			*s1++ = unitoupper(u);
+        }
 #else
 	if (s1--)
 		while(*++s1)
-			*s1 = unitoupper(*s1);
+        {
+            unichar_t u = *s1;
+			*s1 = unitoupper(u);
+        }
 #endif
 }
 
Index: Sources_Common/Utilities/cdstring.cp
===================================================================
--- Sources_Common/Utilities/cdstring.cp	(revision 460)
+++ Sources_Common/Utilities/cdstring.cp	(revision 493)
@@ -1983,7 +1983,6 @@
 								int len = utf8.w_2_c(wc, buf);
 								if (len)
 									sout.write(buf, len);
-								wc = 0;
 
 								// Now do entire wchar_t
 								wc = atom.base256[1];
@@ -2003,7 +2002,6 @@
 								int len = utf8.w_2_c(wc, buf);
 								if (len)
 									sout.write(buf, len);
-								wc = 0;
 
 								// Cache remaining HI part
 								wc = atom.base256[0];
@@ -2039,7 +2037,6 @@
 								int len = utf8.w_2_c(wc, buf);
 								if (len)
 									sout.write(buf, len);
-								wc = 0;
 							}
 							else
 								throw -1L;
@@ -2072,7 +2069,6 @@
 								int len = utf8.w_2_c(wc, buf);
 								if (len)
 									sout.write(buf, len);
-								wc = 0;
 							}
 							else
 							{
@@ -2082,7 +2078,6 @@
 								int len = utf8.w_2_c(wc, buf);
 								if (len)
 									sout.write(buf, len);
-								wc = 0;
 							}
 #endif
 							break;
@@ -2261,7 +2256,6 @@
 	const char* q = _str + length();
 	unsigned long charlen = 0;
 	wchar_t wc = 0;
-	bool found_euro = false;
 	while(p < q)
 	{
 		unsigned char mask = 0x3f;
@@ -2303,7 +2297,6 @@
 			{
 				// Use iso-8859-15 code for Euro
 				sout.put(0xA4);
-				found_euro = true;
 			}
 			else if (wc > 0x00FF)
 				sout.put('?');
@@ -2368,7 +2361,6 @@
 	const unsigned char* q = p + length();
 	unsigned long charlen = 0;
 	wchar_t wc = 0;
-	//bool found_euro = false;
 	while(p < q)
 	{
 		unsigned char mask = 0x3f;
Index: Plug-ins/include/nostl.mak
===================================================================
--- Plug-ins/include/nostl.mak	(revision 460)
+++ Plug-ins/include/nostl.mak	(revision 493)
@@ -13,12 +13,12 @@
 LINKER = ${CPP}
 CFLAGS = -Wall -Wno-multichar -Wno-unused -Wno-unknown-pragmas \
 	-g \
-	-include ../Common/Plugin_Prefix_Linux.h -D_REENTRANT ${CINCS}
+	-include ../Common/Plugin_Prefix_Linux.h -fPIC -D_REENTRANT ${CINCS}
 
 DEPENDFLAGS = ${CFLAGS}
 MAKEMAKE = makemake
 
-LDFLAGS := -shared
+LDFLAGS := -shared -fPIC
 
 ifeq (${OSTYPE},solaris)
 LOADLIBES := -nodefaultlibs -lc -lm -lgcc -lresolv
Index: Plug-ins/Common/CPluginDLL.h
===================================================================
--- Plug-ins/Common/CPluginDLL.h	(revision 460)
+++ Plug-ins/Common/CPluginDLL.h	(revision 493)
@@ -96,7 +96,7 @@
 	struct SPluginInfo
 	{
 		const char* mName;						// Name of plug-in
-		long mVersion;							// Version number of plugin (as per Mac OS 'vers' rsrc)
+		long  mVersion;							// Version number of plugin (as per Mac OS 'vers' rsrc)
 		EPluginType mType;						// Plug-in type
 		const char* mManufacturer;				// Manufacturer
 		const char* mDescription;				// Textual description
Index: Plug-ins/EudoraAdbkIO/sources/CEudoraAdbkIOPluginDLL.cp
===================================================================
--- Plug-ins/EudoraAdbkIO/sources/CEudoraAdbkIOPluginDLL.cp	(revision 460)
+++ Plug-ins/EudoraAdbkIO/sources/CEudoraAdbkIOPluginDLL.cp	(revision 493)
@@ -238,9 +238,6 @@
 			// Remove leading white space
 			while(*p == ' ') p++;
 			
-			// Set nick-name
-			adl = p;
-			
 			while(*p && (*p != ' ')) p++;
 			if (*p)
 				*p++ = '\0';
@@ -277,11 +274,8 @@
 	::fwrite(" ", 1, 1, mExportFile);
 
 	// Write user name
-	bool name = true;
 	if (addr->mName && *addr->mName)
 		AddressOut(addr->mName);
-	else
-		name = false;
 	
 	// Write email address
 	write = addr->mEmail;
@@ -381,7 +375,6 @@
 	char* p = s;
 	while(*p == ' ') p++;
 	char* q = s;
-	char* adl = nil;
 	bool more = true;
 	SAdbkIOPluginAddress* list = nil;
 	long list_num = 0;
@@ -394,7 +387,7 @@
 
 			case '"':
 				// Cache for adl
-				adl = p++;
+				p++;
 
 				// Find match and terminate and step over
 				while(*p)
@@ -495,7 +488,6 @@
 				q = p;
 
 				// Wipe name
-				adl = nil;
 				break;
 
 			default:
@@ -589,17 +581,14 @@
 			{
 				// Goto end of address and terminate
 				q += ::strcspn(q, WHITE_SPACE);
-				bool more = false;
 				bool finished = false;
 				if ((*q == '\r') || (*q == '\n'))
 				{
 					finished = true;
-					more = true;
 				}
 				else if (*q == '\0')
 				{
 					finished = true;
-					more = false;
 				}
 				*q = '\0';
 				addr->mEmail = p;
@@ -611,8 +600,6 @@
 					p = ::strgetbrastr(&q);
 
 					if (p) addr->mName = p;
-
-					more = (*q);
 				}
 
 				q++;
Index: Sources_Common/Mail/Network/CTLSSocket.cp
===================================================================
--- Sources_Common/Mail/Network/CTLSSocket.cp	(revision 460)
+++ Sources_Common/Mail/Network/CTLSSocket.cp	(revision 493)
@@ -27,7 +27,12 @@
 #include "CStringUtils.h"
 #include "CTCPException.h"
 
+#ifdef _OS_X_SECURITY
+#include "CAcceptCertDialog.h"
+#include "CTaskClasses.h"
+#else
 #include "openssl_.h"
+#endif
 
 #include <algorithm>
 
@@ -93,10 +98,14 @@
 {
 	mTLSOn = false;
 	mTLSType = 0;
+#ifdef _OS_X_SECURITY
 	m_ctx = NULL;
+#else
+	m_ctx = NULL;
 	m_tls = NULL;
 	mClientCert = NULL;
 	mClientPrivate = NULL;
+#endif
 }
 
 // Copy constructor
@@ -105,15 +114,22 @@
 {
 	mTLSOn = false;
 	mTLSType = 0;
+#ifdef _OS_X_SECURITY
 	m_ctx = NULL;
+#else
+	m_ctx = NULL;
 	m_tls = NULL;
 	mClientCert = NULL;
 	mClientPrivate = NULL;
+#endif
 }
 
 CTLSSocket::~CTLSSocket()
 {
+#ifdef _OS_X_SECURITY
 	m_ctx = NULL;
+#else
+	m_ctx = NULL;
 	m_tls = NULL;
 
 	if (mClientCert != NULL)
@@ -126,6 +142,7 @@
 		::EVP_PKEY_free(mClientPrivate);
 		mClientPrivate = NULL;
 	}
+#endif
 }
 
 void CTLSSocket::TCPClose()
@@ -133,8 +150,12 @@
 	// Inherited
 	CTCPSocket::TCPClose();
 
+	mTLSOn = false;
 	// Dispose of TLS specific items
-	mTLSOn = false;
+#ifdef _OS_X_SECURITY
+    ::SSLDisposeContext(m_ctx);
+    m_ctx = NULL;
+#else
 	if (m_tls != NULL)
 	{
 		::SSL_free(m_tls);
@@ -155,6 +176,7 @@
 		::EVP_PKEY_free(mClientPrivate);
 		mClientPrivate = NULL;
 	}
+#endif
 }
 
 
@@ -165,7 +187,11 @@
 void CTLSSocket::TLSSetTLSOn(bool tls_on, int tls_type)
 {
 	// Only allow this to be switched on if TLS is actually present
-	if (CPluginManager::sPluginManager.HasSSL())
+#ifdef _OS_X_SECURITY
+    mTLSOn = tls_on;
+    mTLSType = tls_type;
+#else
+    if (CPluginManager::sPluginManager.HasSSL())
 	{
 		mTLSOn = tls_on;
 		mTLSType = tls_type;
@@ -183,11 +209,16 @@
 		CLOG_LOGTHROW(CTCPException, CTCPException::err_TCPNoSSLPlugin);
 		throw CTCPException(CTCPException::err_TCPNoSSLPlugin);
 	}
+#endif
 }
 
 // Load and verify client cert data
 bool CTLSSocket::TLSSetClientCert(const cdstring& cert, const cdstring& passphrase)
 {
+#ifdef _OS_X_SECURITY
+    // TODO: SecureTransport::SSLSetCertificate
+    return true;
+#else
 	// Remove previous certs, if any
 	if (mClientCert != NULL)
 	{
@@ -222,6 +253,7 @@
 	}
 	else
 		return true;
+#endif
 }
 
 // C O N N E C T I O N S ____________________________________________________________________________
@@ -250,11 +282,22 @@
 		TLSStartConnection();
 }
 
+// End a connection with remote host
+void CTLSSocket::TCPCloseConnection()
+{
+	// Do SSL negotiation if switched on already
+	if (mTLSOn)
+		TLSCloseConnection();
+
+	// Do inherited
+	CTCPSocket::TCPCloseConnection();
+}
+
 // Receive data
 void CTLSSocket::TCPReceiveData(char* buf, long* len)
 {
 	// Look for existing TLS session
-	if (m_tls)
+	if (mTLSOn)
 		TLSReceiveData(buf, len);
 	else
 		CTCPSocket::TCPReceiveData(buf, len);
@@ -264,7 +307,7 @@
 void CTLSSocket::TCPSendData(char* buf, long len)
 {
 	// Look for existing TLS session
-	if (m_tls)
+	if (mTLSOn)
 		TLSSendData(buf, len);
 	else
 		CTCPSocket::TCPSendData(buf, len);
@@ -278,16 +321,157 @@
 	// Begin a busy operation
 	StMailBusy busy_lock(&mBusy, &GetBusyDescriptor());
 
+    // Clear out any cached data
+    mCertErrors.clear();
+    mCertSubject = cdstring::null_str;
+    mCertIssuer = cdstring::null_str;
+    mCipher = cdstring::null_str;
+    
+#ifdef _OS_X_SECURITY
+    OSStatus err = ::SSLNewContext(false, &m_ctx);
+    if (err != noErr)
+    {
+        CLOG_LOGTHROW(CTCPException, CTCPException::err_TCPSSLError);
+        throw CTCPException(CTCPException::err_TCPSSLError);
+    }
+    
+    //err = ::SSLSetProtocolVersion(m_ctx, kSSLProtocolAll);
+    switch(mTLSType)
+    {
+        case 1:
+        case 4:
+            err = ::SSLSetProtocolVersion(m_ctx, kSSLProtocol3);
+            break;
+        case 2:
+            err = ::SSLSetProtocolVersion(m_ctx, kSSLProtocol3Only);
+            break;
+        case 3:
+            err = ::SSLSetProtocolVersion(m_ctx, kTLSProtocol1Only);
+            break;
+    }
+    err = ::SSLSetSessionOption(m_ctx, kSSLSessionOptionBreakOnServerAuth, true);
+    err = ::SSLSetIOFuncs(m_ctx, TLSReadFunc, TLSWriteFunc);
+    if (err == noErr)
+    {
+        err = ::SSLSetConnection(m_ctx, this);
+    }
+    if (err != noErr)
+    {
+        ::SSLDisposeContext(m_ctx);
+        m_ctx = NULL;
+
+        CLOG_LOGTHROW(CTCPException, CTCPException::err_TCPSSLError);
+        throw CTCPException(CTCPException::err_TCPSSLError);
+    }
+    
+    while((err = ::SSLHandshake(m_ctx)) != noErr) {
+        if (err == errSSLWouldBlock) {
+            
+			// Yield while waiting to unblock
+			TCPSelectYield(true);
+        
+        } else if (err == errSSLServerAuthCompleted) {
+            
+            SecTrustRef trustRef;
+            err = ::SSLCopyPeerTrust(m_ctx, &trustRef);
+            if (err != noErr) {
+                ::SSLDisposeContext(m_ctx);
+                m_ctx = NULL;
+                
+                CLOG_LOGTHROW(CTCPException, CTCPException::err_TCPSSLCertError);
+                throw CTCPException(CTCPException::err_TCPSSLCertError);
+            }
+
+            SecTrustResultType resultType;
+            err = ::SecTrustEvaluate(trustRef, &resultType);
+            if (err != noErr) {
+                ::SSLDisposeContext(m_ctx);
+                m_ctx = NULL;
+                
+                CLOG_LOGTHROW(CTCPException, CTCPException::err_TCPSSLCertError);
+                throw CTCPException(CTCPException::err_TCPSSLCertError);
+            }
+
+            if ((resultType == kSecTrustResultConfirm) || (resultType == kSecTrustResultRecoverableTrustFailure)) {
+                CFArrayRef certs;
+                CSSM_TP_APPLE_EVIDENCE_INFO* statusChain;
+                ::SecTrustGetResult(trustRef, &resultType, &certs, &statusChain);
+                
+                SecCertificateRef certificate = (SecCertificateRef)::CFArrayGetValueAtIndex(certs, 0);
+
+                CSSM_TP_APPLE_CERT_STATUS AllStatusBits = statusChain[0].StatusBits;
+                if (AllStatusBits & CSSM_CERT_STATUS_EXPIRED) {
+                } else {
+                    
+                    //CCertificateManager::sCertificateManager->CertificateToString(server_cert, mCertText);
+                    
+                    CFErrorRef error;
+                    //CFStringRef subject = ::SecCertificateCopyShortDescription(NULL, certificate, &error);
+                    CFStringRef subject = ::SecCertificateCopySubjectSummary(certificate);
+                    mCertSubject = cdstring(subject);
+                    ::CFRelease(subject);
+
+                    cdstrvect errors;
+                    errors.push_back("Unknown");
+                    CAcceptCertTask* task = new CAcceptCertTask(mCertSubject, errors);
+                    int result = task->Go();
+                    if (result == CAcceptCertDialog::eAcceptSave) {
+                        // Confirm with user then continue
+                        resultType = kSecTrustResultProceed;
+                        err = ::SecCertificateAddToKeychain(certificate, NULL);
+                        if (err != noErr) {
+                            
+                        }
+                    } else if (result == CAcceptCertDialog::eAcceptOnce) {
+                        // Confirm with user then continue
+                        resultType = kSecTrustResultProceed;
+                    } else {
+                        resultType = kSecTrustResultFatalTrustFailure;
+                    }
+                }
+            }
+            ::CFRelease(trustRef);
+
+            if ((resultType == kSecTrustResultProceed) || (resultType == kSecTrustResultUnspecified)) {
+                // OK to continue
+                CFArrayRef certs;
+                ::SSLCopyPeerCertificates(m_ctx, &certs);
+                SecCertificateRef certificate = (SecCertificateRef)::CFArrayGetValueAtIndex(certs, 0);
+
+                //CCertificateManager::sCertificateManager->CertificateToString(server_cert, mCertText);
+                
+                CFStringRef subject = ::SecCertificateCopySubjectSummary(certificate);
+                mCertSubject = cdstring(subject);
+                ::CFRelease(subject);
+                
+//                const CSSM_X509_NAME* issuer = NULL;
+//                ::SecCertificateGetIssuer(certificate, &issuer);
+//                str = ::X509_NAME_oneline(X509_get_issuer_name(server_cert), x509_buf, BUFSIZ);
+//                if (!str)
+//                {
+//                    CLOG_LOGTHROW(CTCPException, CTCPException::err_TCPSSLCertError);
+//                    throw CTCPException(CTCPException::err_TCPSSLCertError);
+//                }
+//                mCertIssuer = str;
+                ::CFRelease(certs);
+            } else {
+                CLOG_LOGTHROW(CTCPException, CTCPException::err_TCPSSLCertError);
+                throw CTCPException(CTCPException::err_TCPSSLCertError);
+            }
+        } else {
+            ::SSLDisposeContext(m_ctx);
+            m_ctx = NULL;
+            
+            CLOG_LOGTHROW(CTCPException, CTCPException::err_TCPSSLError);
+            throw CTCPException(CTCPException::err_TCPSSLError);
+        }
+    }
+    
+#else
 	X509* server_cert = NULL;
 
 	try
 	{
-		// Clear out any cached data
-		mCertErrors.clear();
-		mCertSubject = cdstring::null_str;
-		mCertIssuer = cdstring::null_str;
-		mCipher = cdstring::null_str;
-
 		// Create context
 		switch(mTLSType)
 		{
@@ -415,8 +599,13 @@
 		mCertIssuer = str;
 
 		// Get cipher in use
+#if (OPENSSL_VERSION_NUMBER | 0xFF00000000) == 0x10000000
+		const SSL_CIPHER* cipher = ::SSL_get_current_cipher(m_tls);
+#else
 		SSL_CIPHER* cipher = ::SSL_get_current_cipher(m_tls);
-		
+        
+#endif
+        
 		char cipher_desc[256];
 		::SSL_CIPHER_description(cipher, cipher_desc, 256);
 		mCipher = cipher_desc;
@@ -459,8 +648,54 @@
 		CLOG_LOGRETHROW;
 		throw;
 	}
+#endif
 }
 
+// Initiate a connection with remote host
+void CTLSSocket::TLSCloseConnection()
+{
+#ifdef _OS_X_SECURITY
+    ::SSLClose(m_ctx);
+#endif
+    
+}
+
+#ifdef _OS_X_SECURITY
+OSStatus CTLSSocket::TLSReadFunc(SSLConnectionRef ref, void* data, size_t* len)
+{
+    CTLSSocket* skt = const_cast<CTLSSocket*>(reinterpret_cast<const CTLSSocket*>(ref));
+    long lenread = *len;
+    try {
+        if (skt->CTCPSocket::_ReceiveData((char*)data, &lenread)) {
+            if (lenread == *len) {
+                *len = lenread;
+                return noErr;
+            } else {
+                *len = lenread;
+                return errSSLWouldBlock;
+            }
+        } else {
+            *len = 0;
+            return errSSLWouldBlock;
+        }
+    } catch (CTCPException& ex) {
+        return ex.error();
+    }
+    return noErr;
+}
+
+OSStatus CTLSSocket::TLSWriteFunc(SSLConnectionRef ref, const void* data, size_t* len)
+{
+    CTLSSocket* skt = const_cast<CTLSSocket*>(reinterpret_cast<const CTLSSocket*>(ref));
+    try {
+        skt->CTCPSocket::_SendData((char*)(data), *len);
+    } catch (CTCPException& ex) {
+        return ex.error();
+    }
+    return noErr;
+}
+#endif
+
 // Receive data
 void CTLSSocket::TLSReceiveData(char* buf, long* len)
 {
@@ -470,6 +705,46 @@
 	// Yield before to get any user abort
 	TCPYield();
 
+#ifdef _OS_X_SECURITY
+    size_t read = 0;
+    OSStatus err;
+    while((err = ::SSLRead(m_ctx, buf, *len, &read)) != noErr) {
+        if (err == errSSLWouldBlock) {
+
+			// Partial read OK
+            if (read != 0)
+                break;
+
+            // Select yield while waiting to unblock
+            TCPSelectYield(true);
+
+        } else if ((err == errSSLClosedGraceful) || (err == errSSLClosedNoNotify)) {
+
+            TCPAbort(true);
+            
+            err = ECONNRESET;
+            
+            TCPHandleError(err);
+            
+            // Got an error => throw
+            CLOG_LOGTHROW(CTCPException, err);
+            throw CTCPException(err);
+
+        } else {
+
+            TCPAbort(true);
+            
+            TCPHandleError(err);
+            
+            // Throw error
+            CLOG_LOGTHROW(CTCPException, err);
+            throw CTCPException(err);
+            
+        }
+    }
+    
+    *len = read;
+#else
 	// Get any data present at the moment
 	int result;
 	while((result = ::SSL_read(m_tls, buf, *len)) == SOCKET_ERROR)
@@ -514,6 +789,7 @@
 	}
 
 	*len = result;
+#endif
 
 	// Reset tickle timer
 	TimerReset();
@@ -528,10 +804,40 @@
 	// Yield before to get any user abort
 	TCPYield();
 
+#ifdef _OS_X_SECURITY
 	// Send data in blocks of buffer size
 	char* p = buf;
 	while(len)
 	{
+        size_t written = 0;
+        OSStatus err = ::SSLWrite(m_ctx, p, len, &written);
+        if (err == noErr)
+        {
+			// Adjust buffer
+			len -= written;
+			p += written;
+            
+        } else if (err == errSSLWouldBlock) {
+
+            // Yield while waiting to unblock
+            TCPSelectYield(false);
+            
+        } else {
+            TCPAbort(true);
+            
+            TCPHandleError(err);
+            
+            // Throw error
+            CLOG_LOGTHROW(CTCPException, err);
+            throw CTCPException(err);
+            
+        }
+    }
+#else
+	// Send data in blocks of buffer size
+	char* p = buf;
+	while(len)
+	{
 		int result = ::SSL_write(m_tls, p, len);
 
 		// Check for failure
@@ -568,6 +874,7 @@
 			p += result;
 		}
 	}
+#endif
 
 	// Reset tickle timer
 	TimerReset();
Index: Sources_Common/Mail/Network/CTCPSocket.h
===================================================================
--- Sources_Common/Mail/Network/CTCPSocket.h	(revision 460)
+++ Sources_Common/Mail/Network/CTCPSocket.h	(revision 493)
@@ -151,7 +151,7 @@
 	virtual void TCPSetAsyncHandle(HANDLE hdl)							// Set HANDLE associated with async operation
 		{ mAsyncHandle = hdl; }
 	virtual void TCPAsyncDone(long err);								// Async operation complete
-	virtual void TCPAsyncBlock(unsigned long secs = 0xFFFFFFFF);		// Block until async op completes or user cancels or timeout
+	virtual void TCPAsyncBlock(unsigned long secs = -1);		// Block until async op completes or user cancels or timeout
 #endif
 
 	// Connections
@@ -218,9 +218,12 @@
 
 			void TCPCreateSocket();
 
+    virtual bool _ReceiveData(char* buf, long* len);			// Receive some data directly
+	virtual long _SendData(char* buf, long len);				// Send data
+
 			// Yielding
 			void TCPYield();
-			void TCPSelectYield(bool read, unsigned long secs = 0xFFFFFFFF);
+			void TCPSelectYield(bool read, unsigned long secs = -1);
 
 			// Errors
 			void TCPForceAbort();
Index: Sources_Common/os_dep.h
===================================================================
--- Sources_Common/os_dep.h	(revision 460)
+++ Sources_Common/os_dep.h	(revision 493)
@@ -43,6 +43,8 @@
 #   define big_endian
 #  elif defined(__i386__)
 #   undef big_endian
+#  elif defined(__x86_64__)
+#   undef big_endian
 #  else
 #   error unknown endian
 #  endif
Index: Sources_Common/Application/Preferences/CPreferenceKeys.cp
===================================================================
--- Sources_Common/Application/Preferences/CPreferenceKeys.cp	(revision 460)
+++ Sources_Common/Application/Preferences/CPreferenceKeys.cp	(revision 493)
@@ -490,7 +490,8 @@
 		const char* c24HourTimeKey = "Twenty-Four Hour Time";					// New as of 4.0d1
 		const char* cHandleICSKey = "Handle ICS";								// New as of 4.0d1
 		const char* cAutomaticIMIPKey = "Automatic iMIP";						// New as of 4.0a5
-		const char* cAutomaticEDSTKey = "Automatic EDST";						// New as of 4.0.8
+        const char* cAutomaticEDSTKey = "Automatic EDST";						// New as of 4.0.8
+        const char* cShowUIDKey = "Show UID";                                   // New as of 4.1a3
 		const char* cDefaultCalendarKey = "Default Calendar";					// New as of 4.0d1
 
 	const char* cAttachmentsSection = "Attachments";
Index: Sources_Common/Application/Preferences/CPreferences.cp
===================================================================
--- Sources_Common/Application/Preferences/CPreferences.cp	(revision 460)
+++ Sources_Common/Application/Preferences/CPreferences.cp	(revision 493)
@@ -983,6 +983,8 @@
 #elif __dest_os == __linux_os
 #if defined(__i386__)
 const char cHDR_UACOMMENT_CPU[] = "x86";
+#elif defined(__x86_64__)
+const char cHDR_UACOMMENT_CPU[] = "x86_64";
 #elif defined(sparc)
 const char cHDR_UACOMMENT_CPU[] = "SPARC";
 #elif defined(__PPC__)
Index: Sources_Common/Utilities/encrypt.cp
===================================================================
--- Sources_Common/Utilities/encrypt.cp	(revision 460)
+++ Sources_Common/Utilities/encrypt.cp	(revision 493)
@@ -32,7 +32,10 @@
 {
 	unsigned char* p = value;
 	while(*p)
-		*p++ = ((*p >> 4) & 0x0F) | ((*p << 4) & 0xF0);
+    {
+        unsigned char c = *p;
+		*p++ = ((c >> 4) & 0x0F) | ((c << 4) & 0xF0);
+    }
 }
 
 void encrypt_simple(char* value)
@@ -60,10 +63,11 @@
 	size_t kklen = klen;
 	while(vlen--)
 	{
+        unsigned char c = *value;
 		if (encrypt)
-			*value++ = *value + *q;
+			*value++ = c + *q;
 		else
-			*value++ = *value - *q;
+			*value++ = c - *q;
 
 		// Bump key
 		q++;
Index: Sources_Common/Utilities/CUtils.cp
===================================================================
--- Sources_Common/Utilities/CUtils.cp	(revision 460)
+++ Sources_Common/Utilities/CUtils.cp	(revision 493)
@@ -23,6 +23,17 @@
 #include <string.h>
 
 // Check version number against long
+short VersionTest(long vers1, long vers2)
+{
+	if (vers1 > vers2)
+		return 1;
+	else if (vers1 < vers2)
+		return -1;
+	else
+		return 0;
+}
+
+// Check version number against long
 short VersionTest(NumVersion vers1, long vers2)
 {
 	unsigned char value;
@@ -58,7 +69,20 @@
 	return 0;
 }
 
+
 // Get version as string
+cdstring GetVersionText(long vers)
+{
+	NumVersion nvers;
+	nvers.majorRev = (vers >> 24) & 0x000000FF;
+	nvers.minorAndBugRev = (vers >> 16) & 0x000000FF;
+	nvers.stage = (vers >> 8) & 0x000000FF;
+	nvers.nonRelRev = (vers) & 0x000000FF;
+	return GetVersionText(nvers);
+}
+
+
+// Get version as string
 cdstring GetVersionText(NumVersion vers)
 {
 	char txt[256];
Index: Sources_Common/Utilities/cdustring.cp
===================================================================
--- Sources_Common/Utilities/cdustring.cp	(revision 460)
+++ Sources_Common/Utilities/cdustring.cp	(revision 493)
@@ -356,7 +356,6 @@
 			{
 				// Ignore LF after CR
 				c1 = is.rdbuf ()->sbumpc();
-				have_c1 = true;
 				if ((c1 == 0) && (is.rdbuf ()->sgetc() == '\n'))
 					is.rdbuf ()->sbumpc ();
 				break;
Index: Plug-ins/PluginLibrary/Make.header
===================================================================
--- Plug-ins/PluginLibrary/Make.header	(revision 460)
+++ Plug-ins/PluginLibrary/Make.header	(revision 493)
@@ -42,4 +42,4 @@
 	 $(CPP) $(CFLAGS) -c -o $@ $<
 
 ${BIN}/md5c.o: ../CRAM-MD5/sources/md5/md5c.c ../CRAM-MD5/sources/md5/md5.h
-	 $(CC) -c -o $@ $<
+	 $(CC) -c -fPIC -o $@ $<
Index: Plug-ins/GSSAPI/sources/CGSSAPIPluginDLL.cp
===================================================================
--- Plug-ins/GSSAPI/sources/CGSSAPIPluginDLL.cp	(revision 460)
+++ Plug-ins/GSSAPI/sources/CGSSAPIPluginDLL.cp	(revision 493)
@@ -290,7 +290,6 @@
 		}
 		
 		// Add IP address
-		size_t start_caps = ::strlen(actual_principal);
 		if (*mServer)
 			::strcat(actual_principal, mServer);
 		else
@@ -310,9 +309,9 @@
 		DisplayError(info, maj_stat, min_stat, __FILE__, __LINE__);
 	
 #if __dest_os == __mac_os
-	KLStatus kerr = ::KLAcquireTickets(NULL, NULL, NULL);
+	::KLAcquireTickets(NULL, NULL, NULL);
 #elif __dest_os == __mac_os_x
-	KLStatus kerr = ::KLAcquireInitialTickets(NULL, 0, NULL, NULL);
+	::KLAcquireInitialTickets(NULL, 0, NULL, NULL);
 #endif
 
 	return (maj_stat == GSS_S_COMPLETE);
@@ -322,25 +321,23 @@
 void CGSSAPIPluginDLL::CleanContext()
 {
 	// Clean up
-	OM_uint32 maj_stat;
 	OM_uint32 min_stat;
 
 	if (mGSSAPI_Context != GSS_C_NO_CONTEXT)
-		maj_stat = ::gss_delete_sec_context(&min_stat, &mGSSAPI_Context, GSS_C_NO_BUFFER);
+		::gss_delete_sec_context(&min_stat, &mGSSAPI_Context, GSS_C_NO_BUFFER);
 	mGSSAPI_Context = GSS_C_NO_CONTEXT;
 
 	if (mGSSAPI_ServerName != GSS_C_NO_NAME)
-		maj_stat = ::gss_release_name(&min_stat, &mGSSAPI_ServerName);
+		::gss_release_name(&min_stat, &mGSSAPI_ServerName);
 	mGSSAPI_ServerName = GSS_C_NO_NAME;
 }
 
 void CGSSAPIPluginDLL::DisplayError(SAuthPluginData* info, OM_uint32 maj_status, OM_uint32 min_status, const char* file, int line)
 {
-	OM_uint32 maj_stat;
 	OM_uint32 min_stat;
 	OM_uint32 mctx = 0;
 	gss_buffer_desc string_token;
-	maj_stat = ::gss_display_status(&min_stat, min_status, GSS_C_MECH_CODE,
+	::gss_display_status(&min_stat, min_status, GSS_C_MECH_CODE,
 										GSS_C_NULL_OID, &mctx, &string_token);
 
 	const char* err_title = "GSSAPI Plugin Error: ";
@@ -360,7 +357,7 @@
 	else
 		::strcpy(info->data, err_title);
 
-	maj_stat = ::gss_release_buffer(&min_stat, &string_token);
+	::gss_release_buffer(&min_stat, &string_token);
 
   	mState = eError;
 }
Index: Plug-ins/Common/CAdbkIOPluginDLL.cp
===================================================================
--- Plug-ins/Common/CAdbkIOPluginDLL.cp	(revision 460)
+++ Plug-ins/Common/CAdbkIOPluginDLL.cp	(revision 493)
@@ -127,7 +127,7 @@
 		data[fileLength] = 0;
 
 		// Do import
-		result = ImportAddresses(data);
+		ImportAddresses(data);
 		
 		// Finish with handle
 		::free(data);
Index: Plug-ins/Kerberos/Kerberos.xcodeproj
===================================================================
--- Plug-ins/Kerberos/Kerberos.xcodeproj	(revision 460)
+++ Plug-ins/Kerberos/Kerberos.xcodeproj	(revision 493)

Property changes on: Plug-ins/Kerberos/Kerberos.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 *.mode*
 *.pbxuser
+xcuserdata
Index: Plug-ins/EudoraAdbkIO/EudoraAdbkIO.xcodeproj/project.pbxproj
===================================================================
--- Plug-ins/EudoraAdbkIO/EudoraAdbkIO.xcodeproj/project.pbxproj	(revision 460)
+++ Plug-ins/EudoraAdbkIO/EudoraAdbkIO.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -121,8 +121,11 @@
 /* Begin PBXProject section */
 		AF419A8F0AE9ABB600E19592 /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = AF419A900AE9ABB600E19592 /* Build configuration list for PBXProject "EudoraAdbkIO" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 0;
 			knownRegions = (
@@ -181,10 +184,9 @@
 		AF419A910AE9ABB600E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
+				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
+				SDKROOT = macosx10.6;
 			};
 			name = Debug;
 		};
@@ -191,28 +193,9 @@
 		AF419A9D0AE9ABB700E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = NO;
-				ARCHS = (
-					ppc,
-					i386,
-				);
-				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
-				GCC_ALTIVEC_EXTENSIONS = NO;
-				GCC_CHAR_IS_UNSIGNED_CHAR = NO;
-				GCC_C_LANGUAGE_STANDARD = c99;
-				GCC_ENABLE_CPP_RTTI = NO;
-				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
-				GCC_INPUT_FILETYPE = sourcecode.cpp.cpp;
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_PREFIX_HEADER = ../Common/Plugin_Prefix_MacOSXcode.h;
-				GCC_REUSE_STRINGS = YES;
-				GCC_SHORT_ENUMS = NO;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
-				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = NO;
-				GCC_WARN_UNKNOWN_PRAGMAS = YES;
-				GCC_WARN_UNUSED_PARAMETER = NO;
-				GCC_WARN_UNUSED_VARIABLE = NO;
 				INFOPLIST_FILE = ../Common/Info.plst;
 				INFOPLIST_OTHER_PREPROCESSOR_FLAGS = "-include sources/Info.plst.def -include ../Common/InfoCommon.plst.def";
 				INFOPLIST_PREPROCESS = YES;
@@ -221,10 +204,7 @@
 					"-multiply_defined",
 					warning,
 				);
-				PREBINDING = YES;
 				PRODUCT_NAME = EudoraAdbkIO;
-				REZ_SCRIPT_TYPE = Roman;
-				REZ_SUPPRESS_REDECLARED_RESOURCE_TYPE_WARNINGS = NO;
 				STRIP_INSTALLED_PRODUCT = NO;
 				WRAPPER_EXTENSION = bundle;
 			};
Index: Plug-ins/DIGEST-MD5/sources/CDIGESTMD5PluginDLL.cp
===================================================================
--- Plug-ins/DIGEST-MD5/sources/CDIGESTMD5PluginDLL.cp	(revision 460)
+++ Plug-ins/DIGEST-MD5/sources/CDIGESTMD5PluginDLL.cp	(revision 493)
@@ -800,8 +800,6 @@
 			if (::strncmpnocase(p, " (SASL ", 7) == 0)
 			{
 				// Now check respauth
-				p += 7;
-				
 				mState = eDone;
 				return eAuthDone;
 			}
Index: Plug-ins/CRAM-MD5/sources/md5/md5.h
===================================================================
--- Plug-ins/CRAM-MD5/sources/md5/md5.h	(revision 460)
+++ Plug-ins/CRAM-MD5/sources/md5/md5.h	(revision 493)
@@ -45,6 +45,7 @@
  */
 
 
+#include <stdint.h>
 
 #ifndef MD5_H
 
@@ -64,20 +65,12 @@
 
 #ifndef UINT4
 
-#ifdef __alpha
+#define UINT4 uint32_t
 
-#define UINT4 unsigned int
-
-#else
-
-#define UINT4 unsigned long int
-
 #endif
 
-#endif
 
 
-
 /* MD5 context. */
 
 typedef struct {
Index: Plug-ins/vCardAdbkIO/sources/CVCardAdbkIOPluginDLL.cp
===================================================================
--- Plug-ins/vCardAdbkIO/sources/CVCardAdbkIOPluginDLL.cp	(revision 460)
+++ Plug-ins/vCardAdbkIO/sources/CVCardAdbkIOPluginDLL.cp	(revision 493)
@@ -205,7 +205,7 @@
 		}
 
 		// Do import
-		result = ImportAddresses((char*)data);
+		ImportAddresses((char*)data);
 		
 		// Finish with handle
 		::free(data);
Index: Plug-ins/QuickmailProAdbkIO/sources/CQuickmailProAdbkIOPluginDLL.cp
===================================================================
--- Plug-ins/QuickmailProAdbkIO/sources/CQuickmailProAdbkIOPluginDLL.cp	(revision 460)
+++ Plug-ins/QuickmailProAdbkIO/sources/CQuickmailProAdbkIOPluginDLL.cp	(revision 493)
@@ -154,11 +154,11 @@
 
 		// Last name will be at start
 		last_name = p;
-		char q = SkipTerm(&p);
+		SkipTerm(&p);
 		
 		// First name will be next
 		first_name = p;
-		q = SkipTerm(&p);
+		SkipTerm(&p);
 		
 		// Create whole name
 		::strcpy(whole_name, first_name);
@@ -167,7 +167,7 @@
 
 		// Email will be next
 		eaddr = p;
-		q = SkipTerm(&p);
+		char q = SkipTerm(&p);
 
 		// Create empty address
 		CAdbkIOPluginAddress addr;
Index: Plug-ins/SSL/SSL.xcodeproj/project.pbxproj
===================================================================
--- Plug-ins/SSL/SSL.xcodeproj/project.pbxproj	(revision 460)
+++ Plug-ins/SSL/SSL.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -117,8 +117,11 @@
 /* Begin PBXProject section */
 		AF419C7B0AEA6B9D00E19592 /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = AF419C7C0AEA6B9D00E19592 /* Build configuration list for PBXProject "SSL" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 0;
 			knownRegions = (
@@ -172,10 +175,9 @@
 		AF419C7D0AEA6B9D00E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
+				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
+				SDKROOT = macosx10.6;
 			};
 			name = Debug;
 		};
@@ -182,28 +184,11 @@
 		AF419C890AEA6B9E00E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = NO;
-				ARCHS = (
-					ppc,
-					i386,
-				);
 				DEAD_CODE_STRIPPING = YES;
-				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
-				GCC_ALTIVEC_EXTENSIONS = NO;
-				GCC_CHAR_IS_UNSIGNED_CHAR = NO;
-				GCC_ENABLE_CPP_RTTI = NO;
-				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
 				GCC_INLINES_ARE_PRIVATE_EXTERN = YES;
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_PREFIX_HEADER = ../Common/Plugin_Prefix_MacOSXcode.h;
-				GCC_REUSE_STRINGS = NO;
-				GCC_SHORT_ENUMS = NO;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
-				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = NO;
-				GCC_WARN_UNKNOWN_PRAGMAS = YES;
-				GCC_WARN_UNUSED_PARAMETER = NO;
-				GCC_WARN_UNUSED_VARIABLE = NO;
 				INFOPLIST_FILE = ../Common/Info.plst;
 				INFOPLIST_OTHER_PREPROCESSOR_FLAGS = "-include sources/Info.plst.def -include ../Common/InfoCommon.plst.def";
 				INFOPLIST_PREPROCESS = YES;
@@ -212,10 +197,7 @@
 					"-multiply_defined",
 					warning,
 				);
-				PREBINDING = YES;
 				PRODUCT_NAME = SSL;
-				REZ_SCRIPT_TYPE = Roman;
-				REZ_SUPPRESS_REDECLARED_RESOURCE_TYPE_WARNINGS = NO;
 				STRIP_INSTALLED_PRODUCT = NO;
 				WRAPPER_EXTENSION = bundle;
 			};
Index: Plug-ins/CRAM-MD5/CRAM-MD5.xcodeproj/project.pbxproj
===================================================================
--- Plug-ins/CRAM-MD5/CRAM-MD5.xcodeproj/project.pbxproj	(revision 460)
+++ Plug-ins/CRAM-MD5/CRAM-MD5.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -144,8 +144,11 @@
 /* Begin PBXProject section */
 		AFBD95C70AD9CA0700DD4C86 /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = AFBD95C80AD9CA0700DD4C86 /* Build configuration list for PBXProject "CRAM-MD5" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 0;
 			knownRegions = (
@@ -207,12 +210,10 @@
 		AFBD95C90AD9CA0700DD4C86 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
 				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
 				MACH_O_TYPE = mh_bundle;
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				SDKROOT = macosx10.6;
 			};
 			name = Debug;
 		};
@@ -219,22 +220,9 @@
 		AFBD95D50AD9CA0800DD4C86 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = NO;
-				GCC_ALTIVEC_EXTENSIONS = NO;
-				GCC_CHAR_IS_UNSIGNED_CHAR = NO;
-				GCC_C_LANGUAGE_STANDARD = c99;
-				GCC_ENABLE_CPP_RTTI = NO;
-				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_PREFIX_HEADER = ../Common/Plugin_Prefix_MacOSXcode.h;
-				GCC_REUSE_STRINGS = YES;
-				GCC_SHORT_ENUMS = NO;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
-				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = NO;
-				GCC_WARN_UNKNOWN_PRAGMAS = YES;
-				GCC_WARN_UNUSED_PARAMETER = NO;
-				GCC_WARN_UNUSED_VARIABLE = NO;
 				INFOPLIST_FILE = ../Common/Info.plst;
 				INFOPLIST_OTHER_PREPROCESSOR_FLAGS = "-include sources/Info.plst.def -include ../Common/InfoCommon.plst.def";
 				INFOPLIST_PREPROCESS = YES;
@@ -243,10 +231,7 @@
 					"-multiply_defined",
 					warning,
 				);
-				PREBINDING = YES;
 				PRODUCT_NAME = "CRAM-MD5";
-				REZ_SCRIPT_TYPE = Roman;
-				REZ_SUPPRESS_REDECLARED_RESOURCE_TYPE_WARNINGS = NO;
 				STRIP_INSTALLED_PRODUCT = NO;
 				WRAPPER_EXTENSION = bundle;
 			};
Index: Plug-ins/PineAdbkIO/sources/CPineAdbkIOPluginDLL.cp
===================================================================
--- Plug-ins/PineAdbkIO/sources/CPineAdbkIOPluginDLL.cp	(revision 460)
+++ Plug-ins/PineAdbkIO/sources/CPineAdbkIOPluginDLL.cp	(revision 493)
@@ -174,17 +174,17 @@
 
 		// ADL will be at start
 		adl = p;
-		char q = SkipTerm(&p);
+		SkipTerm(&p);
 		
 		// Name will be next
 		name = p;
-		q = SkipTerm(&p);
+		SkipTerm(&p);
 
 		while(*p == ' ') p++;
 
 		// Get email address, addresses ot group
 		eaddr = p;
-		q = SkipTerm(&p);
+		char q = SkipTerm(&p);
 
 		// Now decide on group (inside '(...)' or comma separated)
 		if ((*eaddr == '(') || ::strchr(eaddr, ','))
Index: Plug-ins/CommunicatorAdbkIO/CommunicatorAdbkIO.xcodeproj/project.pbxproj
===================================================================
--- Plug-ins/CommunicatorAdbkIO/CommunicatorAdbkIO.xcodeproj/project.pbxproj	(revision 460)
+++ Plug-ins/CommunicatorAdbkIO/CommunicatorAdbkIO.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -12,8 +12,8 @@
 		AF0F2E9F0AE3C9960074CFEF /* CAdbkIOPluginDLL.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF0F2E950AE3C9960074CFEF /* CAdbkIOPluginDLL.cp */; };
 		AF0F2EA10AE3C9960074CFEF /* CCommAdbkIOPluginDLL.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF0F2E970AE3C9960074CFEF /* CCommAdbkIOPluginDLL.cp */; };
 		AF657377136CA9B70088690F /* Carbon.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = AF657376136CA9B70088690F /* Carbon.framework */; };
-		AF9BC8FC13D5D71800240750 /* libPluginLibrary.a in Frameworks */ = {isa = PBXBuildFile; fileRef = AF9BC8FB13D5D71800240750 /* libPluginLibrary.a */; };
 		AFDD74210C403EDC00DE5877 /* line64mac.c in Sources */ = {isa = PBXBuildFile; fileRef = AFDD74200C403EDB00DE5877 /* line64mac.c */; };
+		AFECC926176E0F09006354FB /* libPluginLibrary.a in Frameworks */ = {isa = PBXBuildFile; fileRef = AFECC925176E0F09006354FB /* libPluginLibrary.a */; };
 /* End PBXBuildFile section */
 
 /* Begin PBXFileReference section */
@@ -33,8 +33,8 @@
 		AF0F2EB20AE3C99A0074CFEF /* CCharsetCodes.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; name = CCharsetCodes.h; path = ../../Sources_Common/i18n/Charsets/CCharsetCodes.h; sourceTree = SOURCE_ROOT; };
 		AF419C540AEA6A1A00E19592 /* ldif.h */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.c.h; name = ldif.h; path = sources/ldif.h; sourceTree = "<group>"; };
 		AF657376136CA9B70088690F /* Carbon.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = Carbon.framework; path = System/Library/Frameworks/Carbon.framework; sourceTree = SDKROOT; };
-		AF9BC8FB13D5D71800240750 /* libPluginLibrary.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; name = libPluginLibrary.a; path = ../PluginLibrary/build/Debug/libPluginLibrary.a; sourceTree = SOURCE_ROOT; };
 		AFDD74200C403EDB00DE5877 /* line64mac.c */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.c.c; name = line64mac.c; path = sources/line64mac.c; sourceTree = "<group>"; };
+		AFECC925176E0F09006354FB /* libPluginLibrary.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; name = libPluginLibrary.a; path = ../PluginLibrary/build/Debug/libPluginLibrary.a; sourceTree = "<group>"; };
 /* End PBXFileReference section */
 
 /* Begin PBXFrameworksBuildPhase section */
@@ -42,7 +42,7 @@
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
-				AF9BC8FC13D5D71800240750 /* libPluginLibrary.a in Frameworks */,
+				AFECC926176E0F09006354FB /* libPluginLibrary.a in Frameworks */,
 				AF657377136CA9B70088690F /* Carbon.framework in Frameworks */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
@@ -108,7 +108,7 @@
 		AF0F2ED00AE3C99C0074CFEF /* Frameworks */ = {
 			isa = PBXGroup;
 			children = (
-				AF9BC8FB13D5D71800240750 /* libPluginLibrary.a */,
+				AFECC925176E0F09006354FB /* libPluginLibrary.a */,
 				AF657376136CA9B70088690F /* Carbon.framework */,
 			);
 			name = Frameworks;
@@ -140,8 +140,11 @@
 /* Begin PBXProject section */
 		AF0F2E800AE3C9950074CFEF /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = AF0F2E810AE3C9950074CFEF /* Build configuration list for PBXProject "CommunicatorAdbkIO" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 0;
 			knownRegions = (
@@ -199,11 +202,11 @@
 		AF0F2E820AE3C9950074CFEF /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
+				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
+				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
 				MACH_O_TYPE = mh_bundle;
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				SDKROOT = macosx10.6;
 			};
 			name = Debug;
 		};
@@ -211,25 +214,8 @@
 			isa = XCBuildConfiguration;
 			buildSettings = {
 				ALWAYS_SEARCH_USER_PATHS = NO;
-				ARCHS = (
-					ppc,
-					i386,
-				);
-				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
-				FRAMEWORK_SEARCH_PATHS = "";
-				FRAMEWORK_SEARCH_PATHS_QUOTED_1 = "\"$(SYSTEM_DEVELOPER_DIR)/SDKs/MacOSX10.4u.sdk/System/Library/Frameworks\"";
-				FRAMEWORK_SEARCH_PATHS_QUOTED_2 = "\"$(SYSTEM_DEVELOPER_DIR)/SDKs/MacOSX10.4u.sdk/System/Library/Frameworks\"";
-				FRAMEWORK_SEARCH_PATHS_QUOTED_3 = "\"$(SYSTEM_DEVELOPER_DIR)/SDKs/MacOSX10.4u.sdk/System/Library/Frameworks\"";
-				GCC_ALTIVEC_EXTENSIONS = NO;
-				GCC_CHAR_IS_UNSIGNED_CHAR = NO;
-				GCC_C_LANGUAGE_STANDARD = c99;
-				GCC_ENABLE_CPP_RTTI = NO;
-				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_PREFIX_HEADER = ../Common/Plugin_Prefix_MacOSXcode.h;
-				GCC_REUSE_STRINGS = YES;
-				GCC_SHORT_ENUMS = NO;
-				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
 				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
 				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = NO;
 				GCC_WARN_UNKNOWN_PRAGMAS = YES;
@@ -236,7 +222,6 @@
 				GCC_WARN_UNUSED_PARAMETER = NO;
 				GCC_WARN_UNUSED_VARIABLE = NO;
 				GENERATE_PKGINFO_FILE = NO;
-				HEADER_SEARCH_PATHS = "";
 				INFOPLIST_FILE = ../Common/Info.plst;
 				INFOPLIST_OTHER_PREPROCESSOR_FLAGS = "-include sources/Info.plst.def -include ../Common/InfoCommon.plst.def";
 				INFOPLIST_PREFIX_HEADER = "";
@@ -244,20 +229,14 @@
 				INFOPLIST_PREPROCESSOR_DEFINITIONS = "";
 				LIBRARY_SEARCH_PATHS = (
 					"$(inherited)",
-					"$(LIBRARY_SEARCH_PATHS_QUOTED_1)",
-					"$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1)",
+					"$(SRCROOT)/../PluginLibrary/build/Debug",
 				);
-				LIBRARY_SEARCH_PATHS_QUOTED_1 = "\"$(SRCROOT)/../PluginLibrary\"";
-				LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = "\"$(SRCROOT)/../PluginLibrary/build/Debug\"";
 				OTHER_CFLAGS = "-fno-inline";
 				OTHER_LDFLAGS = (
 					"-multiply_defined",
 					warning,
 				);
-				PREBINDING = YES;
 				PRODUCT_NAME = CommunicatorAdbkIO;
-				REZ_SCRIPT_TYPE = Roman;
-				REZ_SUPPRESS_REDECLARED_RESOURCE_TYPE_WARNINGS = NO;
 				STRIP_INSTALLED_PRODUCT = NO;
 				WRAPPER_EXTENSION = bundle;
 			};
Index: Plug-ins/QuickmailAdbkIO/QuickmailAdbkIO.xcodeproj/project.pbxproj
===================================================================
--- Plug-ins/QuickmailAdbkIO/QuickmailAdbkIO.xcodeproj/project.pbxproj	(revision 460)
+++ Plug-ins/QuickmailAdbkIO/QuickmailAdbkIO.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -49,7 +49,6 @@
 		AF4198A20AE9A25500E19592 = {
 			isa = PBXGroup;
 			children = (
-				AF657392136CAB770088690F /* Carbon.framework */,
 				AF4198B30AE9A25500E19592 /* Main */,
 				AF4198CA0AE9A25600E19592 /* Imported Files */,
 				AF4198CB0AE9A25600E19592 /* Frameworks */,
@@ -95,6 +94,7 @@
 		AF4198CB0AE9A25600E19592 /* Frameworks */ = {
 			isa = PBXGroup;
 			children = (
+				AF657392136CAB770088690F /* Carbon.framework */,
 			);
 			name = Frameworks;
 			sourceTree = "<group>";
@@ -125,8 +125,11 @@
 /* Begin PBXProject section */
 		AF4198A40AE9A25500E19592 /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = AF4198A50AE9A25500E19592 /* Build configuration list for PBXProject "QuickmailAdbkIO" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 0;
 			knownRegions = (
@@ -182,10 +185,9 @@
 		AF4198A60AE9A25500E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
+				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
+				SDKROOT = macosx10.6;
 			};
 			name = Debug;
 		};
@@ -192,27 +194,9 @@
 		AF4198B20AE9A25500E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = NO;
-				ARCHS = (
-					ppc,
-					i386,
-				);
-				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
-				GCC_ALTIVEC_EXTENSIONS = NO;
-				GCC_CHAR_IS_UNSIGNED_CHAR = NO;
-				GCC_C_LANGUAGE_STANDARD = c99;
-				GCC_ENABLE_CPP_RTTI = NO;
-				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_PREFIX_HEADER = ../Common/Plugin_Prefix_MacOSXcode.h;
-				GCC_REUSE_STRINGS = YES;
-				GCC_SHORT_ENUMS = NO;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
-				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = NO;
-				GCC_WARN_UNKNOWN_PRAGMAS = YES;
-				GCC_WARN_UNUSED_PARAMETER = NO;
-				GCC_WARN_UNUSED_VARIABLE = NO;
 				INFOPLIST_FILE = ../Common/Info.plst;
 				INFOPLIST_OTHER_PREPROCESSOR_FLAGS = "-include sources/Info.plst.def -include ../Common/InfoCommon.plst.def";
 				INFOPLIST_PREPROCESS = YES;
@@ -221,10 +205,7 @@
 					"-multiply_defined",
 					warning,
 				);
-				PREBINDING = YES;
 				PRODUCT_NAME = QuickmailAdbkIO;
-				REZ_SCRIPT_TYPE = Roman;
-				REZ_SUPPRESS_REDECLARED_RESOURCE_TYPE_WARNINGS = NO;
 				STRIP_INSTALLED_PRODUCT = NO;
 				WRAPPER_EXTENSION = bundle;
 			};
Index: Plug-ins/DIGEST-MD5/DIGEST-MD5.xcodeproj/project.pbxproj
===================================================================
--- Plug-ins/DIGEST-MD5/DIGEST-MD5.xcodeproj/project.pbxproj	(revision 460)
+++ Plug-ins/DIGEST-MD5/DIGEST-MD5.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -144,8 +144,11 @@
 /* Begin PBXProject section */
 		AF0F2FCF0AE3D0990074CFEF /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = AF0F2FD00AE3D0990074CFEF /* Build configuration list for PBXProject "DIGEST-MD5" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 0;
 			knownRegions = (
@@ -207,10 +210,9 @@
 		AF0F2FD10AE3D0990074CFEF /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
+				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
+				SDKROOT = macosx10.6;
 			};
 			name = Debug;
 		};
@@ -217,27 +219,9 @@
 		AF0F2FDD0AE3D0990074CFEF /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = NO;
-				ARCHS = (
-					ppc,
-					i386,
-				);
-				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
-				GCC_ALTIVEC_EXTENSIONS = NO;
-				GCC_CHAR_IS_UNSIGNED_CHAR = NO;
-				GCC_C_LANGUAGE_STANDARD = c99;
-				GCC_ENABLE_CPP_RTTI = NO;
-				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_PREFIX_HEADER = ../Common/Plugin_Prefix_MacOSXcode.h;
-				GCC_REUSE_STRINGS = NO;
-				GCC_SHORT_ENUMS = NO;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
-				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = NO;
-				GCC_WARN_UNKNOWN_PRAGMAS = YES;
-				GCC_WARN_UNUSED_PARAMETER = NO;
-				GCC_WARN_UNUSED_VARIABLE = NO;
 				INFOPLIST_FILE = ../Common/Info.plst;
 				INFOPLIST_OTHER_PREPROCESSOR_FLAGS = "-include sources/Info.plst.def -include ../Common/InfoCommon.plst.def";
 				INFOPLIST_PREPROCESS = YES;
@@ -246,10 +230,7 @@
 					"-multiply_defined",
 					warning,
 				);
-				PREBINDING = YES;
 				PRODUCT_NAME = "DIGEST-MD5";
-				REZ_SCRIPT_TYPE = Roman;
-				REZ_SUPPRESS_REDECLARED_RESOURCE_TYPE_WARNINGS = NO;
 				STRIP_INSTALLED_PRODUCT = NO;
 				WRAPPER_EXTENSION = bundle;
 			};
Index: Plug-ins/PineAdbkIO/PineAdbkIO.xcodeproj/project.pbxproj
===================================================================
--- Plug-ins/PineAdbkIO/PineAdbkIO.xcodeproj/project.pbxproj	(revision 460)
+++ Plug-ins/PineAdbkIO/PineAdbkIO.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -14,6 +14,7 @@
 		AF4198790AE9A05D00E19592 /* CPineAdbkIOPluginDLL.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF4198660AE9A05D00E19592 /* CPineAdbkIOPluginDLL.cp */; };
 		AF41987B0AE9A05D00E19592 /* CStringUtils.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF41986A0AE9A05D00E19592 /* CStringUtils.cp */; };
 		AF657391136CAB4F0088690F /* Carbon.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = AF657390136CAB4F0088690F /* Carbon.framework */; };
+		AFECC930176E1277006354FB /* libPluginLibrary.a in Frameworks */ = {isa = PBXBuildFile; fileRef = AFECC92F176E1277006354FB /* libPluginLibrary.a */; };
 /* End PBXBuildFile section */
 
 /* Begin PBXFileReference section */
@@ -32,7 +33,7 @@
 		AF4198810AE9A05E00E19592 /* PluginDLLmain.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; name = PluginDLLmain.h; path = sources/PluginDLLmain.h; sourceTree = SOURCE_ROOT; };
 		AF4198850AE9A05E00E19592 /* CPluginInfo.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; name = CPluginInfo.h; path = ../Common/CPluginInfo.h; sourceTree = SOURCE_ROOT; };
 		AF657390136CAB4F0088690F /* Carbon.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = Carbon.framework; path = System/Library/Frameworks/Carbon.framework; sourceTree = SDKROOT; };
-		AF9BC90113D5D76A00240750 /* libPluginLibrary.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; name = libPluginLibrary.a; path = ../PluginLibrary/build/Debug/libPluginLibrary.a; sourceTree = "<group>"; };
+		AFECC92F176E1277006354FB /* libPluginLibrary.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; name = libPluginLibrary.a; path = ../PluginLibrary/build/Debug/libPluginLibrary.a; sourceTree = "<group>"; };
 /* End PBXFileReference section */
 
 /* Begin PBXFrameworksBuildPhase section */
@@ -40,6 +41,7 @@
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
+				AFECC930176E1277006354FB /* libPluginLibrary.a in Frameworks */,
 				AF657391136CAB4F0088690F /* Carbon.framework in Frameworks */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
@@ -50,7 +52,6 @@
 		AF41984F0AE9A05D00E19592 = {
 			isa = PBXGroup;
 			children = (
-				AF9BC90113D5D76A00240750 /* libPluginLibrary.a */,
 				AF4198600AE9A05D00E19592 /* Main */,
 				AF41987D0AE9A05E00E19592 /* Imported Files */,
 				AF41987E0AE9A05E00E19592 /* Frameworks */,
@@ -96,6 +97,7 @@
 		AF41987E0AE9A05E00E19592 /* Frameworks */ = {
 			isa = PBXGroup;
 			children = (
+				AFECC92F176E1277006354FB /* libPluginLibrary.a */,
 				AF657390136CAB4F0088690F /* Carbon.framework */,
 			);
 			name = Frameworks;
@@ -127,8 +129,11 @@
 /* Begin PBXProject section */
 		AF4198510AE9A05D00E19592 /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = AF4198520AE9A05D00E19592 /* Build configuration list for PBXProject "PineAdbkIO" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 0;
 			knownRegions = (
@@ -184,10 +189,9 @@
 		AF4198530AE9A05D00E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
+				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
+				SDKROOT = macosx10.6;
 			};
 			name = Debug;
 		};
@@ -194,44 +198,22 @@
 		AF41985F0AE9A05D00E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = NO;
-				ARCHS = (
-					ppc,
-					i386,
-				);
-				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
-				GCC_ALTIVEC_EXTENSIONS = NO;
-				GCC_CHAR_IS_UNSIGNED_CHAR = NO;
-				GCC_C_LANGUAGE_STANDARD = c99;
-				GCC_ENABLE_CPP_RTTI = NO;
-				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_PREFIX_HEADER = ../Common/Plugin_Prefix_MacOSXcode.h;
-				GCC_REUSE_STRINGS = YES;
-				GCC_SHORT_ENUMS = NO;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
-				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = NO;
-				GCC_WARN_UNKNOWN_PRAGMAS = YES;
-				GCC_WARN_UNUSED_PARAMETER = NO;
-				GCC_WARN_UNUSED_VARIABLE = NO;
 				INFOPLIST_FILE = ../Common/Info.plst;
 				INFOPLIST_OTHER_PREPROCESSOR_FLAGS = "-include sources/Info.plst.def -include ../Common/InfoCommon.plst.def";
 				INFOPLIST_PREPROCESS = YES;
 				LIBRARY_SEARCH_PATHS = (
 					"$(inherited)",
-					"$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1)",
+					"$(SRCROOT)/../PluginLibrary/build/Debug",
 				);
-				LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = "\"$(SRCROOT)/../PluginLibrary/build/Debug\"";
 				OTHER_CFLAGS = "-fno-inline";
 				OTHER_LDFLAGS = (
 					"-multiply_defined",
 					warning,
 				);
-				PREBINDING = YES;
 				PRODUCT_NAME = PineAdbkIO;
-				REZ_SCRIPT_TYPE = Roman;
-				REZ_SUPPRESS_REDECLARED_RESOURCE_TYPE_WARNINGS = NO;
 				STRIP_INSTALLED_PRODUCT = NO;
 				WRAPPER_EXTENSION = bundle;
 			};
Index: Plug-ins/CommunicatorAdbkIO/sources/line64mac.c
===================================================================
--- Plug-ins/CommunicatorAdbkIO/sources/line64mac.c	(revision 460)
+++ Plug-ins/CommunicatorAdbkIO/sources/line64mac.c	(revision 493)
@@ -158,7 +158,7 @@
 	*d = '\0';
 
 	if ( b64 ) {
-		char *byte = s;
+		char *byte;
 
 		if ( *s == '\0' ) {
 			/* no value is present, error out */
Index: Plug-ins/PineAdbkIO/PineAdbkIO.xcodeproj
===================================================================
--- Plug-ins/PineAdbkIO/PineAdbkIO.xcodeproj	(revision 460)
+++ Plug-ins/PineAdbkIO/PineAdbkIO.xcodeproj	(revision 493)

Property changes on: Plug-ins/PineAdbkIO/PineAdbkIO.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 *.mode*
 *.pbxuser
+xcuserdata
Index: Plug-ins/DIGEST-MD5/DIGEST-MD5.xcodeproj
===================================================================
--- Plug-ins/DIGEST-MD5/DIGEST-MD5.xcodeproj	(revision 460)
+++ Plug-ins/DIGEST-MD5/DIGEST-MD5.xcodeproj	(revision 493)

Property changes on: Plug-ins/DIGEST-MD5/DIGEST-MD5.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 *.mode*
 *.pbxuser
+xcuserdata
Index: Plug-ins/QuickmailAdbkIO/QuickmailAdbkIO.xcodeproj
===================================================================
--- Plug-ins/QuickmailAdbkIO/QuickmailAdbkIO.xcodeproj	(revision 460)
+++ Plug-ins/QuickmailAdbkIO/QuickmailAdbkIO.xcodeproj	(revision 493)

Property changes on: Plug-ins/QuickmailAdbkIO/QuickmailAdbkIO.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 *.mode*
 *.pbxuser
+xcuserdata
Index: Plug-ins/CommunicatorAdbkIO/CommunicatorAdbkIO.xcodeproj
===================================================================
--- Plug-ins/CommunicatorAdbkIO/CommunicatorAdbkIO.xcodeproj	(revision 460)
+++ Plug-ins/CommunicatorAdbkIO/CommunicatorAdbkIO.xcodeproj	(revision 493)

Property changes on: Plug-ins/CommunicatorAdbkIO/CommunicatorAdbkIO.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 *.mode*
 *.pbxuser
+xcuserdata
Index: Plug-ins/CRAM-MD5/CRAM-MD5.xcodeproj
===================================================================
--- Plug-ins/CRAM-MD5/CRAM-MD5.xcodeproj	(revision 460)
+++ Plug-ins/CRAM-MD5/CRAM-MD5.xcodeproj	(revision 493)

Property changes on: Plug-ins/CRAM-MD5/CRAM-MD5.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 *.mode*
 *.pbxuser
+xcuserdata
Index: Plug-ins/SSL/SSL.xcodeproj
===================================================================
--- Plug-ins/SSL/SSL.xcodeproj	(revision 460)
+++ Plug-ins/SSL/SSL.xcodeproj	(revision 493)

Property changes on: Plug-ins/SSL/SSL.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 *.mode*
 *.pbxuser
+xcuserdata
Index: Plug-ins/EudoraAdbkIO/EudoraAdbkIO.xcodeproj
===================================================================
--- Plug-ins/EudoraAdbkIO/EudoraAdbkIO.xcodeproj	(revision 460)
+++ Plug-ins/EudoraAdbkIO/EudoraAdbkIO.xcodeproj	(revision 493)

Property changes on: Plug-ins/EudoraAdbkIO/EudoraAdbkIO.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 *.mode*
 *.pbxuser
+xcuserdata
Index: Sources_Common/Utilities/CStringUtils.cp
===================================================================
--- Sources_Common/Utilities/CStringUtils.cp	(revision 460)
+++ Sources_Common/Utilities/CStringUtils.cp	(revision 493)
@@ -655,7 +655,9 @@
 
 	unsigned char * s1 = (unsigned char *) str;
 	unsigned char * p1 = (unsigned char *) pat;
-	unsigned char firstc, c1, c2;
+	unsigned char firstc = 0;
+    unsigned char c1 = 0;
+    unsigned char c2 = 0;
 	
 	if ((pat == NULL) || (!(firstc = tolower(*p1++))))
 										/* 980424  mm   if pat is a NULL pointer, we return str */
@@ -684,7 +686,9 @@
 
 	unsigned char * s1 = (unsigned char *) str-1;
 	unsigned char * p1 = (unsigned char *) pat-1;
-	unsigned long firstc, c1, c2;
+	unsigned char firstc = 0;
+    unsigned char c1 = 0;
+    unsigned char c2 = 0;
 	
 	if ((pat == NULL) || (!(firstc = tolower(*++p1))))    /* 980807  vss  PPC must be pre-increment */
 										/* 980424  mm   if pat is a NULL pointer, we return str */
Index: Plug-ins/PluginLibrary/PluginLibrary.xcodeproj/project.pbxproj
===================================================================
--- Plug-ins/PluginLibrary/PluginLibrary.xcodeproj/project.pbxproj	(revision 460)
+++ Plug-ins/PluginLibrary/PluginLibrary.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -436,8 +436,11 @@
 /* Begin PBXProject section */
 		AFBD93F00AD9BC9400DD4C86 /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = AFBD93F10AD9BC9400DD4C86 /* Build configuration list for PBXProject "PluginLibrary" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 0;
 			knownRegions = (
@@ -512,11 +515,10 @@
 		AFBD93F20AD9BC9400DD4C86 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
 				GCC_PREFIX_HEADER = ../Common/Plugin_Prefix_MacOSXcode.h;
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				GCC_WARN_ABOUT_DEPRECATED_FUNCTIONS = NO;
+				SDKROOT = macosx10.6;
 			};
 			name = Debug;
 		};
@@ -523,23 +525,8 @@
 		AFBD93FE0AD9BC9400DD4C86 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = NO;
-				FRAMEWORK_SEARCH_PATHS = (
-					"$(inherited)",
-					"$(FRAMEWORK_SEARCH_PATHS_QUOTED_FOR_TARGET_1)",
-				);
-				GCC_C_LANGUAGE_STANDARD = c99;
-				GCC_ENABLE_CPP_RTTI = NO;
 				GCC_OPTIMIZATION_LEVEL = 0;
-				GCC_SHORT_ENUMS = YES;
-				GCC_WARN_ABOUT_DEPRECATED_FUNCTIONS = NO;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
-				GCC_WARN_UNKNOWN_PRAGMAS = YES;
 				HEADER_SEARCH_PATHS = /Developer/Headers/FlatCarbon;
-				LIBRARY_SEARCH_PATHS = (
-					"$(inherited)",
-					"$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1)",
-				);
 				OTHER_CFLAGS = "-fno-inline";
 				OTHER_LDFLAGS = (
 					"-multiply_defined",
Index: Plug-ins/GSSAPI/GSSAPI.xcodeproj/project.pbxproj
===================================================================
--- Plug-ins/GSSAPI/GSSAPI.xcodeproj/project.pbxproj	(revision 460)
+++ Plug-ins/GSSAPI/GSSAPI.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -165,8 +165,11 @@
 /* Begin PBXProject section */
 		AFD93B8C0AE5ADFB007F506F /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = AFD93B8D0AE5ADFB007F506F /* Build configuration list for PBXProject "GSSAPI" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 0;
 			knownRegions = (
@@ -223,11 +226,9 @@
 		AFD93B8E0AE5ADFB007F506F /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
 				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				SDKROOT = macosx10.6;
 			};
 			name = Debug;
 		};
@@ -234,27 +235,9 @@
 		AFD93B9A0AE5ADFB007F506F /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = NO;
-				ARCHS = (
-					ppc,
-					i386,
-				);
-				GCC_ALTIVEC_EXTENSIONS = NO;
-				GCC_CHAR_IS_UNSIGNED_CHAR = NO;
-				GCC_C_LANGUAGE_STANDARD = c99;
-				GCC_ENABLE_CPP_RTTI = NO;
-				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
-				GCC_INPUT_FILETYPE = sourcecode.cpp.cpp;
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_PREFIX_HEADER = ../Common/Plugin_Prefix_MacOSXcode.h;
-				GCC_REUSE_STRINGS = YES;
-				GCC_SHORT_ENUMS = NO;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
-				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = NO;
-				GCC_WARN_UNKNOWN_PRAGMAS = YES;
-				GCC_WARN_UNUSED_PARAMETER = NO;
-				GCC_WARN_UNUSED_VARIABLE = NO;
 				INFOPLIST_FILE = ../Common/Info.plst;
 				INFOPLIST_OTHER_PREPROCESSOR_FLAGS = "-include sources/Info.plst.def -include ../Common/InfoCommon.plst.def";
 				INFOPLIST_PREPROCESS = YES;
@@ -263,10 +246,7 @@
 					"-multiply_defined",
 					warning,
 				);
-				PREBINDING = YES;
 				PRODUCT_NAME = GSSAPI;
-				REZ_SCRIPT_TYPE = Roman;
-				REZ_SUPPRESS_REDECLARED_RESOURCE_TYPE_WARNINGS = NO;
 				STRIP_INSTALLED_PRODUCT = NO;
 				WRAPPER_EXTENSION = bundle;
 			};
Index: Plug-ins/Common/CPluginInfo.h
===================================================================
--- Plug-ins/Common/CPluginInfo.h	(revision 460)
+++ Plug-ins/Common/CPluginInfo.h	(revision 493)
@@ -18,8 +18,8 @@
 
 // Common to all plugins
 //long cPluginVersion =				0x04002001;				// v4.0d1
-long cPluginVersion =				0x04014003;				// v4.1a3
-//long cPluginVersion =				0x04096001;				// v4.0.9b1
+//long cPluginVersion =				0x04104003;				// v4.1a3
+long cPluginVersion =				0x04106001;				// v4.1b1
 //long cPluginVersion =				0x04088000;				// v4.0.8
 const char* cPluginManufacturer =	"mulberrymail.com";
 
@@ -30,4 +30,4 @@
 #elif __dest_os == __linux_os
 #define OS_ENDL "\n"
 #endif
-#define COPYRIGHT OS_ENDL OS_ENDL "Copyright Cyrus Daboo, 2006-2012."
+#define COPYRIGHT OS_ENDL OS_ENDL "Copyright Cyrus Daboo, 2006-2014."
Index: Plug-ins/QuickmailAdbkIO/sources/CQuickmailAdbkIOPluginDLL.cp
===================================================================
--- Plug-ins/QuickmailAdbkIO/sources/CQuickmailAdbkIOPluginDLL.cp	(revision 460)
+++ Plug-ins/QuickmailAdbkIO/sources/CQuickmailAdbkIOPluginDLL.cp	(revision 493)
@@ -160,11 +160,11 @@
 
 		// Last name will be at start
 		last_name = p;
-		char q = SkipTerm(&p);
+		SkipTerm(&p);
 		
 		// First name will be next
 		first_name = p;
-		q = SkipTerm(&p);
+		SkipTerm(&p);
 		
 		// Create whole name
 		::strcpy(whole_name, first_name);
@@ -172,14 +172,14 @@
 		::strcat(whole_name, last_name);
 
 		// Gateway will be next - ignore
-		q = SkipTerm(&p);
+		SkipTerm(&p);
 
 		// Location will be next - ignore
-		q = SkipTerm(&p);
+		SkipTerm(&p);
 
 		// Email will be next
 		eaddr = p;
-		q = SkipTerm(&p);
+		char q = SkipTerm(&p);
 
 		// Create empty address
 		CAdbkIOPluginAddress addr;
Index: Plug-ins/DIGEST-MD5/Make.header
===================================================================
--- Plug-ins/DIGEST-MD5/Make.header	(revision 460)
+++ Plug-ins/DIGEST-MD5/Make.header	(revision 493)
@@ -31,7 +31,7 @@
 	 $(CPP) $(CFLAGS) -c -o $@ $<
 
 ${BIN}/hmac-md5.o: ../CRAM-MD5/sources/md5/hmac-md5.c ../CRAM-MD5/sources/md5/hmac-md5.h
-	 $(CC) -c -o $@ $<
+	 $(CC) -c -fPIC -o $@ $<
 
 ${BIN}/md5c.o: ../CRAM-MD5/sources/md5/md5c.c ../CRAM-MD5/sources/md5/md5.h
-	 $(CC) -c -o $@ $<
+	 $(CC) -c -fPIC -o $@ $<
Index: Plug-ins/CRAM-MD5/Make.header
===================================================================
--- Plug-ins/CRAM-MD5/Make.header	(revision 460)
+++ Plug-ins/CRAM-MD5/Make.header	(revision 493)
@@ -31,7 +31,7 @@
 	 $(CPP) $(CFLAGS) -c -o $@ $<
 
 ${BIN}/hmac-md5.o: ../CRAM-MD5/sources/md5/hmac-md5.c ../CRAM-MD5/sources/md5/hmac-md5.h
-	 $(CC) -c -o $@ $<
+	 $(CC) -c -fPIC -o $@ $<
 
 ${BIN}/md5c.o: ../CRAM-MD5/sources/md5/md5c.c ../CRAM-MD5/sources/md5/md5.h
-	 $(CC) -c -o $@ $<
+	 $(CC) -c -fPIC -o $@ $<
Index: Plug-ins/CocoaSpeller/sources/CocoaSpell.m
===================================================================
--- Plug-ins/CocoaSpeller/sources/CocoaSpell.m	(revision 460)
+++ Plug-ins/CocoaSpeller/sources/CocoaSpell.m	(revision 493)
@@ -59,7 +59,7 @@
     [pool release];
 }
 
-CFArrayRef GuessesForWord(CFStringRef stringToGuess)
+CFArrayRef CopyGuessesForWord(CFStringRef stringToGuess)
 {
 	NSArray *guesses = NULL;
     NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
@@ -80,7 +80,7 @@
 	return result;
 }
 
-CFStringRef Language(void)
+CFStringRef CopyLanguage(void)
 {
 	NSString* result = NULL;
 	
@@ -91,7 +91,7 @@
 	return (CFStringRef)result;
 }
 
-CFArrayRef AvailableLanguages(void)
+CFArrayRef CopyAvailableLanguages(void)
 {
 	NSArray *languages = NULL;
     NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
Index: Plug-ins/NetscapeAdbkIO/NetscapeAdbkIO.xcodeproj/project.pbxproj
===================================================================
--- Plug-ins/NetscapeAdbkIO/NetscapeAdbkIO.xcodeproj/project.pbxproj	(revision 460)
+++ Plug-ins/NetscapeAdbkIO/NetscapeAdbkIO.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -12,7 +12,7 @@
 		AF419A4B0AE9AA5C00E19592 /* CAdbkIOPluginDLL.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF419A430AE9AA5C00E19592 /* CAdbkIOPluginDLL.cp */; };
 		AF419A4D0AE9AA5C00E19592 /* CNetscapeAdbkIOPluginDLL.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF419A450AE9AA5C00E19592 /* CNetscapeAdbkIOPluginDLL.cp */; };
 		AF65738B136CAAFA0088690F /* Carbon.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = AF65738A136CAAFA0088690F /* Carbon.framework */; };
-		AF9BC8FE13D5D72F00240750 /* libPluginLibrary.a in Frameworks */ = {isa = PBXBuildFile; fileRef = AF9BC8FD13D5D72F00240750 /* libPluginLibrary.a */; };
+		AFECC92C176E117C006354FB /* libPluginLibrary.a in Frameworks */ = {isa = PBXBuildFile; fileRef = AFECC92B176E117C006354FB /* libPluginLibrary.a */; };
 /* End PBXBuildFile section */
 
 /* Begin PBXFileReference section */
@@ -32,7 +32,7 @@
 		AF419A600AE9AA5E00E19592 /* HTML_Tags.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; name = HTML_Tags.h; path = ../../Sources_Common/Mail/HTML_Tags.h; sourceTree = SOURCE_ROOT; };
 		AF419A640AE9AA5E00E19592 /* CCharsetCodes.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; name = CCharsetCodes.h; path = ../../Sources_Common/i18n/Charsets/CCharsetCodes.h; sourceTree = SOURCE_ROOT; };
 		AF65738A136CAAFA0088690F /* Carbon.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = Carbon.framework; path = System/Library/Frameworks/Carbon.framework; sourceTree = SDKROOT; };
-		AF9BC8FD13D5D72F00240750 /* libPluginLibrary.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; name = libPluginLibrary.a; path = ../PluginLibrary/build/Debug/libPluginLibrary.a; sourceTree = SOURCE_ROOT; };
+		AFECC92B176E117C006354FB /* libPluginLibrary.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; name = libPluginLibrary.a; path = ../PluginLibrary/build/Debug/libPluginLibrary.a; sourceTree = "<group>"; };
 /* End PBXFileReference section */
 
 /* Begin PBXFrameworksBuildPhase section */
@@ -40,7 +40,7 @@
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
-				AF9BC8FE13D5D72F00240750 /* libPluginLibrary.a in Frameworks */,
+				AFECC92C176E117C006354FB /* libPluginLibrary.a in Frameworks */,
 				AF65738B136CAAFA0088690F /* Carbon.framework in Frameworks */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
@@ -97,7 +97,7 @@
 		AF419A510AE9AA5E00E19592 /* Frameworks */ = {
 			isa = PBXGroup;
 			children = (
-				AF9BC8FD13D5D72F00240750 /* libPluginLibrary.a */,
+				AFECC92B176E117C006354FB /* libPluginLibrary.a */,
 				AF65738A136CAAFA0088690F /* Carbon.framework */,
 			);
 			name = Frameworks;
@@ -129,8 +129,11 @@
 /* Begin PBXProject section */
 		AF419A300AE9AA5B00E19592 /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = AF419A310AE9AA5B00E19592 /* Build configuration list for PBXProject "NetscapeAdbkIO" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 0;
 			knownRegions = (
@@ -184,10 +187,9 @@
 		AF419A320AE9AA5B00E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
+				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
+				SDKROOT = macosx10.6;
 			};
 			name = Debug;
 		};
@@ -194,46 +196,22 @@
 		AF419A3E0AE9AA5C00E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = NO;
-				ARCHS = (
-					ppc,
-					i386,
-				);
-				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
-				GCC_ALTIVEC_EXTENSIONS = NO;
-				GCC_CHAR_IS_UNSIGNED_CHAR = NO;
-				GCC_C_LANGUAGE_STANDARD = c99;
-				GCC_ENABLE_CPP_RTTI = NO;
-				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_PREFIX_HEADER = ../Common/Plugin_Prefix_MacOSXcode.h;
-				GCC_REUSE_STRINGS = YES;
-				GCC_SHORT_ENUMS = NO;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
-				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = NO;
-				GCC_WARN_UNKNOWN_PRAGMAS = YES;
-				GCC_WARN_UNUSED_PARAMETER = NO;
-				GCC_WARN_UNUSED_VARIABLE = NO;
 				INFOPLIST_FILE = ../Common/Info.plst;
 				INFOPLIST_OTHER_PREPROCESSOR_FLAGS = "-include sources/Info.plst.def -include ../Common/InfoCommon.plst.def";
 				INFOPLIST_PREPROCESS = YES;
 				LIBRARY_SEARCH_PATHS = (
 					"$(inherited)",
-					"$(LIBRARY_SEARCH_PATHS_QUOTED_1)",
-					"$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1)",
+					"$(SRCROOT)/../PluginLibrary/build/Debug",
 				);
-				LIBRARY_SEARCH_PATHS_QUOTED_1 = "\"$(SRCROOT)/../PluginLibrary\"";
-				LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = "\"$(SRCROOT)/../PluginLibrary/build/Debug\"";
 				OTHER_CFLAGS = "-fno-inline";
 				OTHER_LDFLAGS = (
 					"-multiply_defined",
 					warning,
 				);
-				PREBINDING = YES;
 				PRODUCT_NAME = NetscapeAdbkIO;
-				REZ_SCRIPT_TYPE = Roman;
-				REZ_SUPPRESS_REDECLARED_RESOURCE_TYPE_WARNINGS = NO;
 				STRIP_INSTALLED_PRODUCT = NO;
 				WRAPPER_EXTENSION = bundle;
 			};
Index: Plug-ins/Eudora4AdbkIO/Eudora4AdbkIO.xcodeproj/project.pbxproj
===================================================================
--- Plug-ins/Eudora4AdbkIO/Eudora4AdbkIO.xcodeproj/project.pbxproj	(revision 460)
+++ Plug-ins/Eudora4AdbkIO/Eudora4AdbkIO.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -12,7 +12,7 @@
 		AF419AF80AE9CB1100E19592 /* CAdbkIOPluginDLL.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF419AF00AE9CB1100E19592 /* CAdbkIOPluginDLL.cp */; };
 		AF419AFA0AE9CB1100E19592 /* CEudora4AdbkIOPluginDLL.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF419AF20AE9CB1100E19592 /* CEudora4AdbkIOPluginDLL.cp */; };
 		AF65737F136CAA600088690F /* Carbon.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = AF65737E136CAA600088690F /* Carbon.framework */; };
-		AF9BC8FA13D5D62E00240750 /* libPluginLibrary.a in Frameworks */ = {isa = PBXBuildFile; fileRef = AF9BC8F913D5D62E00240750 /* libPluginLibrary.a */; };
+		AFECC928176E0FF7006354FB /* libPluginLibrary.a in Frameworks */ = {isa = PBXBuildFile; fileRef = AFECC927176E0FF7006354FB /* libPluginLibrary.a */; };
 /* End PBXBuildFile section */
 
 /* Begin PBXFileReference section */
@@ -30,7 +30,7 @@
 		AF419B090AE9CB1200E19592 /* cdstring.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; name = cdstring.h; path = ../../Sources_Common/Utilities/cdstring.h; sourceTree = SOURCE_ROOT; };
 		AF419B0D0AE9CB1200E19592 /* CCharsetCodes.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; name = CCharsetCodes.h; path = ../../Sources_Common/i18n/Charsets/CCharsetCodes.h; sourceTree = SOURCE_ROOT; };
 		AF65737E136CAA600088690F /* Carbon.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = Carbon.framework; path = System/Library/Frameworks/Carbon.framework; sourceTree = SDKROOT; };
-		AF9BC8F913D5D62E00240750 /* libPluginLibrary.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; name = libPluginLibrary.a; path = ../PluginLibrary/build/Debug/libPluginLibrary.a; sourceTree = SOURCE_ROOT; };
+		AFECC927176E0FF7006354FB /* libPluginLibrary.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; name = libPluginLibrary.a; path = ../PluginLibrary/build/Debug/libPluginLibrary.a; sourceTree = "<group>"; };
 /* End PBXFileReference section */
 
 /* Begin PBXFrameworksBuildPhase section */
@@ -38,7 +38,7 @@
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
-				AF9BC8FA13D5D62E00240750 /* libPluginLibrary.a in Frameworks */,
+				AFECC928176E0FF7006354FB /* libPluginLibrary.a in Frameworks */,
 				AF65737F136CAA600088690F /* Carbon.framework in Frameworks */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
@@ -93,7 +93,7 @@
 		AF419AFE0AE9CB1200E19592 /* Frameworks */ = {
 			isa = PBXGroup;
 			children = (
-				AF9BC8F913D5D62E00240750 /* libPluginLibrary.a */,
+				AFECC927176E0FF7006354FB /* libPluginLibrary.a */,
 				AF65737E136CAA600088690F /* Carbon.framework */,
 			);
 			name = Frameworks;
@@ -125,8 +125,11 @@
 /* Begin PBXProject section */
 		AF419ADD0AE9CB1100E19592 /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = AF419ADE0AE9CB1100E19592 /* Build configuration list for PBXProject "Eudora4AdbkIO" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 0;
 			knownRegions = (
@@ -183,10 +186,9 @@
 		AF419ADF0AE9CB1100E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
+				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
+				SDKROOT = macosx10.6;
 			};
 			name = Debug;
 		};
@@ -193,49 +195,22 @@
 		AF419AEB0AE9CB1100E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = NO;
-				ARCHS = (
-					ppc,
-					i386,
-				);
-				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
-				FRAMEWORK_SEARCH_PATHS = "";
-				FRAMEWORK_SEARCH_PATHS_QUOTED_1 = "\"$(SYSTEM_DEVELOPER_DIR)/SDKs/MacOSX10.4u.sdk/System/Library/Frameworks\"";
-				GCC_ALTIVEC_EXTENSIONS = NO;
-				GCC_CHAR_IS_UNSIGNED_CHAR = NO;
-				GCC_C_LANGUAGE_STANDARD = c99;
-				GCC_ENABLE_CPP_RTTI = NO;
-				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
-				GCC_INPUT_FILETYPE = sourcecode.cpp.cpp;
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_PREFIX_HEADER = ../Common/Plugin_Prefix_MacOSXcode.h;
-				GCC_REUSE_STRINGS = YES;
-				GCC_SHORT_ENUMS = NO;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
-				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = NO;
-				GCC_WARN_UNKNOWN_PRAGMAS = YES;
-				GCC_WARN_UNUSED_PARAMETER = NO;
-				GCC_WARN_UNUSED_VARIABLE = NO;
 				INFOPLIST_FILE = ../Common/Info.plst;
 				INFOPLIST_OTHER_PREPROCESSOR_FLAGS = "-include sources/Info.plst.def -include ../Common/InfoCommon.plst.def";
 				INFOPLIST_PREPROCESS = YES;
 				LIBRARY_SEARCH_PATHS = (
 					"$(inherited)",
-					"$(LIBRARY_SEARCH_PATHS_QUOTED_1)",
-					"$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1)",
+					"$(SRCROOT)/../PluginLibrary/build/Debug",
 				);
-				LIBRARY_SEARCH_PATHS_QUOTED_1 = "\"$(SRCROOT)/../PluginLibrary\"";
-				LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = "\"$(SRCROOT)/../PluginLibrary/build/Debug\"";
 				OTHER_CFLAGS = "-fno-inline";
 				OTHER_LDFLAGS = (
 					"-multiply_defined",
 					warning,
 				);
-				PREBINDING = YES;
 				PRODUCT_NAME = Eudora4AdbkIO;
-				REZ_SCRIPT_TYPE = Roman;
-				REZ_SUPPRESS_REDECLARED_RESOURCE_TYPE_WARNINGS = NO;
 				STRIP_INSTALLED_PRODUCT = NO;
 				WRAPPER_EXTENSION = bundle;
 			};
Index: Plug-ins/SMIME/SMIME.xcodeproj/project.pbxproj
===================================================================
--- Plug-ins/SMIME/SMIME.xcodeproj/project.pbxproj	(revision 460)
+++ Plug-ins/SMIME/SMIME.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -13,7 +13,7 @@
 		AF419D190AEA700500E19592 /* CSMIMEPluginDLL.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF419D100AEA700500E19592 /* CSMIMEPluginDLL.cp */; };
 		AF65739A136CABD40088690F /* Carbon.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = AF657398136CABD40088690F /* Carbon.framework */; };
 		AF65739B136CABD40088690F /* libcrypto.dylib in Frameworks */ = {isa = PBXBuildFile; fileRef = AF657399136CABD40088690F /* libcrypto.dylib */; };
-		AF9BC90413D5D77800240750 /* libPluginLibrary.a in Frameworks */ = {isa = PBXBuildFile; fileRef = AF9BC90313D5D77800240750 /* libPluginLibrary.a */; };
+		AFECC932176E13BF006354FB /* libPluginLibrary.a in Frameworks */ = {isa = PBXBuildFile; fileRef = AFECC931176E13BF006354FB /* libPluginLibrary.a */; };
 /* End PBXBuildFile section */
 
 /* Begin PBXFileReference section */
@@ -36,7 +36,7 @@
 		AF419DFF0AEA721F00E19592 /* MoreFilesX.h */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.c.h; name = MoreFilesX.h; path = ../../../Libraries/MoreFilesX/MoreFilesX.h; sourceTree = SOURCE_ROOT; };
 		AF657398136CABD40088690F /* Carbon.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = Carbon.framework; path = System/Library/Frameworks/Carbon.framework; sourceTree = SDKROOT; };
 		AF657399136CABD40088690F /* libcrypto.dylib */ = {isa = PBXFileReference; lastKnownFileType = "compiled.mach-o.dylib"; name = libcrypto.dylib; path = usr/lib/libcrypto.dylib; sourceTree = SDKROOT; };
-		AF9BC90313D5D77800240750 /* libPluginLibrary.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; name = libPluginLibrary.a; path = ../PluginLibrary/build/Debug/libPluginLibrary.a; sourceTree = SOURCE_ROOT; };
+		AFECC931176E13BF006354FB /* libPluginLibrary.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; name = libPluginLibrary.a; path = ../PluginLibrary/build/Debug/libPluginLibrary.a; sourceTree = "<group>"; };
 /* End PBXFileReference section */
 
 /* Begin PBXFrameworksBuildPhase section */
@@ -44,7 +44,7 @@
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
-				AF9BC90413D5D77800240750 /* libPluginLibrary.a in Frameworks */,
+				AFECC932176E13BF006354FB /* libPluginLibrary.a in Frameworks */,
 				AF65739A136CABD40088690F /* Carbon.framework in Frameworks */,
 				AF65739B136CABD40088690F /* libcrypto.dylib in Frameworks */,
 			);
@@ -104,7 +104,7 @@
 		AF419D300AEA700A00E19592 /* Frameworks */ = {
 			isa = PBXGroup;
 			children = (
-				AF9BC90313D5D77800240750 /* libPluginLibrary.a */,
+				AFECC931176E13BF006354FB /* libPluginLibrary.a */,
 				AF657398136CABD40088690F /* Carbon.framework */,
 				AF657399136CABD40088690F /* libcrypto.dylib */,
 			);
@@ -137,8 +137,11 @@
 /* Begin PBXProject section */
 		AF419CFB0AEA700500E19592 /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = AF419CFC0AEA700500E19592 /* Build configuration list for PBXProject "SMIME" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 0;
 			knownRegions = (
@@ -192,11 +195,10 @@
 		AF419CFD0AEA700500E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
+				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
 				GCC_WARN_ABOUT_DEPRECATED_FUNCTIONS = NO;
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				SDKROOT = macosx10.6;
 			};
 			name = Debug;
 		};
@@ -203,47 +205,22 @@
 		AF419D090AEA700500E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = NO;
-				ARCHS = (
-					ppc,
-					i386,
-				);
-				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
-				GCC_ALTIVEC_EXTENSIONS = NO;
-				GCC_CHAR_IS_UNSIGNED_CHAR = NO;
-				GCC_C_LANGUAGE_STANDARD = c99;
-				GCC_ENABLE_CPP_RTTI = NO;
-				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_PREFIX_HEADER = ../Common/Plugin_Prefix_MacOSXcode.h;
-				GCC_REUSE_STRINGS = NO;
-				GCC_SHORT_ENUMS = NO;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
-				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = NO;
-				GCC_WARN_UNKNOWN_PRAGMAS = YES;
-				GCC_WARN_UNUSED_PARAMETER = NO;
-				GCC_WARN_UNUSED_VARIABLE = NO;
 				INFOPLIST_FILE = ../Common/Info.plst;
 				INFOPLIST_OTHER_PREPROCESSOR_FLAGS = "-include sources/Info.plst.def -include ../Common/InfoCommon.plst.def";
 				INFOPLIST_PREPROCESS = YES;
 				LIBRARY_SEARCH_PATHS = (
 					"$(inherited)",
-					"$(LIBRARY_SEARCH_PATHS_QUOTED_1)",
-					"$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1)",
+					"$(SRCROOT)/../PluginLibrary/build/Debug",
 				);
-				LIBRARY_SEARCH_PATHS_QUOTED_1 = "\"$(SRCROOT)/../PluginLibrary\"";
-				LIBRARY_SEARCH_PATHS_QUOTED_2 = "\"$(SYSTEM_DEVELOPER_DIR)/SDKs/MacOSX10.4u.sdk/usr/lib\"";
-				LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = "\"$(SRCROOT)/../PluginLibrary/build/Debug\"";
 				OTHER_CFLAGS = "-fno-inline";
 				OTHER_LDFLAGS = (
 					"-multiply_defined",
 					warning,
 				);
-				PREBINDING = YES;
 				PRODUCT_NAME = SMIME;
-				REZ_SCRIPT_TYPE = Roman;
-				REZ_SUPPRESS_REDECLARED_RESOURCE_TYPE_WARNINGS = NO;
 				STRIP_INSTALLED_PRODUCT = NO;
 				WRAPPER_EXTENSION = bundle;
 			};
Index: Plug-ins/CocoaSpeller/CocoaSpeller.xcodeproj/project.pbxproj
===================================================================
--- Plug-ins/CocoaSpeller/CocoaSpeller.xcodeproj/project.pbxproj	(revision 460)
+++ Plug-ins/CocoaSpeller/CocoaSpeller.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -290,8 +290,11 @@
 /* Begin PBXProject section */
 		AF4196BA0AE6F4DF00E19592 /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = AF4196BB0AE6F4DF00E19592 /* Build configuration list for PBXProject "CocoaSpeller" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 0;
 			knownRegions = (
@@ -364,21 +367,28 @@
 		AF4196BC0AE6F4DF00E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = YES;
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
+				CLANG_WARN_BOOL_CONVERSION = YES;
+				CLANG_WARN_CONSTANT_CONVERSION = YES;
+				CLANG_WARN_EMPTY_BODY = YES;
+				CLANG_WARN_ENUM_CONVERSION = YES;
+				CLANG_WARN_INT_CONVERSION = YES;
 				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
 				GCC_PREFIX_HEADER = ../Common/Plugin_Prefix_MacOSXcode.h;
-				GCC_SHORT_ENUMS = NO;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
 				GCC_WARN_ABOUT_DEPRECATED_FUNCTIONS = NO;
+				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
+				GCC_WARN_ABOUT_RETURN_TYPE = YES;
+				GCC_WARN_UNINITIALIZED_AUTOS = YES;
+				GCC_WARN_UNKNOWN_PRAGMAS = YES;
+				GCC_WARN_UNUSED_FUNCTION = YES;
+				GCC_WARN_UNUSED_VARIABLE = YES;
 				INFOPLIST_FILE = ../Common/Info.plst;
 				INFOPLIST_OTHER_PREPROCESSOR_FLAGS = "-include sources/Info.plst.def -include ../Common/InfoCommon.plst.def";
 				INFOPLIST_PREPROCESS = YES;
 				MACH_O_TYPE = mh_bundle;
 				PRODUCT_NAME = CocoaSpeller;
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				SDKROOT = macosx10.6;
 				WRAPPER_EXTENSION = bundle;
 			};
 			name = Debug;
@@ -386,14 +396,8 @@
 		AF4196CA0AE6F4E000E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
-				GCC_C_LANGUAGE_STANDARD = c99;
-				GCC_ENABLE_CPP_RTTI = NO;
+				COMBINE_HIDPI_IMAGES = YES;
 				GCC_OPTIMIZATION_LEVEL = 0;
-				GCC_REUSE_STRINGS = NO;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
-				GCC_WARN_UNKNOWN_PRAGMAS = YES;
-				LD_MAP_FILE_PATH = "$(TARGET_TEMP_DIR)/$(PRODUCT_NAME)-LinkMap-$(CURRENT_VARIANT)-$(CURRENT_ARCH).txt";
 				LIBRARY_SEARCH_PATHS = (
 					"$(inherited)",
 					"$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1)",
Index: Plug-ins/Eudora4AdbkIO/sources/CEudora4AdbkIOPluginDLL.cp
===================================================================
--- Plug-ins/Eudora4AdbkIO/sources/CEudora4AdbkIOPluginDLL.cp	(revision 460)
+++ Plug-ins/Eudora4AdbkIO/sources/CEudora4AdbkIOPluginDLL.cp	(revision 493)
@@ -609,7 +609,7 @@
 		{
 		case '"':
 			// Cache for adl
-			adl = p++;
+			p++;
 
 			// Find match and terminate and step over
 			while(*p)
@@ -803,17 +803,14 @@
 		{
 			// Goto end of address and terminate
 			q += ::strcspn(q, WHITE_SPACE);
-			bool more = false;
 			bool finished = false;
 			if ((*q == '\r') || (*q == '\n'))
 			{
 				finished = true;
-				more = true;
 			}
 			else if (*q == '\0')
 			{
 				finished = true;
-				more = false;
 			}
 			*q = '\0';
 			addr->mEmail = p;
@@ -825,8 +822,6 @@
 				p = ::strgetbrastr(&q);
 
 				if (p) addr->mName = p;
-
-				more = (*q);
 			}
 
 			q++;
Index: Plug-ins/SMIME/sources/CSMIMEPluginDLL.cp
===================================================================
--- Plug-ins/SMIME/sources/CSMIMEPluginDLL.cp	(revision 460)
+++ Plug-ins/SMIME/sources/CSMIMEPluginDLL.cp	(revision 493)
@@ -1060,7 +1060,7 @@
 		if (encrypt_only)
 		{
 			// Now get the certs to which this has been encrypted to
-			encrypted_to = ::sk_X509_new_null();
+			encrypted_to = sk_X509_new_null();
 #ifdef USE_CMS
 			STACK_OF(CMS_RECIP_INFO)* recips = NULL;
 #else
@@ -1506,7 +1506,7 @@
 	try
 	{
 		// Create cert stack
-		certs = ::sk_X509_new_null();
+		certs = sk_X509_new_null();
 		if (!certs)
 		{
 			REPORTERROR(eSecurity_UnknownError, "Could not create certificate stack");
@@ -1757,7 +1757,6 @@
 		if (::X509_NAME_get_text_by_NID(xn, nid, x509_buf, sizeof(x509_buf)) != -1)
 		{
 			results.push_back(x509_buf);
-			result = true;
 		}
 	}
 }
Index: Plug-ins/CocoaSpeller/sources/CocoaSpell.h
===================================================================
--- Plug-ins/CocoaSpeller/sources/CocoaSpell.h	(revision 460)
+++ Plug-ins/CocoaSpeller/sources/CocoaSpell.h	(revision 493)
@@ -16,11 +16,11 @@
 CFRange CheckSpellingOfString(CFStringRef stringToCheck, int startingOffset, int tag);
 void IgnoreWord(CFStringRef wordToIgnore, int tag);
 void LearnWord(CFStringRef word);
-CFArrayRef GuessesForWord(CFStringRef stringToGuess);
+CFArrayRef CopyGuessesForWord(CFStringRef stringToGuess);
 
 int SetLanguage(CFStringRef language);
-CFStringRef Language(void);
-CFArrayRef AvailableLanguages(void);
+CFStringRef CopyLanguage(void);
+CFArrayRef CopyAvailableLanguages(void);
 
 #ifdef __cplusplus
 }
Index: Plug-ins/GPG/GPG.xcodeproj/project.pbxproj
===================================================================
--- Plug-ins/GPG/GPG.xcodeproj/project.pbxproj	(revision 460)
+++ Plug-ins/GPG/GPG.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -13,7 +13,7 @@
 		AF8AAE670AE5C83700A94FD4 /* CPluginDLL.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF8AAE5D0AE5C83700A94FD4 /* CPluginDLL.cp */; };
 		AF8AAE690AE5C83700A94FD4 /* CSecurityPluginDLL.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF8AAE5F0AE5C83700A94FD4 /* CSecurityPluginDLL.cp */; };
 		AF8AAE6B0AE5C83700A94FD4 /* CGPGPluginDLL.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF8AAE610AE5C83700A94FD4 /* CGPGPluginDLL.cp */; };
-		AF9BC8F813D5D56A00240750 /* libPluginLibrary.a in Frameworks */ = {isa = PBXBuildFile; fileRef = AF9BC8F713D5D56A00240750 /* libPluginLibrary.a */; };
+		AFECC92A176E1075006354FB /* libPluginLibrary.a in Frameworks */ = {isa = PBXBuildFile; fileRef = AFECC929176E1075006354FB /* libPluginLibrary.a */; };
 /* End PBXBuildFile section */
 
 /* Begin PBXFileReference section */
@@ -33,7 +33,7 @@
 		AF8AAE790AE5C83B00A94FD4 /* CPluginInfo.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; name = CPluginInfo.h; path = ../Common/CPluginInfo.h; sourceTree = SOURCE_ROOT; };
 		AF8AAE7D0AE5C83B00A94FD4 /* CCharsetCodes.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; name = CCharsetCodes.h; path = ../../Sources_Common/i18n/Charsets/CCharsetCodes.h; sourceTree = SOURCE_ROOT; };
 		AF8AAEAC0AE5CA2900A94FD4 /* MoreFilesX.h */ = {isa = PBXFileReference; fileEncoding = 30; lastKnownFileType = sourcecode.c.h; name = MoreFilesX.h; path = ../../../Libraries/MoreFilesX/MoreFilesX.h; sourceTree = SOURCE_ROOT; };
-		AF9BC8F713D5D56A00240750 /* libPluginLibrary.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; name = libPluginLibrary.a; path = ../PluginLibrary/build/Debug/libPluginLibrary.a; sourceTree = SOURCE_ROOT; };
+		AFECC929176E1075006354FB /* libPluginLibrary.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; name = libPluginLibrary.a; path = ../PluginLibrary/build/Debug/libPluginLibrary.a; sourceTree = "<group>"; };
 /* End PBXFileReference section */
 
 /* Begin PBXFrameworksBuildPhase section */
@@ -41,7 +41,7 @@
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
-				AF9BC8F813D5D56A00240750 /* libPluginLibrary.a in Frameworks */,
+				AFECC92A176E1075006354FB /* libPluginLibrary.a in Frameworks */,
 				AF657384136CAA930088690F /* Carbon.framework in Frameworks */,
 				AF657385136CAA930088690F /* CoreFoundation.framework in Frameworks */,
 			);
@@ -106,7 +106,7 @@
 		AF8AAE7F0AE5C83B00A94FD4 /* Frameworks */ = {
 			isa = PBXGroup;
 			children = (
-				AF9BC8F713D5D56A00240750 /* libPluginLibrary.a */,
+				AFECC929176E1075006354FB /* libPluginLibrary.a */,
 				AF657382136CAA930088690F /* Carbon.framework */,
 				AF657383136CAA930088690F /* CoreFoundation.framework */,
 			);
@@ -139,8 +139,11 @@
 /* Begin PBXProject section */
 		AF8AAE4A0AE5C83600A94FD4 /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = AF8AAE4B0AE5C83600A94FD4 /* Build configuration list for PBXProject "GPG" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 0;
 			knownRegions = (
@@ -197,11 +200,11 @@
 		AF8AAE4C0AE5C83600A94FD4 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
+				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
 				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
 				GCC_WARN_ABOUT_DEPRECATED_FUNCTIONS = NO;
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				SDKROOT = macosx10.6;
 			};
 			name = Debug;
 		};
@@ -208,28 +211,9 @@
 		AF8AAE5A0AE5C83600A94FD4 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = NO;
-				ARCHS = (
-					ppc,
-					i386,
-				);
-				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
-				GCC_ALTIVEC_EXTENSIONS = NO;
-				GCC_CHAR_IS_UNSIGNED_CHAR = NO;
-				GCC_C_LANGUAGE_STANDARD = c99;
-				GCC_ENABLE_CPP_RTTI = NO;
-				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
-				GCC_INPUT_FILETYPE = sourcecode.cpp.cpp;
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_PREFIX_HEADER = ../Common/Plugin_Prefix_MacOSXcode.h;
-				GCC_REUSE_STRINGS = NO;
-				GCC_SHORT_ENUMS = NO;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
-				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = NO;
-				GCC_WARN_UNKNOWN_PRAGMAS = YES;
-				GCC_WARN_UNUSED_PARAMETER = NO;
-				GCC_WARN_UNUSED_VARIABLE = NO;
 				INFOPLIST_FILE = ../Common/Info.plst;
 				INFOPLIST_OTHER_PREPROCESSOR_FLAGS = "-include sources/Info.plst.def -include ../Common/InfoCommon.plst.def";
 				INFOPLIST_PREPROCESS = YES;
@@ -237,14 +221,10 @@
 					"$(inherited)",
 					"$(LIBRARY_SEARCH_PATHS_QUOTED_1)",
 					"$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1)",
+					"$(SRCROOT)/../PluginLibrary/build/Debug",
 				);
-				LIBRARY_SEARCH_PATHS_QUOTED_1 = "\"$(SRCROOT)/../PluginLibrary\"";
-				LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = "\"$(SRCROOT)/../PluginLibrary/build/Debug\"";
 				OTHER_CFLAGS = "-fno-inline";
-				PREBINDING = YES;
 				PRODUCT_NAME = GPG;
-				REZ_SCRIPT_TYPE = Roman;
-				REZ_SUPPRESS_REDECLARED_RESOURCE_TYPE_WARNINGS = NO;
 				STRIP_INSTALLED_PRODUCT = NO;
 				WRAPPER_EXTENSION = bundle;
 			};
Index: Plug-ins/GPG/GPG.xcodeproj
===================================================================
--- Plug-ins/GPG/GPG.xcodeproj	(revision 460)
+++ Plug-ins/GPG/GPG.xcodeproj	(revision 493)

Property changes on: Plug-ins/GPG/GPG.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 *.mode*
 *.pbxuser
+xcuserdata
Index: Plug-ins/CocoaSpeller/CocoaSpeller.xcodeproj
===================================================================
--- Plug-ins/CocoaSpeller/CocoaSpeller.xcodeproj	(revision 460)
+++ Plug-ins/CocoaSpeller/CocoaSpeller.xcodeproj	(revision 493)

Property changes on: Plug-ins/CocoaSpeller/CocoaSpeller.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,3 +1,4 ##
 cyrusdaboo.mode1
 cyrusdaboo.mode1v3
 cyrusdaboo.pbxuser
+xcuserdata
Index: Plug-ins/SMIME/SMIME.xcodeproj
===================================================================
--- Plug-ins/SMIME/SMIME.xcodeproj	(revision 460)
+++ Plug-ins/SMIME/SMIME.xcodeproj	(revision 493)

Property changes on: Plug-ins/SMIME/SMIME.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 *.mode*
 *.pbxuser
+xcuserdata
Index: Plug-ins/Eudora4AdbkIO/Eudora4AdbkIO.xcodeproj
===================================================================
--- Plug-ins/Eudora4AdbkIO/Eudora4AdbkIO.xcodeproj	(revision 460)
+++ Plug-ins/Eudora4AdbkIO/Eudora4AdbkIO.xcodeproj	(revision 493)

Property changes on: Plug-ins/Eudora4AdbkIO/Eudora4AdbkIO.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,3 +1,3 ##
 *.mode*
 *.pbxuser
-
+xcuserdata
Index: Plug-ins/NetscapeAdbkIO/NetscapeAdbkIO.xcodeproj
===================================================================
--- Plug-ins/NetscapeAdbkIO/NetscapeAdbkIO.xcodeproj	(revision 460)
+++ Plug-ins/NetscapeAdbkIO/NetscapeAdbkIO.xcodeproj	(revision 493)

Property changes on: Plug-ins/NetscapeAdbkIO/NetscapeAdbkIO.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 *.mode*
 *.pbxuser
+xcuserdata
Index: Plug-ins/GSSAPI/GSSAPI.xcodeproj
===================================================================
--- Plug-ins/GSSAPI/GSSAPI.xcodeproj	(revision 460)
+++ Plug-ins/GSSAPI/GSSAPI.xcodeproj	(revision 493)

Property changes on: Plug-ins/GSSAPI/GSSAPI.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 *.mode*
 *.pbxuser
+xcuserdata
Index: Plug-ins/PluginLibrary/PluginLibrary.xcodeproj
===================================================================
--- Plug-ins/PluginLibrary/PluginLibrary.xcodeproj	(revision 460)
+++ Plug-ins/PluginLibrary/PluginLibrary.xcodeproj	(revision 493)

Property changes on: Plug-ins/PluginLibrary/PluginLibrary.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 *.mode*
 *.pbxuser
+xcuserdata
Index: Plug-ins/vCardAdbkIO/vCardAdbkIO.xcodeproj/project.pbxproj
===================================================================
--- Plug-ins/vCardAdbkIO/vCardAdbkIO.xcodeproj/project.pbxproj	(revision 460)
+++ Plug-ins/vCardAdbkIO/vCardAdbkIO.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -14,7 +14,7 @@
 		AF41995E0AE9A55A00E19592 /* CVCardEngine.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF4199510AE9A55A00E19592 /* CVCardEngine.cp */; };
 		AF4199610AE9A55A00E19592 /* CVCard.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF4199530AE9A55A00E19592 /* CVCard.cp */; };
 		AF6573A1136CAC390088690F /* Carbon.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = AF6573A0136CAC390088690F /* Carbon.framework */; };
-		AF9BC90613D5D78D00240750 /* libPluginLibrary.a in Frameworks */ = {isa = PBXBuildFile; fileRef = AF9BC90513D5D78D00240750 /* libPluginLibrary.a */; };
+		AFECC934176E154B006354FB /* libPluginLibrary.a in Frameworks */ = {isa = PBXBuildFile; fileRef = AFECC933176E154B006354FB /* libPluginLibrary.a */; };
 /* End PBXBuildFile section */
 
 /* Begin PBXFileReference section */
@@ -38,7 +38,7 @@
 		AF4199720AE9A55C00E19592 /* quotedprintable.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; name = quotedprintable.h; path = ../../Sources_Common/Utilities/quotedprintable.h; sourceTree = SOURCE_ROOT; };
 		AF4199760AE9A55C00E19592 /* CCharsetCodes.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; name = CCharsetCodes.h; path = ../../Sources_Common/i18n/Charsets/CCharsetCodes.h; sourceTree = SOURCE_ROOT; };
 		AF6573A0136CAC390088690F /* Carbon.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = Carbon.framework; path = System/Library/Frameworks/Carbon.framework; sourceTree = SDKROOT; };
-		AF9BC90513D5D78D00240750 /* libPluginLibrary.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; name = libPluginLibrary.a; path = ../PluginLibrary/build/Debug/libPluginLibrary.a; sourceTree = SOURCE_ROOT; };
+		AFECC933176E154B006354FB /* libPluginLibrary.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; name = libPluginLibrary.a; path = ../PluginLibrary/build/Debug/libPluginLibrary.a; sourceTree = "<group>"; };
 /* End PBXFileReference section */
 
 /* Begin PBXFrameworksBuildPhase section */
@@ -46,7 +46,7 @@
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
-				AF9BC90613D5D78D00240750 /* libPluginLibrary.a in Frameworks */,
+				AFECC934176E154B006354FB /* libPluginLibrary.a in Frameworks */,
 				AF6573A1136CAC390088690F /* Carbon.framework in Frameworks */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
@@ -107,7 +107,7 @@
 		AF4199650AE9A55B00E19592 /* Frameworks */ = {
 			isa = PBXGroup;
 			children = (
-				AF9BC90513D5D78D00240750 /* libPluginLibrary.a */,
+				AFECC933176E154B006354FB /* libPluginLibrary.a */,
 				AF6573A0136CAC390088690F /* Carbon.framework */,
 			);
 			name = Frameworks;
@@ -139,8 +139,11 @@
 /* Begin PBXProject section */
 		AF41993A0AE9A55A00E19592 /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = AF41993B0AE9A55A00E19592 /* Build configuration list for PBXProject "vCardAdbkIO" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 0;
 			knownRegions = (
@@ -196,11 +199,9 @@
 		AF41993C0AE9A55A00E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
-				GCC_WARN_ABOUT_DEPRECATED_FUNCTIONS = NO;
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
+				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
+				SDKROOT = macosx10.6;
 			};
 			name = Debug;
 		};
@@ -207,46 +208,22 @@
 		AF4199480AE9A55A00E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = NO;
-				ARCHS = (
-					ppc,
-					i386,
-				);
-				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
-				GCC_ALTIVEC_EXTENSIONS = NO;
-				GCC_CHAR_IS_UNSIGNED_CHAR = NO;
-				GCC_C_LANGUAGE_STANDARD = c99;
-				GCC_ENABLE_CPP_RTTI = NO;
-				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_PREFIX_HEADER = ../Common/Plugin_Prefix_MacOSXcode.h;
-				GCC_REUSE_STRINGS = YES;
-				GCC_SHORT_ENUMS = NO;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
-				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = NO;
-				GCC_WARN_UNKNOWN_PRAGMAS = YES;
-				GCC_WARN_UNUSED_PARAMETER = NO;
-				GCC_WARN_UNUSED_VARIABLE = NO;
 				INFOPLIST_FILE = ../Common/Info.plst;
 				INFOPLIST_OTHER_PREPROCESSOR_FLAGS = "-include sources/Info.plst.def -include ../Common/InfoCommon.plst.def";
 				INFOPLIST_PREPROCESS = YES;
 				LIBRARY_SEARCH_PATHS = (
 					"$(inherited)",
-					"$(LIBRARY_SEARCH_PATHS_QUOTED_1)",
-					"$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1)",
+					"$(SRCROOT)/../PluginLibrary/build/Debug",
 				);
-				LIBRARY_SEARCH_PATHS_QUOTED_1 = "\"$(SRCROOT)/../PluginLibrary\"";
-				LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = "\"$(SRCROOT)/../PluginLibrary/build/Debug\"";
 				OTHER_CFLAGS = "-fno-inline";
 				OTHER_LDFLAGS = (
 					"-multiply_defined",
 					warning,
 				);
-				PREBINDING = YES;
 				PRODUCT_NAME = vCardAdbkIO;
-				REZ_SCRIPT_TYPE = Roman;
-				REZ_SUPPRESS_REDECLARED_RESOURCE_TYPE_WARNINGS = NO;
 				STRIP_INSTALLED_PRODUCT = NO;
 				WRAPPER_EXTENSION = bundle;
 			};
Index: Plug-ins/QuickmailProAdbkIO/QuickmailProAdbkIO.xcodeproj/project.pbxproj
===================================================================
--- Plug-ins/QuickmailProAdbkIO/QuickmailProAdbkIO.xcodeproj/project.pbxproj	(revision 460)
+++ Plug-ins/QuickmailProAdbkIO/QuickmailProAdbkIO.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -49,7 +49,6 @@
 		AF4198EB0AE9A3C400E19592 = {
 			isa = PBXGroup;
 			children = (
-				AF657394136CABA20088690F /* Carbon.framework */,
 				AF4198FC0AE9A3C400E19592 /* Main */,
 				AF4199130AE9A3C500E19592 /* Imported Files */,
 				AF4199140AE9A3C500E19592 /* Frameworks */,
@@ -95,6 +94,7 @@
 		AF4199140AE9A3C500E19592 /* Frameworks */ = {
 			isa = PBXGroup;
 			children = (
+				AF657394136CABA20088690F /* Carbon.framework */,
 			);
 			name = Frameworks;
 			sourceTree = "<group>";
@@ -125,8 +125,11 @@
 /* Begin PBXProject section */
 		AF4198ED0AE9A3C400E19592 /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = AF4198EE0AE9A3C400E19592 /* Build configuration list for PBXProject "QuickmailProAdbkIO" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 0;
 			knownRegions = (
@@ -182,10 +185,9 @@
 		AF4198EF0AE9A3C400E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
+				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
+				SDKROOT = macosx10.6;
 			};
 			name = Debug;
 		};
@@ -192,27 +194,9 @@
 		AF4198FB0AE9A3C400E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = NO;
-				ARCHS = (
-					ppc,
-					i386,
-				);
-				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
-				GCC_ALTIVEC_EXTENSIONS = NO;
-				GCC_CHAR_IS_UNSIGNED_CHAR = NO;
-				GCC_C_LANGUAGE_STANDARD = c99;
-				GCC_ENABLE_CPP_RTTI = NO;
-				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_PREFIX_HEADER = ../Common/Plugin_Prefix_MacOSXcode.h;
-				GCC_REUSE_STRINGS = YES;
-				GCC_SHORT_ENUMS = NO;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
-				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = NO;
-				GCC_WARN_UNKNOWN_PRAGMAS = YES;
-				GCC_WARN_UNUSED_PARAMETER = NO;
-				GCC_WARN_UNUSED_VARIABLE = NO;
 				INFOPLIST_FILE = ../Common/Info.plst;
 				INFOPLIST_OTHER_PREPROCESSOR_FLAGS = "-include sources/Info.plst.def -include ../Common/InfoCommon.plst.def";
 				INFOPLIST_PREPROCESS = YES;
@@ -221,10 +205,7 @@
 					"-multiply_defined",
 					warning,
 				);
-				PREBINDING = YES;
 				PRODUCT_NAME = QuickmailProAdbkIO;
-				REZ_SCRIPT_TYPE = Roman;
-				REZ_SUPPRESS_REDECLARED_RESOURCE_TYPE_WARNINGS = NO;
 				STRIP_INSTALLED_PRODUCT = NO;
 				WRAPPER_EXTENSION = bundle;
 			};
Index: Plug-ins/CocoaSpeller/sources/CCocoaSpellerPluginDLL.cp
===================================================================
--- Plug-ins/CocoaSpeller/sources/CCocoaSpellerPluginDLL.cp	(revision 460)
+++ Plug-ins/CocoaSpeller/sources/CCocoaSpellerPluginDLL.cp	(revision 493)
@@ -140,6 +140,7 @@
 
 int CCocoaSpellerPluginDLL::CloseDictionary(int dict)
 {
+    return 0;
 }
 
 int CCocoaSpellerPluginDLL::AddWord(const char* utf8)
@@ -185,7 +186,7 @@
 const char* CCocoaSpellerPluginDLL::GetSuggestions(const char* utf8, long ctr)
 {
 	MyCFString cfstr(utf8, kCFStringEncodingUTF8);
-	CFArrayRef results = ::GuessesForWord(cfstr);
+	CFArrayRef results = ::CopyGuessesForWord(cfstr);
 	PPx::CFArray<CFStringRef> array(results, false);
 	mBuffer.clear();
 	for(long count = 0; count < array.GetCount(); count++)
@@ -371,7 +372,7 @@
 int CCocoaSpellerPluginDLL::GetDictionaries(const char** dicts)
 {
 	mDictionaries.clear();
-	CFArrayRef results = ::AvailableLanguages();
+	CFArrayRef results = ::CopyAvailableLanguages();
 	PPx::CFArray<CFStringRef> array(results, false);
 	for(long count = 0; count < array.GetCount(); count++)
 	{
Index: Plug-ins/GPG/sources/CGPGPluginDLL.cp
===================================================================
--- Plug-ins/GPG/sources/CGPGPluginDLL.cp	(revision 460)
+++ Plug-ins/GPG/sources/CGPGPluginDLL.cp	(revision 493)
@@ -1841,8 +1841,8 @@
 		}
 		else if (!::strncmp(p, cNOPUBKEY, ::strlen(cNOPUBKEY)))
 		{
-			char* q = ::strtok(const_cast<char*>(p), " ");		// Token: NO_PUBKEY
-			q = ::strtok(NULL, "");	// Token: keyid
+			::strtok(const_cast<char*>(p), " ");		// Token: NO_PUBKEY
+			char* q = ::strtok(NULL, "");	// Token: keyid
 			if (::strlen(q) == 16)
 				q += 8;
 			cdstring errtxt("No Public Key (0x");
@@ -1857,8 +1857,8 @@
 			// Set flag only
 			mData->mDidSig = true;
 			
-			char* q = ::strtok(const_cast<char*>(p), " ");		// Token: GOODSIG
-			q = ::strtok(NULL, " ");	// Token: keyid
+			::strtok(const_cast<char*>(p), " ");		// Token: GOODSIG
+			char* q = ::strtok(NULL, " ");	// Token: keyid
 			if (::strlen(q) == 16)
 				q += 8;
 
@@ -1935,13 +1935,13 @@
 		if (line.compare_start("sec ") || line.compare_start("pub "))
 		{
 			cdstring id;
-			char* q = ::strtok(line, " ");	// sec
-			q = ::strtok(NULL, " ");		// id
+			::strtok(line, " ");	// sec
+			char* q = ::strtok(NULL, " ");		// id
 			if (::strchr(q, '/'))
 				id += ::strchr(q, '/') + 1;
 			else
 				id += q;
-			q = ::strtok(NULL, " ");		// date
+			::strtok(NULL, " ");		// date
 			cdstring name = ::strtok(NULL, "");		// name
 			name.trimspace();
 			
@@ -1966,8 +1966,8 @@
 		else if (line.compare_start("uid "))
 		{
 			cdstring id;
-			char* q = ::strtok(line, " ");	// uid
-			q = ::strtok(NULL, "");	// name
+			::strtok(line, " ");	// uid
+			char* q = ::strtok(NULL, "");	// name
 			
 			// Get current name
 			cdstring name(q);
@@ -1986,8 +1986,8 @@
 		else if (line.compare_start("sub ") || line.compare_start("ssb "))
 		{
 			cdstring id;
-			char* q = ::strtok(line, " ");	// sec
-			q = ::strtok(NULL, " ");		// id
+			::strtok(line, " ");	// sec
+			char* q = ::strtok(NULL, " ");		// id
 			if (::strchr(q, '/'))
 				id += ::strchr(q, '/') + 1;
 			else
Index: Plug-ins/OEAdbkIO/OEAdbkIO.xcodeproj/project.pbxproj
===================================================================
--- Plug-ins/OEAdbkIO/OEAdbkIO.xcodeproj/project.pbxproj	(revision 460)
+++ Plug-ins/OEAdbkIO/OEAdbkIO.xcodeproj/project.pbxproj	(revision 493)
@@ -3,7 +3,7 @@
 	archiveVersion = 1;
 	classes = {
 	};
-	objectVersion = 42;
+	objectVersion = 46;
 	objects = {
 
 /* Begin PBXBuildFile section */
@@ -12,7 +12,7 @@
 		AF4199DD0AE9A7D000E19592 /* CAdbkIOPluginDLL.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF4199D50AE9A7D000E19592 /* CAdbkIOPluginDLL.cp */; };
 		AF4199DF0AE9A7D000E19592 /* COutlookExAdbkIOPluginDLL.cp in Sources */ = {isa = PBXBuildFile; fileRef = AF4199D70AE9A7D000E19592 /* COutlookExAdbkIOPluginDLL.cp */; };
 		AF65738F136CAB200088690F /* Carbon.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = AF65738E136CAB200088690F /* Carbon.framework */; };
-		AF9BC90013D5D75000240750 /* libPluginLibrary.a in Frameworks */ = {isa = PBXBuildFile; fileRef = AF9BC8FF13D5D75000240750 /* libPluginLibrary.a */; };
+		AFECC92E176E11EE006354FB /* libPluginLibrary.a in Frameworks */ = {isa = PBXBuildFile; fileRef = AFECC92D176E11EE006354FB /* libPluginLibrary.a */; };
 /* End PBXBuildFile section */
 
 /* Begin PBXFileReference section */
@@ -31,7 +31,7 @@
 		AF4199F00AE9A7D300E19592 /* CCharSpecials.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; name = CCharSpecials.h; path = ../../Sources_Common/Utilities/CCharSpecials.h; sourceTree = SOURCE_ROOT; };
 		AF4199F40AE9A7D300E19592 /* CCharsetCodes.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; name = CCharsetCodes.h; path = ../../Sources_Common/i18n/Charsets/CCharsetCodes.h; sourceTree = SOURCE_ROOT; };
 		AF65738E136CAB200088690F /* Carbon.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = Carbon.framework; path = System/Library/Frameworks/Carbon.framework; sourceTree = SDKROOT; };
-		AF9BC8FF13D5D75000240750 /* libPluginLibrary.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; name = libPluginLibrary.a; path = ../PluginLibrary/build/Debug/libPluginLibrary.a; sourceTree = SOURCE_ROOT; };
+		AFECC92D176E11EE006354FB /* libPluginLibrary.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; name = libPluginLibrary.a; path = ../PluginLibrary/build/Debug/libPluginLibrary.a; sourceTree = "<group>"; };
 /* End PBXFileReference section */
 
 /* Begin PBXFrameworksBuildPhase section */
@@ -39,7 +39,7 @@
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
-				AF9BC90013D5D75000240750 /* libPluginLibrary.a in Frameworks */,
+				AFECC92E176E11EE006354FB /* libPluginLibrary.a in Frameworks */,
 				AF65738F136CAB200088690F /* Carbon.framework in Frameworks */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
@@ -95,7 +95,7 @@
 		AF4199E30AE9A7D300E19592 /* Frameworks */ = {
 			isa = PBXGroup;
 			children = (
-				AF9BC8FF13D5D75000240750 /* libPluginLibrary.a */,
+				AFECC92D176E11EE006354FB /* libPluginLibrary.a */,
 				AF65738E136CAB200088690F /* Carbon.framework */,
 			);
 			name = Frameworks;
@@ -127,8 +127,11 @@
 /* Begin PBXProject section */
 		AF4199C20AE9A7D000E19592 /* Project object */ = {
 			isa = PBXProject;
+			attributes = {
+				LastUpgradeCheck = 0500;
+			};
 			buildConfigurationList = AF4199C30AE9A7D000E19592 /* Build configuration list for PBXProject "OEAdbkIO" */;
-			compatibilityVersion = "Xcode 2.4";
+			compatibilityVersion = "Xcode 3.2";
 			developmentRegion = English;
 			hasScannedForEncodings = 0;
 			knownRegions = (
@@ -182,10 +185,9 @@
 		AF4199C40AE9A7D000E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
-				GCC_VERSION = com.apple.compilers.llvm.clang.1_0;
-				SDKROOT = "$(DEVELOPER_SDK_DIR)/MacOSX10.6.sdk";
+				ARCHS = "$(ARCHS_STANDARD_32_BIT)";
+				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
+				SDKROOT = macosx10.6;
 			};
 			name = Debug;
 		};
@@ -192,45 +194,22 @@
 		AF4199D00AE9A7D000E19592 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = NO;
-				ARCHS = "$(ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1)";
-				ARCHS_STANDARD_32_BIT_PRE_XCODE_3_1 = "ppc i386";
-				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
-				GCC_ALTIVEC_EXTENSIONS = NO;
-				GCC_CHAR_IS_UNSIGNED_CHAR = NO;
-				GCC_C_LANGUAGE_STANDARD = c99;
-				GCC_ENABLE_CPP_RTTI = NO;
-				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
-				GCC_INPUT_FILETYPE = sourcecode.cpp.cpp;
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_PREFIX_HEADER = ../Common/Plugin_Prefix_MacOSXcode.h;
-				GCC_REUSE_STRINGS = NO;
-				GCC_SHORT_ENUMS = NO;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
-				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
-				GCC_WARN_HIDDEN_VIRTUAL_FUNCTIONS = NO;
-				GCC_WARN_UNKNOWN_PRAGMAS = YES;
-				GCC_WARN_UNUSED_PARAMETER = NO;
-				GCC_WARN_UNUSED_VARIABLE = NO;
 				INFOPLIST_FILE = ../Common/Info.plst;
 				INFOPLIST_OTHER_PREPROCESSOR_FLAGS = "-include sources/Info.plst.def -include ../Common/InfoCommon.plst.def";
 				INFOPLIST_PREPROCESS = YES;
 				LIBRARY_SEARCH_PATHS = (
 					"$(inherited)",
-					"$(LIBRARY_SEARCH_PATHS_QUOTED_1)",
-					"$(LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1)",
+					"$(SRCROOT)/../PluginLibrary/build/Debug",
 				);
-				LIBRARY_SEARCH_PATHS_QUOTED_1 = "\"$(SRCROOT)/../PluginLibrary\"";
-				LIBRARY_SEARCH_PATHS_QUOTED_FOR_TARGET_1 = "\"$(SRCROOT)/../PluginLibrary/build/Debug\"";
 				OTHER_CFLAGS = "-fno-inline";
 				OTHER_LDFLAGS = (
 					"-multiply_defined",
 					warning,
 				);
-				PREBINDING = YES;
 				PRODUCT_NAME = OEAdbkIO;
-				REZ_SCRIPT_TYPE = Roman;
-				REZ_SUPPRESS_REDECLARED_RESOURCE_TYPE_WARNINGS = NO;
 				STRIP_INSTALLED_PRODUCT = NO;
 				WRAPPER_EXTENSION = bundle;
 			};
Index: Plug-ins/OEAdbkIO/OEAdbkIO.xcodeproj
===================================================================
--- Plug-ins/OEAdbkIO/OEAdbkIO.xcodeproj	(revision 460)
+++ Plug-ins/OEAdbkIO/OEAdbkIO.xcodeproj	(revision 493)

Property changes on: Plug-ins/OEAdbkIO/OEAdbkIO.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 *.mode*
 *.pbxuser
+xcuserdata
Index: Plug-ins/QuickmailProAdbkIO/QuickmailProAdbkIO.xcodeproj
===================================================================
--- Plug-ins/QuickmailProAdbkIO/QuickmailProAdbkIO.xcodeproj	(revision 460)
+++ Plug-ins/QuickmailProAdbkIO/QuickmailProAdbkIO.xcodeproj	(revision 493)

Property changes on: Plug-ins/QuickmailProAdbkIO/QuickmailProAdbkIO.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 *.mode*
 *.pbxuser
+xcuserdata
Index: Plug-ins/vCardAdbkIO/vCardAdbkIO.xcodeproj
===================================================================
--- Plug-ins/vCardAdbkIO/vCardAdbkIO.xcodeproj	(revision 460)
+++ Plug-ins/vCardAdbkIO/vCardAdbkIO.xcodeproj	(revision 493)

Property changes on: Plug-ins/vCardAdbkIO/vCardAdbkIO.xcodeproj
___________________________________________________________________
Modified: svn:ignore
## -1,2 +1,3 ##
 *.mode*
 *.pbxuser
+xcuserdata
